import{f as os,r as y,w as ns,e as rs,y as is,g as a,k as e,s as cs,j as i,v as us,x as ds,F as _,z as v,t,n as J,W as X,p as _s,i as l}from"./vendor-vh-Ah70F.js";import{h as vs,b as hs,_ as ps}from"./index-CMwbdBJJ.js";import{u as ms}from"./utils-BgL-d_zS.js";const ys={class:"search-view"},gs={class:"search-header"},fs={class:"search-input-wrapper"},ks=["placeholder"],bs={class:"tabs-container",role:"tablist"},ws=["onClick","aria-selected"],qs={class:"tab-icon"},Cs={class:"tab-label"},Ss={key:0,class:"tab-count"},$s={class:"controls-bar"},Ks={class:"sort-controls"},Ds=["onClick"],Ts={key:0,class:"loading-container"},As={key:1,class:"error-container"},Is={class:"error-message"},Ms={key:2,class:"empty-state"},Rs={key:3,class:"empty-state"},Vs={key:4,class:"results-container"},Bs={key:0,class:"all-results"},Fs={key:0,class:"result-section"},Ps={class:"section-title"},xs={class:"posts-list"},zs={class:"post-header"},Ns=["src","alt"],Us={class:"post-meta"},Ws={class:"post-author"},js={class:"post-time"},Es={key:0,class:"post-title"},Ls={class:"post-content"},Hs={class:"post-stats"},Os={key:1,class:"result-section"},Gs={class:"section-title"},Js={class:"walls-grid"},Xs=["onClick"],Ys={class:"wall-content"},Zs={class:"wall-owner"},Qs={key:0,class:"wall-desc"},se={class:"wall-stats"},ee={key:2,class:"result-section"},te={class:"section-title"},ae={class:"users-grid"},le=["src","alt"],oe={class:"user-name"},ne={class:"user-username"},re={key:0,class:"user-bio"},ie={class:"user-stats"},ce={key:3,class:"result-section"},ue={class:"section-title"},de={class:"ai-apps-grid"},_e={class:"app-author"},ve={key:0,class:"app-desc"},he={class:"app-stats"},pe={key:1,class:"filtered-results"},me={key:0,class:"posts-list"},ye={class:"post-header"},ge=["src","alt"],fe={class:"post-meta"},ke={class:"post-author"},be={class:"post-time"},we={key:0,class:"post-title"},qe={class:"post-content"},Ce={class:"post-stats"},Se={key:1,class:"walls-grid"},$e=["onClick"],Ke={class:"wall-content"},De={class:"wall-owner"},Te={key:0,class:"wall-desc"},Ae={class:"wall-stats"},Ie={key:2,class:"users-grid"},Me=["src","alt"],Re={class:"user-name"},Ve={class:"user-username"},Be={key:0,class:"user-bio"},Fe={class:"user-stats"},Pe={key:3,class:"ai-apps-grid"},xe={class:"app-author"},ze={key:0,class:"app-desc"},Ne={class:"app-stats"},Ue=os({__name:"SearchView",setup(We){const h=is(),K=_s(),S=vs(),u=y(""),d=y("all"),g=y("relevance"),r=y(null),w=y({total:0,posts:0,walls:0,users:0,ai_apps:0}),C=y(!1),f=y(null),Y=[{type:"all",label:"All",icon:"üîç",countKey:"total"},{type:"post",label:"Posts",icon:"üìù",countKey:"posts"},{type:"wall",label:"Walls",icon:"üñºÔ∏è",countKey:"walls"},{type:"user",label:"Users",icon:"üë•",countKey:"users"},{type:"ai-app",label:"AI Apps",icon:"ü§ñ",countKey:"ai_apps"}],Z=[{value:"relevance",label:"Relevance"},{value:"recent",label:"Recent"},{value:"popular",label:"Popular"}],Q=o=>o>999?`${Math.floor(o/1e3)}k+`:o.toString(),D=o=>{const n=new Date(o),c=new Date().getTime()-n.getTime(),b=Math.floor(c/36e5),q=Math.floor(c/864e5);return b<1?"just now":b<24?`${b}h ago`:q<7?`${q}d ago`:n.toLocaleDateString()},p=(o,n)=>o?o.length<=n?o:o.substring(0,n)+"...":"",m=async()=>{var n,k;const o=u.value.trim();if(o.length<2){o.length>0&&S.warning("Please enter at least 2 characters to search");return}if(o.length>200){S.warning("Search query too long (max 200 characters)");return}try{C.value=!0,f.value=null;const c=await hs.get("/search",{params:{q:o,type:d.value,sort:g.value,limit:20}});c!=null&&c.data&&(r.value=c.data.results,w.value=c.data.counts||{total:0,posts:0,walls:0,users:0,ai_apps:0})}catch(c){console.error("Search error:",c),f.value=((k=(n=c.response)==null?void 0:n.data)==null?void 0:k.message)||"Failed to perform search",S.error(f.value)}finally{C.value=!1}},ss=ms(()=>{m()},300),es=()=>{u.value.trim().length>=2&&ss()},ts=()=>{u.value="",r.value=null,w.value={total:0,posts:0,walls:0,users:0,ai_apps:0},f.value=null},as=o=>{d.value=o,K.push({query:{...h.query,type:o}}),m()},ls=o=>{g.value=o,K.push({query:{...h.query,sort:o}}),m()};return ns(()=>h.query,o=>{o.q&&o.q!==u.value&&(u.value=o.q,m()),o.type&&o.type!==d.value&&(d.value=o.type),o.sort&&o.sort!==g.value&&(g.value=o.sort)},{immediate:!1}),rs(()=>{h.query.q&&(u.value=h.query.q),h.query.type&&(d.value=h.query.type),h.query.sort&&(g.value=h.query.sort),u.value.length>=2&&m()}),(o,n)=>{var k,c,b,q,T,A,I,M,R,V,B,F,P,x,z,N,U,W,j,E,L,H,O,G;return l(),a("div",ys,[e("div",gs,[e("div",fs,[n[1]||(n[1]=e("span",{class:"search-icon"},"üîç",-1)),cs(e("input",{"onUpdate:modelValue":n[0]||(n[0]=s=>u.value=s),type:"text",class:"search-input",placeholder:o.$t("common.actions.search")+"...",onKeyup:ds(m,["enter"]),onInput:es,"aria-label":"Search",maxlength:"200"},null,40,ks),[[us,u.value]]),u.value.length>0?(l(),a("button",{key:0,class:"clear-button",onClick:ts,"aria-label":"Clear search"}," ‚úï ")):i("",!0)])]),e("div",bs,[(l(),a(_,null,v(Y,s=>e("button",{key:s.type,class:J(["tab",{"tab--active":d.value===s.type}]),onClick:$=>as(s.type),role:"tab","aria-selected":d.value===s.type},[e("span",qs,t(s.icon),1),e("span",Cs,t(s.label),1),w.value[s.countKey]>0?(l(),a("span",Ss,t(Q(w.value[s.countKey])),1)):i("",!0)],10,ws)),64))]),e("div",$s,[e("div",Ks,[n[2]||(n[2]=e("label",{class:"sort-label"},"Sort by:",-1)),(l(),a(_,null,v(Z,s=>e("button",{key:s.value,class:J(["sort-btn",{"sort-btn--active":g.value===s.value}]),onClick:$=>ls(s.value)},t(s.label),11,Ds)),64))])]),C.value?(l(),a("div",Ts,[...n[3]||(n[3]=[e("div",{class:"spinner"},null,-1),e("p",null,"Searching...",-1)])])):f.value?(l(),a("div",As,[n[4]||(n[4]=e("span",{class:"error-icon"},"‚ö†Ô∏è",-1)),e("p",Is,t(f.value),1),e("button",{onClick:m,class:"retry-btn"},"Retry")])):!u.value||u.value.length<2?(l(),a("div",Ms,[...n[5]||(n[5]=[e("span",{class:"empty-icon"},"üîç",-1),e("h3",null,"Enter a search term to begin",-1),e("p",null,"Search for posts, walls, users, and AI applications",-1)])])):!C.value&&w.value.total===0?(l(),a("div",Rs,[n[6]||(n[6]=e("span",{class:"empty-icon"},"üòï",-1)),e("h3",null,'No results found for "'+t(u.value)+'"',1),n[7]||(n[7]=e("p",null,"Try different keywords or check your spelling",-1))])):(l(),a("div",Vs,[d.value==="all"?(l(),a("div",Bs,[((b=(c=(k=r.value)==null?void 0:k.posts)==null?void 0:c.items)==null?void 0:b.length)>0?(l(),a("section",Fs,[e("h2",Ps,"üìù Posts ("+t(r.value.posts.total)+")",1),e("div",xs,[(l(!0),a(_,null,v(r.value.posts.items,s=>(l(),a("div",{key:s.id,class:"post-card"},[e("div",zs,[e("img",{src:s.author_avatar||"/assets/images/default-avatar.svg",alt:s.author_username,class:"post-avatar"},null,8,Ns),e("div",Us,[e("span",Ws,"@"+t(s.author_username),1),e("span",js,t(D(s.created_at)),1)])]),s.title?(l(),a("h3",Es,t(s.title),1)):i("",!0),e("div",Ls,t(p(s.content,200)),1),e("div",Hs,[e("span",null,"üëç "+t(s.reaction_count||0),1),e("span",null,"üí¨ "+t(s.comment_count||0),1),e("span",null,"üëÅÔ∏è "+t(s.view_count||0),1)])]))),128))])])):i("",!0),((A=(T=(q=r.value)==null?void 0:q.walls)==null?void 0:T.items)==null?void 0:A.length)>0?(l(),a("section",Os,[e("h2",Gs,"üñºÔ∏è Walls ("+t(r.value.walls.total)+")",1),e("div",Js,[(l(!0),a(_,null,v(r.value.walls.items,s=>(l(),a("div",{key:s.id,class:"wall-card",onClick:$=>o.$router.push(`/wall/${s.id}`)},[e("div",{class:"wall-banner",style:X({background:s.theme||"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"})},null,4),e("div",Ys,[e("h3",null,t(s.name),1),e("p",Zs,"@"+t(s.owner_username),1),s.description?(l(),a("p",Qs,t(p(s.description,100)),1)):i("",!0),e("div",se,[e("span",null,"üìù "+t(s.post_count||0),1),e("span",null,"üë• "+t(s.subscriber_count||0),1)])])],8,Xs))),128))])])):i("",!0),((R=(M=(I=r.value)==null?void 0:I.users)==null?void 0:M.items)==null?void 0:R.length)>0?(l(),a("section",ee,[e("h2",te,"üë• Users ("+t(r.value.users.total)+")",1),e("div",ae,[(l(!0),a(_,null,v(r.value.users.items,s=>(l(),a("div",{key:s.id,class:"user-card"},[e("img",{src:s.avatar_url||"/assets/images/default-avatar.svg",alt:s.username,class:"user-avatar"},null,8,le),e("h3",oe,t(s.display_name),1),e("p",ne,"@"+t(s.username),1),s.bio?(l(),a("p",re,t(p(s.bio,80)),1)):i("",!0),e("div",ie,[e("span",null,t(s.followers_count||0)+" followers",1)])]))),128))])])):i("",!0),((F=(B=(V=r.value)==null?void 0:V.ai_apps)==null?void 0:B.items)==null?void 0:F.length)>0?(l(),a("section",ce,[e("h2",ue,"ü§ñ AI Apps ("+t(r.value.ai_apps.total)+")",1),e("div",de,[(l(!0),a(_,null,v(r.value.ai_apps.items,s=>(l(),a("div",{key:s.id,class:"ai-app-card"},[e("h3",null,t(s.title),1),e("p",_e,"by @"+t(s.author_username),1),s.description?(l(),a("p",ve,t(p(s.description,100)),1)):i("",!0),e("div",he,[e("span",null,"üîÑ "+t(s.remix_count||0),1),e("span",null,"üëç "+t(s.reaction_count||0),1)])]))),128))])])):i("",!0)])):(l(),a("div",pe,[d.value==="post"&&((z=(x=(P=r.value)==null?void 0:P.posts)==null?void 0:x.items)==null?void 0:z.length)>0?(l(),a("div",me,[(l(!0),a(_,null,v(r.value.posts.items,s=>(l(),a("div",{key:s.id,class:"post-card"},[e("div",ye,[e("img",{src:s.author_avatar||"/assets/images/default-avatar.svg",alt:s.author_username,class:"post-avatar"},null,8,ge),e("div",fe,[e("span",ke,"@"+t(s.author_username),1),e("span",be,t(D(s.created_at)),1)])]),s.title?(l(),a("h3",we,t(s.title),1)):i("",!0),e("div",qe,t(p(s.content,200)),1),e("div",Ce,[e("span",null,"üëç "+t(s.reaction_count||0),1),e("span",null,"üí¨ "+t(s.comment_count||0),1),e("span",null,"üëÅÔ∏è "+t(s.view_count||0),1)])]))),128))])):i("",!0),d.value==="wall"&&((W=(U=(N=r.value)==null?void 0:N.walls)==null?void 0:U.items)==null?void 0:W.length)>0?(l(),a("div",Se,[(l(!0),a(_,null,v(r.value.walls.items,s=>(l(),a("div",{key:s.id,class:"wall-card",onClick:$=>o.$router.push(`/wall/${s.id}`)},[e("div",{class:"wall-banner",style:X({background:s.theme||"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"})},null,4),e("div",Ke,[e("h3",null,t(s.name),1),e("p",De,"@"+t(s.owner_username),1),s.description?(l(),a("p",Te,t(p(s.description,100)),1)):i("",!0),e("div",Ae,[e("span",null,"üìù "+t(s.post_count||0),1),e("span",null,"üë• "+t(s.subscriber_count||0),1)])])],8,$e))),128))])):i("",!0),d.value==="user"&&((L=(E=(j=r.value)==null?void 0:j.users)==null?void 0:E.items)==null?void 0:L.length)>0?(l(),a("div",Ie,[(l(!0),a(_,null,v(r.value.users.items,s=>(l(),a("div",{key:s.id,class:"user-card"},[e("img",{src:s.avatar_url||"/assets/images/default-avatar.svg",alt:s.username,class:"user-avatar"},null,8,Me),e("h3",Re,t(s.display_name),1),e("p",Ve,"@"+t(s.username),1),s.bio?(l(),a("p",Be,t(p(s.bio,80)),1)):i("",!0),e("div",Fe,[e("span",null,t(s.followers_count||0)+" followers",1)])]))),128))])):i("",!0),d.value==="ai-app"&&((G=(O=(H=r.value)==null?void 0:H.ai_apps)==null?void 0:O.items)==null?void 0:G.length)>0?(l(),a("div",Pe,[(l(!0),a(_,null,v(r.value.ai_apps.items,s=>(l(),a("div",{key:s.id,class:"ai-app-card"},[e("h3",null,t(s.title),1),e("p",xe,"by @"+t(s.author_username),1),s.description?(l(),a("p",ze,t(p(s.description,100)),1)):i("",!0),e("div",Ne,[e("span",null,"üîÑ "+t(s.remix_count||0),1),e("span",null,"üëç "+t(s.reaction_count||0),1)])]))),128))])):i("",!0)]))]))])}}}),He=ps(Ue,[["__scopeId","data-v-72263264"]]);export{He as default};
//# sourceMappingURL=SearchView-C8iJZI7k.js.map
