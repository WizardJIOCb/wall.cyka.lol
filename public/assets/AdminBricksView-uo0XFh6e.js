import{e as A,r as u,f as i,k as s,h as k,Q as E,N as f,U as b,n as V,t as g,v as _,o as d}from"./vendor-Cy2yCxOA.js";import{b as y,_ as x}from"./index-DHLdXu71.js";import"./utils-i9HKr1_Q.js";const U={class:"admin-bricks-view"},h={class:"admin-panel"},N={class:"form-card"},q={class:"form-group"},C={class:"form-group"},M={class:"form-group"},S={class:"form-actions"},L=["disabled"],R={key:0},T={key:1},D={key:1,class:"result-card"},I=A({__name:"AdminBricksView",setup(z){const a=u({username:"",amount:0,reason:""}),m=u(!1),n=u(""),v=u("success"),o=u(null);async function w(){var p,e,l;if(!a.value.username||!a.value.amount){n.value="Please fill in all required fields",v.value="error";return}m.value=!0,n.value="",o.value=null;try{const r=await y.get(`/api/v1/users/search?q=${a.value.username}`);if(!r.data.success||!((p=r.data.data.users)!=null&&p.length))throw new Error("User not found");const B=r.data.data.users[0].user_id,c=await y.post("/api/v1/bricks/admin/add",{user_id:B,amount:a.value.amount,reason:a.value.reason});if(c.data.success)o.value=c.data.data,n.value=c.data.message||"Bricks added successfully!",v.value="success",a.value={username:"",amount:0,reason:""};else throw new Error(c.data.message||"Failed to add bricks")}catch(r){console.error("Error adding bricks:",r),n.value=((l=(e=r.response)==null?void 0:e.data)==null?void 0:l.message)||r.message||"Error adding bricks",v.value="error"}finally{m.value=!1}}return(p,e)=>{var l,r;return d(),i("div",U,[e[10]||(e[10]=s("div",{class:"admin-header"},[s("h1",null,"Bricks Management"),s("p",{class:"subtitle"},"Manage user bricks balance")],-1)),s("div",h,[s("div",N,[e[9]||(e[9]=s("h2",null,"Add Bricks to User",-1)),s("form",{onSubmit:E(w,["prevent"]),class:"bricks-form"},[s("div",q,[e[3]||(e[3]=s("label",{for:"username"},"Username",-1)),f(s("input",{id:"username","onUpdate:modelValue":e[0]||(e[0]=t=>a.value.username=t),type:"text",placeholder:"Enter username",required:""},null,512),[[b,a.value.username]])]),s("div",C,[e[4]||(e[4]=s("label",{for:"amount"},"Amount",-1)),f(s("input",{id:"amount","onUpdate:modelValue":e[1]||(e[1]=t=>a.value.amount=t),type:"number",min:"1",placeholder:"Enter bricks amount",required:""},null,512),[[b,a.value.amount,void 0,{number:!0}]])]),s("div",M,[e[5]||(e[5]=s("label",{for:"reason"},"Reason (optional)",-1)),f(s("input",{id:"reason","onUpdate:modelValue":e[2]||(e[2]=t=>a.value.reason=t),type:"text",placeholder:"Enter reason"},null,512),[[b,a.value.reason]])]),s("div",S,[s("button",{type:"submit",class:"btn btn-primary",disabled:m.value},[m.value?(d(),i("span",R,"Loading...")):(d(),i("span",T,"Add Bricks"))],8,L)])],32),n.value?(d(),i("div",{key:0,class:V(["message",v.value])},g(n.value),3)):k("",!0),o.value?(d(),i("div",D,[e[8]||(e[8]=s("h3",null,"Result",-1)),s("p",null,[e[6]||(e[6]=s("strong",null,"New Balance:",-1)),_(" "+g(((l=o.value.new_balance)==null?void 0:l.toLocaleString())||0),1)]),s("p",null,[e[7]||(e[7]=s("strong",null,"Amount Added:",-1)),_(" "+g(((r=o.value.amount)==null?void 0:r.toLocaleString())||0),1)])])):k("",!0)])])])}}}),$=x(I,[["__scopeId","data-v-e981e7f3"]]);export{$ as default};
//# sourceMappingURL=AdminBricksView-uo0XFh6e.js.map
