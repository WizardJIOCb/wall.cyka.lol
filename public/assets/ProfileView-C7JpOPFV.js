import{f as R,g as t,q as I,k as s,i as e,r as v,b as N,w as es,z as ts,l as O,T as ls,m as as,B as os,j as p,t as o,O as ns,V as is,F as x,x as P,n as D,R as ds,u as j,e as rs,U as W,v as cs}from"./vendor-B5QdKGWw.js";import{_ as q,u as A,b,g as us}from"./index-B9pqkw3o.js";import"./utils-i9HKr1_Q.js";const vs={class:"skeleton-loader"},ps={key:0,class:"skeleton-post"},_s={key:1,class:"skeleton-user"},ks={key:2,class:"skeleton-wall"},ms={key:3,class:"skeleton-comment"},fs={key:4,class:"skeleton-notification"},ws={key:5,class:"skeleton-default"},ys=R({__name:"SkeletonLoader",props:{type:{},count:{}},setup(m){return(E,u)=>(e(),t("div",vs,[m.type==="post"?(e(),t("div",ps,[...u[0]||(u[0]=[I('<div class="skeleton-header" data-v-d2a94964><div class="skeleton-avatar" data-v-d2a94964></div><div class="skeleton-text-group" data-v-d2a94964><div class="skeleton-text skeleton-text-lg" data-v-d2a94964></div><div class="skeleton-text skeleton-text-sm" data-v-d2a94964></div></div></div><div class="skeleton-content" data-v-d2a94964><div class="skeleton-text" data-v-d2a94964></div><div class="skeleton-text" data-v-d2a94964></div><div class="skeleton-text skeleton-text-md" data-v-d2a94964></div></div><div class="skeleton-actions" data-v-d2a94964><div class="skeleton-button" data-v-d2a94964></div><div class="skeleton-button" data-v-d2a94964></div><div class="skeleton-button" data-v-d2a94964></div></div>',3)])])):m.type==="user"?(e(),t("div",_s,[...u[1]||(u[1]=[I('<div class="skeleton-avatar skeleton-avatar-lg" data-v-d2a94964></div><div class="skeleton-text-group" data-v-d2a94964><div class="skeleton-text skeleton-text-md" data-v-d2a94964></div><div class="skeleton-text skeleton-text-sm" data-v-d2a94964></div></div><div class="skeleton-button" data-v-d2a94964></div>',3)])])):m.type==="wall"?(e(),t("div",ks,[...u[2]||(u[2]=[I('<div class="skeleton-banner" data-v-d2a94964></div><div class="skeleton-wall-content" data-v-d2a94964><div class="skeleton-text skeleton-text-lg" data-v-d2a94964></div><div class="skeleton-text skeleton-text-sm" data-v-d2a94964></div><div class="skeleton-stats" data-v-d2a94964><div class="skeleton-text skeleton-text-xs" data-v-d2a94964></div><div class="skeleton-text skeleton-text-xs" data-v-d2a94964></div></div></div>',2)])])):m.type==="comment"?(e(),t("div",ms,[...u[3]||(u[3]=[I('<div class="skeleton-avatar skeleton-avatar-sm" data-v-d2a94964></div><div class="skeleton-comment-content" data-v-d2a94964><div class="skeleton-text skeleton-text-sm" data-v-d2a94964></div><div class="skeleton-text" data-v-d2a94964></div><div class="skeleton-text skeleton-text-md" data-v-d2a94964></div></div>',2)])])):m.type==="notification"?(e(),t("div",fs,[...u[4]||(u[4]=[s("div",{class:"skeleton-icon"},null,-1),s("div",{class:"skeleton-notification-content"},[s("div",{class:"skeleton-text"}),s("div",{class:"skeleton-text skeleton-text-xs"})],-1)])])):(e(),t("div",ws,[...u[5]||(u[5]=[s("div",{class:"skeleton-text"},null,-1),s("div",{class:"skeleton-text skeleton-text-md"},null,-1),s("div",{class:"skeleton-text skeleton-text-lg"},null,-1)])]))]))}}),gs=q(ys,[["__scopeId","data-v-d2a94964"]]),hs={class:"modal-header"},bs={class:"modal-search"},$s={class:"modal-body"},Cs={key:0,class:"loading-container"},xs={key:1,class:"error-container"},Fs={key:2,class:"empty-state"},Ms={key:3,class:"users-list"},Ls=["src","alt","onClick"],Ss=["onClick"],Ps={class:"user-username"},Ts={key:0,class:"user-display-name"},Es={key:1,class:"user-bio"},Us=["onClick","disabled"],Vs=R({__name:"FollowersModal",props:{isOpen:{type:Boolean},userId:{},type:{}},emits:["close","followChanged"],setup(m,{emit:E}){const u=m,F=E,T=j(),M=A(),L=us(),$=v([]),i=v(!1),k=v(null),f=v(""),w=N(()=>u.type==="followers"?"Followers":"Following"),y=N(()=>{if(!f.value)return $.value;const r=f.value.toLowerCase();return $.value.filter(c=>{var d;return c.username.toLowerCase().includes(r)||((d=c.display_name)==null?void 0:d.toLowerCase().includes(r))})}),g=r=>{var c;return((c=M.user)==null?void 0:c.user_id)===r},S=async()=>{i.value=!0,k.value=null;try{const r=u.type==="followers"?`/users/${u.userId}/followers`:`/users/${u.userId}/following`,c=await b.get(r);c.data.success&&($.value=(c.data.data.users||[]).map(d=>({...d,isLoading:!1})))}catch(r){k.value=r.message||"Failed to load users",L.error(k.value)}finally{i.value=!1}},U=async r=>{const c=r.is_following;r.isLoading=!0;try{r.is_following=!c,c?await b.delete(`/users/${r.user_id}/follow`):await b.post(`/users/${r.user_id}/follow`),F("followChanged")}catch(d){r.is_following=c,L.error(d.message||"Failed to update follow status")}finally{r.isLoading=!1}},V=r=>{T.push(`/profile/${r}`),C()},C=()=>{F("close")};return es(()=>u.isOpen,r=>{r&&(S(),f.value="")}),(r,c)=>(e(),ts(os,{to:"body"},[O(ls,{name:"modal-fade"},{default:as(()=>[m.isOpen?(e(),t("div",{key:0,class:"modal-overlay",onClick:C},[s("div",{class:"modal-content",onClick:c[1]||(c[1]=ds(()=>{},["stop"]))},[s("div",hs,[s("h3",null,o(w.value),1),s("button",{onClick:C,class:"btn-close"},"×")]),s("div",bs,[ns(s("input",{"onUpdate:modelValue":c[0]||(c[0]=d=>f.value=d),type:"text",placeholder:"Search users...",class:"search-input"},null,512),[[is,f.value]])]),s("div",$s,[i.value?(e(),t("div",Cs,[(e(),t(x,null,P(3,d=>O(gs,{type:"user",key:d})),64))])):k.value?(e(),t("div",xs,[s("p",null,o(k.value),1),s("button",{onClick:S,class:"btn-retry"},"Retry")])):y.value.length===0?(e(),t("div",Fs,[...c[2]||(c[2]=[s("p",null,"No users found",-1)])])):(e(),t("div",Ms,[(e(!0),t(x,null,P(y.value,d=>(e(),t("div",{key:d.user_id,class:"user-item"},[s("img",{src:d.avatar_url||"/assets/images/default-avatar.svg",alt:d.username,class:"user-avatar",onClick:B=>V(d.username)},null,8,Ls),s("div",{class:"user-info",onClick:B=>V(d.username)},[s("div",Ps,"@"+o(d.username),1),d.display_name?(e(),t("div",Ts,o(d.display_name),1)):p("",!0),d.bio?(e(),t("div",Es,o(d.bio),1)):p("",!0)],8,Ss),g(d.user_id)?p("",!0):(e(),t("button",{key:0,onClick:B=>U(d),class:D(["btn-follow",{following:d.is_following}]),disabled:d.isLoading},o(d.isLoading?"...":d.is_following?"Following":"Follow"),11,Us))]))),128))]))])])])):p("",!0)]),_:1})]))}}),Bs=q(Vs,[["__scopeId","data-v-f82bcd45"]]),Is={class:"profile-view"},Ns={key:0,class:"loading-container"},Os={key:1,class:"error-container"},Ds={key:2,class:"profile-content"},Rs={class:"profile-header"},qs={class:"profile-header-content"},zs={class:"profile-avatar-section"},Hs=["src","alt"],Ws={class:"profile-info"},js={class:"profile-names"},As={class:"profile-username"},Gs={key:0,class:"profile-display-name"},Js={key:0,class:"profile-bio"},Qs={class:"profile-meta"},Ks={key:0,class:"meta-item"},Xs={class:"meta-item"},Ys={key:1,class:"social-links"},Zs=["href","title"],se={class:"profile-actions"},ee={class:"icon"},te={class:"profile-stats"},le={key:0,class:"stat-item"},ae={class:"stat-value"},oe={class:"stat-value"},ne={class:"stat-label"},ie={class:"stat-value"},de={class:"stat-label"},re={class:"stat-value"},ce={class:"stat-item"},ue={class:"stat-value"},ve={class:"stat-label"},pe={class:"content-tabs"},_e={class:"tabs-nav"},ke=["onClick"],me={class:"tab-icon"},fe={class:"tab-label"},we={key:0,class:"tab-content"},ye={key:0,class:"loading-posts"},ge={key:1,class:"empty-state"},he={key:2,class:"posts-grid"},be={class:"post-header"},$e=["src","alt"],Ce={class:"post-meta"},xe={class:"post-author"},Fe={class:"post-time"},Me={class:"post-content"},Le=["innerHTML"],Se={key:1},Pe={class:"post-actions"},Te={class:"action-btn"},Ee={class:"action-btn"},Ue={key:3,class:"load-more"},Ve={key:1,class:"tab-content"},Be={key:0,class:"loading-posts"},Ie={key:1,class:"empty-state"},Ne={key:2,class:"walls-grid"},Oe=["onClick"],De={class:"wall-info"},Re={class:"wall-title"},qe={key:0,class:"wall-description"},ze={class:"wall-stats"},He={key:2,class:"tab-content"},We={key:3,class:"tab-content"},je=R({__name:"ProfileView",props:{username:{}},setup(m){const E=m,u=j();cs();const F=A(),T=v(!0),M=v(!1),L=v(!1),$=v(null),i=v(null),k=v([]),f=v([]),w=v({wallsCount:0,followersCount:0,followingCount:0,postsCount:0}),y=v("posts"),g=v(!1),S=v(1),U=v(!0),V=[{id:"posts",icon:"📝",label:"Posts"},{id:"walls",icon:"🧱",label:"Walls"},{id:"media",icon:"🖼️",label:"Media"},{id:"likes",icon:"❤️",label:"Likes"}],C=N(()=>i.value&&F.user&&i.value.user_id===F.user.user_id),r=N(()=>{var l;return(l=i.value)!=null&&l.cover_image_url?{backgroundImage:`url(${i.value.cover_image_url})`}:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}}),c=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),d=async()=>{var l,a,_;try{T.value=!0,$.value=null;const h=E.username||((l=F.user)==null?void 0:l.username);if(!h)throw new Error("Username is required");const n=await b.get(`/users/${h}`);if(n.data.success&&n.data.data.user)i.value=n.data.data.user,C.value||await B(),await Promise.all([z(),G(),H()]);else throw new Error(n.data.message||"Profile not found")}catch(h){console.error("Error loading profile:",h),$.value=((_=(a=h.response)==null?void 0:a.data)==null?void 0:_.message)||h.message||"Failed to load profile"}finally{T.value=!1}},B=async()=>{try{const l=await b.get(`/users/${i.value.user_id}/follow-status`);l.data.success&&(g.value=l.data.data.is_following||!1)}catch(l){console.error("Error loading follow status:",l)}},z=async()=>{try{M.value=!0;const l=20,a=(S.value-1)*l,_=await b.get(`/users/${i.value.user_id}/posts?limit=${l}&offset=${a}`);_.data.success&&_.data.data.posts&&(S.value===1?k.value=_.data.data.posts:k.value=[...k.value,..._.data.data.posts],U.value=_.data.data.posts.length===l)}catch(l){console.error("Error loading posts:",l)}finally{M.value=!1}},G=async()=>{try{L.value=!0;const l=await b.get(`/users/${i.value.user_id}/walls`);l.data.success&&l.data.data.walls&&(f.value=l.data.data.walls)}catch(l){console.error("Error loading walls:",l)}finally{L.value=!1}},H=async()=>{w.value={wallsCount:f.value.length,followersCount:i.value.followers_count||0,followingCount:i.value.following_count||0,postsCount:k.value.length}},J=()=>{S.value++,z()},Q=async()=>{const l=g.value,a=w.value.followersCount;try{g.value=!l,w.value.followersCount+=g.value?1:-1,l?(await b.delete(`/users/${i.value.user_id}/follow`),toast.success("Unfollowed successfully")):(await b.post(`/users/${i.value.user_id}/follow`),toast.success("Following successfully"))}catch(_){g.value=l,w.value.followersCount=a,toast.error(_.message||"Failed to update follow status")}},K=()=>{u.push(`/messages?user=${i.value.username}`)},X=()=>{followersModalType.value="followers",showFollowersModal.value=!0},Y=()=>{followersModalType.value="following",showFollowersModal.value=!0},Z=()=>{H()};return rs(()=>{d()}),(l,a)=>{var _,h;return e(),t("div",Is,[T.value?(e(),t("div",Ns,[a[4]||(a[4]=s("div",{class:"spinner"},null,-1)),s("p",null,o(l.$t("common.labels.loading")),1)])):$.value?(e(),t("div",Os,[s("h2",null,o(l.$t("common.labels.error")),1),s("p",null,o($.value),1),s("button",{onClick:a[0]||(a[0]=n=>l.$router.push("/")),class:"btn-primary"},"Go Home")])):i.value?(e(),t("div",Ds,[s("div",{class:"profile-cover",style:W(r.value)},null,4),s("div",Rs,[s("div",qs,[s("div",zs,[s("img",{src:i.value.avatar_url||"/assets/images/default-avatar.svg",alt:i.value.username,class:"profile-avatar"},null,8,Hs)]),s("div",Ws,[s("div",js,[s("h1",As,"@"+o(i.value.username),1),i.value.display_name?(e(),t("p",Gs,o(i.value.display_name),1)):p("",!0)]),i.value.bio?(e(),t("p",Js,o(i.value.bio),1)):p("",!0),s("div",Qs,[i.value.location?(e(),t("span",Ks,[a[5]||(a[5]=s("span",{class:"icon"},"📍",-1)),s("span",null,o(i.value.location),1)])):p("",!0),s("span",Xs,[a[6]||(a[6]=s("span",{class:"icon"},"📅",-1)),s("span",null,"Joined "+o(c(i.value.created_at)),1)])]),i.value.social_links&&i.value.social_links.length>0?(e(),t("div",Ys,[(e(!0),t(x,null,P(i.value.social_links,n=>(e(),t("a",{key:n.link_id,href:n.url,target:"_blank",rel:"noopener noreferrer",class:"social-link",title:n.platform},[a[7]||(a[7]=s("span",{class:"icon"},"🔗",-1)),s("span",null,o(n.platform),1)],8,Zs))),128))])):p("",!0)]),s("div",se,[C.value?(e(),t("button",{key:0,onClick:a[1]||(a[1]=n=>l.$router.push("/settings")),class:"btn-secondary"},[...a[8]||(a[8]=[s("span",{class:"icon"},"⚙️",-1),s("span",null,"Edit Profile",-1)])])):(e(),t(x,{key:1},[s("button",{onClick:Q,class:D(["btn-primary",{following:g.value}])},[s("span",ee,o(g.value?"✓":"+"),1),s("span",null,o(g.value?l.$t("common.actions.unfollow"):l.$t("common.actions.follow")),1)],2),s("button",{onClick:K,class:"btn-secondary"},[...a[9]||(a[9]=[s("span",{class:"icon"},"💬",-1),s("span",null,"Message",-1)])])],64))])]),s("div",te,[C.value?(e(),t("div",le,[s("span",ae,"🧱 "+o(((_=i.value.bricks_balance)==null?void 0:_.toLocaleString())||0),1),a[10]||(a[10]=s("span",{class:"stat-label"},"Bricks",-1))])):p("",!0),s("div",{class:"stat-item",onClick:a[2]||(a[2]=n=>y.value="walls")},[s("span",oe,o(w.value.wallsCount||0),1),s("span",ne,o(l.$t("walls.stats.posts")),1)]),s("div",{class:"stat-item",onClick:X},[s("span",ie,o(w.value.followersCount||0),1),s("span",de,o(l.$t("walls.stats.followers")),1)]),s("div",{class:"stat-item",onClick:Y},[s("span",re,o(w.value.followingCount||0),1),a[11]||(a[11]=s("span",{class:"stat-label"},"Following",-1))]),s("div",ce,[s("span",ue,o(w.value.postsCount||0),1),s("span",ve,o(l.$t("walls.stats.posts")),1)])])]),s("div",pe,[s("div",_e,[(e(),t(x,null,P(V,n=>s("button",{key:n.id,class:D(["tab-button",{active:y.value===n.id}]),onClick:ss=>y.value=n.id},[s("span",me,o(n.icon),1),s("span",fe,o(n.label),1)],10,ke)),64))]),y.value==="posts"?(e(),t("div",we,[M.value?(e(),t("div",ye,[a[12]||(a[12]=s("div",{class:"spinner"},null,-1)),s("p",null,o(l.$t("common.labels.loading")),1)])):k.value.length===0?(e(),t("div",ge,[s("p",null,o(l.$t("common.labels.noResults")),1)])):(e(),t("div",he,[(e(!0),t(x,null,P(k.value,n=>(e(),t("div",{key:n.post_id,class:"post-card"},[s("div",be,[s("img",{src:n.author_avatar||"/assets/images/default-avatar.svg",alt:n.author_username,class:"post-avatar"},null,8,$e),s("div",Ce,[s("span",xe,"@"+o(n.author_username),1),s("span",Fe,o(c(n.created_at)),1)])]),s("div",Me,[n.content_html?(e(),t("div",{key:0,innerHTML:n.content_html},null,8,Le)):(e(),t("p",Se,o(n.content_text),1))]),s("div",Pe,[s("button",Te,[a[13]||(a[13]=s("span",{class:"icon"},"👍",-1)),s("span",null,o(n.reaction_count||0),1)]),s("button",Ee,[a[14]||(a[14]=s("span",{class:"icon"},"💬",-1)),s("span",null,o(n.comment_count||0),1)])])]))),128))])),U.value&&!M.value?(e(),t("div",Ue,[s("button",{onClick:J,class:"btn-secondary"},o(l.$t("common.buttons.loadMore")),1)])):p("",!0)])):p("",!0),y.value==="walls"?(e(),t("div",Ve,[L.value?(e(),t("div",Be,[a[15]||(a[15]=s("div",{class:"spinner"},null,-1)),s("p",null,o(l.$t("common.labels.loading")),1)])):f.value.length===0?(e(),t("div",Ie,[...a[16]||(a[16]=[s("p",null,"No walls yet",-1)])])):(e(),t("div",Ne,[(e(!0),t(x,null,P(f.value,n=>(e(),t("div",{key:n.wall_id,class:"wall-card",onClick:ss=>l.$router.push(`/wall/${n.wall_id}`)},[s("div",{class:"wall-banner",style:W({background:n.theme||"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"})},null,4),s("div",De,[s("h3",Re,o(n.display_name),1),n.description?(e(),t("p",qe,o(n.description),1)):p("",!0),s("div",ze,[s("span",null,o(n.post_count||0)+" posts",1),s("span",null,o(n.follower_count||0)+" followers",1)])])],8,Oe))),128))]))])):p("",!0),y.value==="media"?(e(),t("div",He,[...a[17]||(a[17]=[s("div",{class:"empty-state"},[s("p",null,"Media gallery coming soon")],-1)])])):p("",!0),y.value==="likes"?(e(),t("div",We,[...a[18]||(a[18]=[s("div",{class:"empty-state"},[s("p",null,"Liked posts coming soon")],-1)])])):p("",!0)])])):p("",!0),O(Bs,{"is-open":l.showFollowersModal,"user-id":((h=i.value)==null?void 0:h.user_id)||0,type:l.followersModalType,onClose:a[3]||(a[3]=n=>l.showFollowersModal=!1),onFollowChanged:Z},null,8,["is-open","user-id","type"])])}}}),Qe=q(je,[["__scopeId","data-v-bb2ddb66"]]);export{Qe as default};
//# sourceMappingURL=ProfileView-C7JpOPFV.js.map
