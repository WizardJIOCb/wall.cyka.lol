import{f as V,r as v,b as L,e as B,g as l,j as _,k as t,t as d,U as j,F as P,x as D,v as R,u as q,i as o}from"./vendor-B5QdKGWw.js";import{u as z,b,_ as A}from"./index-Bl7dfncJ.js";import"./utils-i9HKr1_Q.js";const G={class:"wall-view"},O={key:0,class:"loading-container"},U={key:1,class:"error-container"},J={key:2,class:"wall-content"},K={class:"wall-header"},Q={class:"wall-info"},X={class:"wall-avatar"},Y=["src","alt"],Z={class:"wall-details"},tt={class:"wall-title"},st={key:0,class:"wall-owner"},at={key:1,class:"wall-description"},et={class:"wall-stats"},lt={class:"stat"},ot={class:"stat-value"},nt={class:"stat"},it={class:"stat-value"},rt={class:"posts-section"},ut={key:0,class:"loading-posts"},dt={key:1,class:"empty-state"},ct={key:2,class:"posts-grid"},vt={class:"post-header"},_t=["src","alt"],mt={class:"post-meta"},pt={class:"post-author"},wt={class:"post-time"},ht={class:"post-content"},ft=["innerHTML"],gt={key:1},yt={key:0,class:"post-media"},bt=["src","alt"],kt={class:"post-actions"},Mt={class:"action-btn"},Ct={class:"action-btn"},$t={class:"action-btn"},Lt={key:3,class:"load-more"},k=20,Pt=V({__name:"WallView",props:{wallId:{}},setup(E){const F=E;q();const I=R(),M=z(),g=v(!0),f=v(!1),m=v(null),e=v(null),p=v([]),y=v(1),C=v(!0),S=L(()=>e.value&&M.user&&e.value.user_id===M.user.id),T=L(()=>{var r;return(r=e.value)!=null&&r.theme?{backgroundColor:e.value.theme}:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}}),W=r=>{const s=new Date(r),i=new Date().getTime()-s.getTime(),n=Math.floor(i/6e4),w=Math.floor(i/36e5),h=Math.floor(i/864e5);return n<1?"just now":n<60?`${n}m ago`:w<24?`${w}h ago`:h<7?`${h}d ago`:s.toLocaleDateString()},x=async()=>{var r,s,a,i,n,w,h;try{g.value=!0,m.value=null;let c=F.wallId||I.params.wallId;if(!c)throw new Error("No wall identifier provided");let u;if(c==="me"?u=await b.get("/walls/me"):u=await b.get(`/walls/${c}`),(r=u==null?void 0:u.data)!=null&&r.success&&((a=(s=u==null?void 0:u.data)==null?void 0:s.data)!=null&&a.wall))e.value=u.data.data.wall,await $();else throw new Error(((i=u==null?void 0:u.data)==null?void 0:i.message)||"Wall not found")}catch(c){console.error("Error loading wall:",c),((n=c.response)==null?void 0:n.status)===404?m.value="The requested wall could not be found. It may not exist or you may not have permission to view it.":m.value=((h=(w=c.response)==null?void 0:w.data)==null?void 0:h.message)||c.message||"Failed to load wall"}finally{g.value=!1}},$=async()=>{var r,s,a;if(e.value)try{f.value=!0;const i=(y.value-1)*k,n=await b.get(`/walls/${e.value.wall_id}/posts?limit=${k}&offset=${i}`);(r=n==null?void 0:n.data)!=null&&r.success&&((a=(s=n==null?void 0:n.data)==null?void 0:s.data)!=null&&a.posts)&&(y.value===1?p.value=n.data.data.posts:p.value=[...p.value,...n.data.data.posts],C.value=n.data.data.posts.length===k)}catch(i){console.error("Error loading posts:",i)}finally{f.value=!1}},H=()=>{y.value++,$()},N=()=>{console.log("Create post functionality coming soon")};return B(()=>{x()}),(r,s)=>(o(),l("div",G,[g.value?(o(),l("div",O,[...s[1]||(s[1]=[t("div",{class:"spinner"},null,-1),t("p",null,"Loading wall...",-1)])])):m.value?(o(),l("div",U,[s[2]||(s[2]=t("h2",null,"Error Loading Wall",-1)),t("p",null,d(m.value),1),t("button",{onClick:s[0]||(s[0]=a=>r.$router.push("/")),class:"btn-primary"},"Go Home")])):e.value?(o(),l("div",J,[t("div",K,[t("div",{class:"wall-banner",style:j(T.value)},null,4),t("div",Q,[t("div",X,[t("img",{src:e.value.owner_avatar||e.value.avatar_url||"/assets/images/default-avatar.svg",alt:e.value.owner_username||e.value.display_name},null,8,Y)]),t("div",Z,[t("h1",tt,d(e.value.display_name),1),e.value.owner_username?(o(),l("p",st,"by @"+d(e.value.owner_username),1)):_("",!0),e.value.description?(o(),l("p",at,d(e.value.description),1)):_("",!0)]),t("div",et,[t("div",lt,[t("span",ot,d(e.value.posts_count||0),1),s[3]||(s[3]=t("span",{class:"stat-label"},"Posts",-1))]),t("div",nt,[t("span",it,d(e.value.subscribers_count||0),1),s[4]||(s[4]=t("span",{class:"stat-label"},"Followers",-1))])])])]),t("div",rt,[s[10]||(s[10]=t("h2",{class:"section-title"},"Posts",-1)),f.value?(o(),l("div",ut,[...s[5]||(s[5]=[t("div",{class:"spinner"},null,-1),t("p",null,"Loading posts...",-1)])])):p.value.length===0?(o(),l("div",dt,[s[6]||(s[6]=t("p",null,"No posts yet on this wall.",-1)),S.value?(o(),l("button",{key:0,onClick:N,class:"btn-primary"},"Create First Post")):_("",!0)])):(o(),l("div",ct,[(o(!0),l(P,null,D(p.value,a=>(o(),l("div",{key:a.post_id,class:"post-card"},[t("div",vt,[t("img",{src:a.author_avatar||"/assets/images/default-avatar.svg",alt:a.author_username,class:"post-avatar"},null,8,_t),t("div",mt,[t("span",pt,"@"+d(a.author_username),1),t("span",wt,d(W(a.created_at)),1)])]),t("div",ht,[a.content_html?(o(),l("div",{key:0,innerHTML:a.content_html},null,8,ft)):(o(),l("p",gt,d(a.content_text),1))]),a.media_attachments&&a.media_attachments.length>0?(o(),l("div",yt,[(o(!0),l(P,null,D(a.media_attachments,i=>(o(),l("img",{key:i.attachment_id,src:i.file_url,alt:i.file_name},null,8,bt))),128))])):_("",!0),t("div",kt,[t("button",Mt,[s[7]||(s[7]=t("span",{class:"icon"},"👍",-1)),t("span",null,d(a.reaction_count||0),1)]),t("button",Ct,[s[8]||(s[8]=t("span",{class:"icon"},"💬",-1)),t("span",null,d(a.comment_count||0),1)]),t("button",$t,[s[9]||(s[9]=t("span",{class:"icon"},"👁",-1)),t("span",null,d(a.view_count||0),1)])])]))),128))])),C.value&&!f.value?(o(),l("div",Lt,[t("button",{onClick:H,class:"btn-secondary"},"Load More")])):_("",!0)])])):_("",!0)]))}}),It=A(Pt,[["__scopeId","data-v-b421d2b3"]]);export{It as default};
//# sourceMappingURL=WallView-l9B-IyJa.js.map
