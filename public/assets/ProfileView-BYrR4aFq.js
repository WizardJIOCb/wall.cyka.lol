import{f as R,g as t,E as V,k as s,i as e,r as v,b as D,w as es,B as ts,l as N,T as ls,m as os,C as as,j as p,t as a,s as ns,v as is,F as x,z as P,n as O,D as ds,p as j,e as rs,W as q,y as cs}from"./vendor-Bfvy7Eak.js";import{_ as W,u as A,c as h,g as us}from"./index-BwQ9Rjin.js";import"./utils-Cb2jxgch.js";const vs={class:"skeleton-loader"},ps={key:0,class:"skeleton-post"},_s={key:1,class:"skeleton-user"},ks={key:2,class:"skeleton-wall"},ms={key:3,class:"skeleton-comment"},fs={key:4,class:"skeleton-notification"},ws={key:5,class:"skeleton-default"},ys=R({__name:"SkeletonLoader",props:{type:{},count:{}},setup(m){return(E,u)=>(e(),t("div",vs,[m.type==="post"?(e(),t("div",ps,[...u[0]||(u[0]=[V('<div class="skeleton-header" data-v-15b15ce5><div class="skeleton-avatar" data-v-15b15ce5></div><div class="skeleton-text-group" data-v-15b15ce5><div class="skeleton-text skeleton-text-lg" data-v-15b15ce5></div><div class="skeleton-text skeleton-text-sm" data-v-15b15ce5></div></div></div><div class="skeleton-content" data-v-15b15ce5><div class="skeleton-text" data-v-15b15ce5></div><div class="skeleton-text" data-v-15b15ce5></div><div class="skeleton-text skeleton-text-md" data-v-15b15ce5></div></div><div class="skeleton-actions" data-v-15b15ce5><div class="skeleton-button" data-v-15b15ce5></div><div class="skeleton-button" data-v-15b15ce5></div><div class="skeleton-button" data-v-15b15ce5></div></div>',3)])])):m.type==="user"?(e(),t("div",_s,[...u[1]||(u[1]=[V('<div class="skeleton-avatar skeleton-avatar-lg" data-v-15b15ce5></div><div class="skeleton-text-group" data-v-15b15ce5><div class="skeleton-text skeleton-text-md" data-v-15b15ce5></div><div class="skeleton-text skeleton-text-sm" data-v-15b15ce5></div></div><div class="skeleton-button" data-v-15b15ce5></div>',3)])])):m.type==="wall"?(e(),t("div",ks,[...u[2]||(u[2]=[V('<div class="skeleton-banner" data-v-15b15ce5></div><div class="skeleton-wall-content" data-v-15b15ce5><div class="skeleton-text skeleton-text-lg" data-v-15b15ce5></div><div class="skeleton-text skeleton-text-sm" data-v-15b15ce5></div><div class="skeleton-stats" data-v-15b15ce5><div class="skeleton-text skeleton-text-xs" data-v-15b15ce5></div><div class="skeleton-text skeleton-text-xs" data-v-15b15ce5></div></div></div>',2)])])):m.type==="comment"?(e(),t("div",ms,[...u[3]||(u[3]=[V('<div class="skeleton-avatar skeleton-avatar-sm" data-v-15b15ce5></div><div class="skeleton-comment-content" data-v-15b15ce5><div class="skeleton-text skeleton-text-sm" data-v-15b15ce5></div><div class="skeleton-text" data-v-15b15ce5></div><div class="skeleton-text skeleton-text-md" data-v-15b15ce5></div></div>',2)])])):m.type==="notification"?(e(),t("div",fs,[...u[4]||(u[4]=[s("div",{class:"skeleton-icon"},null,-1),s("div",{class:"skeleton-notification-content"},[s("div",{class:"skeleton-text"}),s("div",{class:"skeleton-text skeleton-text-xs"})],-1)])])):(e(),t("div",ws,[...u[5]||(u[5]=[s("div",{class:"skeleton-text"},null,-1),s("div",{class:"skeleton-text skeleton-text-md"},null,-1),s("div",{class:"skeleton-text skeleton-text-lg"},null,-1)])]))]))}}),gs=W(ys,[["__scopeId","data-v-15b15ce5"]]),bs={class:"modal-header"},hs={class:"modal-search"},$s={class:"modal-body"},Cs={key:0,class:"loading-container"},xs={key:1,class:"error-container"},Fs={key:2,class:"empty-state"},Ms={key:3,class:"users-list"},Ls=["src","alt","onClick"],Ss=["onClick"],Ps={class:"user-username"},Ts={key:0,class:"user-display-name"},Es={key:1,class:"user-bio"},Bs=["onClick","disabled"],Is=R({__name:"FollowersModal",props:{isOpen:{type:Boolean},userId:{},type:{}},emits:["close","followChanged"],setup(m,{emit:E}){const u=m,F=E,T=j(),M=A(),L=us(),$=v([]),i=v(!1),k=v(null),f=v(""),w=D(()=>u.type==="followers"?"Followers":"Following"),y=D(()=>{if(!f.value)return $.value;const r=f.value.toLowerCase();return $.value.filter(c=>{var d;return c.username.toLowerCase().includes(r)||((d=c.display_name)==null?void 0:d.toLowerCase().includes(r))})}),g=r=>{var c;return((c=M.user)==null?void 0:c.user_id)===r},S=async()=>{i.value=!0,k.value=null;try{const r=u.type==="followers"?`/users/${u.userId}/followers`:`/users/${u.userId}/following`,c=await h.get(r);c.data.success&&($.value=(c.data.data.users||[]).map(d=>({...d,isLoading:!1})))}catch(r){k.value=r.message||"Failed to load users",L.error(k.value)}finally{i.value=!1}},B=async r=>{const c=r.is_following;r.isLoading=!0;try{r.is_following=!c,c?await h.delete(`/users/${r.user_id}/follow`):await h.post(`/users/${r.user_id}/follow`),F("followChanged")}catch(d){r.is_following=c,L.error(d.message||"Failed to update follow status")}finally{r.isLoading=!1}},I=r=>{T.push(`/profile/${r}`),C()},C=()=>{F("close")};return es(()=>u.isOpen,r=>{r&&(S(),f.value="")}),(r,c)=>(e(),ts(as,{to:"body"},[N(ls,{name:"modal-fade"},{default:os(()=>[m.isOpen?(e(),t("div",{key:0,class:"modal-overlay",onClick:C},[s("div",{class:"modal-content",onClick:c[1]||(c[1]=ds(()=>{},["stop"]))},[s("div",bs,[s("h3",null,a(w.value),1),s("button",{onClick:C,class:"btn-close"},"Ã—")]),s("div",hs,[ns(s("input",{"onUpdate:modelValue":c[0]||(c[0]=d=>f.value=d),type:"text",placeholder:"Search users...",class:"search-input"},null,512),[[is,f.value]])]),s("div",$s,[i.value?(e(),t("div",Cs,[(e(),t(x,null,P(3,d=>N(gs,{type:"user",key:d})),64))])):k.value?(e(),t("div",xs,[s("p",null,a(k.value),1),s("button",{onClick:S,class:"btn-retry"},"Retry")])):y.value.length===0?(e(),t("div",Fs,[...c[2]||(c[2]=[s("p",null,"No users found",-1)])])):(e(),t("div",Ms,[(e(!0),t(x,null,P(y.value,d=>(e(),t("div",{key:d.user_id,class:"user-item"},[s("img",{src:d.avatar_url||"/assets/images/default-avatar.svg",alt:d.username,class:"user-avatar",onClick:U=>I(d.username)},null,8,Ls),s("div",{class:"user-info",onClick:U=>I(d.username)},[s("div",Ps,"@"+a(d.username),1),d.display_name?(e(),t("div",Ts,a(d.display_name),1)):p("",!0),d.bio?(e(),t("div",Es,a(d.bio),1)):p("",!0)],8,Ss),g(d.user_id)?p("",!0):(e(),t("button",{key:0,onClick:U=>B(d),class:O(["btn-follow",{following:d.is_following}]),disabled:d.isLoading},a(d.isLoading?"...":d.is_following?"Following":"Follow"),11,Bs))]))),128))]))])])])):p("",!0)]),_:1})]))}}),Us=W(Is,[["__scopeId","data-v-6c0328cd"]]),Vs={class:"profile-view"},Ds={key:0,class:"loading-container"},Ns={key:1,class:"error-container"},Os={key:2,class:"profile-content"},Rs={class:"profile-header"},Ws={class:"profile-header-content"},zs={class:"profile-avatar-section"},Hs=["src","alt"],qs={class:"profile-info"},js={class:"profile-names"},As={class:"profile-username"},Gs={key:0,class:"profile-display-name"},Js={key:0,class:"profile-bio"},Qs={class:"profile-meta"},Ks={key:0,class:"meta-item"},Xs={class:"meta-item"},Ys={key:1,class:"social-links"},Zs=["href","title"],se={class:"profile-actions"},ee={class:"icon"},te={class:"profile-stats"},le={key:0,class:"stat-item"},oe={class:"stat-value"},ae={class:"stat-value"},ne={class:"stat-label"},ie={class:"stat-value"},de={class:"stat-label"},re={class:"stat-value"},ce={class:"stat-item"},ue={class:"stat-value"},ve={class:"stat-label"},pe={class:"content-tabs"},_e={class:"tabs-nav"},ke=["onClick"],me={class:"tab-icon"},fe={class:"tab-label"},we={key:0,class:"tab-content"},ye={key:0,class:"loading-posts"},ge={key:1,class:"empty-state"},be={key:2,class:"posts-grid"},he={class:"post-header"},$e=["src","alt"],Ce={class:"post-meta"},xe={class:"post-author"},Fe={class:"post-time"},Me={class:"post-content"},Le=["innerHTML"],Se={key:1},Pe={class:"post-actions"},Te={class:"action-btn"},Ee={class:"action-btn"},Be={key:3,class:"load-more"},Ie={key:1,class:"tab-content"},Ue={key:0,class:"loading-posts"},Ve={key:1,class:"empty-state"},De={key:2,class:"walls-grid"},Ne=["onClick"],Oe={class:"wall-info"},Re={class:"wall-title"},We={key:0,class:"wall-description"},ze={class:"wall-stats"},He={key:2,class:"tab-content"},qe={key:3,class:"tab-content"},je=R({__name:"ProfileView",props:{username:{}},setup(m){const E=m,u=j();cs();const F=A(),T=v(!0),M=v(!1),L=v(!1),$=v(null),i=v(null),k=v([]),f=v([]),w=v({wallsCount:0,followersCount:0,followingCount:0,postsCount:0}),y=v("posts"),g=v(!1),S=v(1),B=v(!0),I=[{id:"posts",icon:"ðŸ“",label:"Posts"},{id:"walls",icon:"ðŸ§±",label:"Walls"},{id:"media",icon:"ðŸ–¼ï¸",label:"Media"},{id:"likes",icon:"â¤ï¸",label:"Likes"}],C=D(()=>i.value&&F.user&&i.value.user_id===F.user.user_id),r=D(()=>{var l;return(l=i.value)!=null&&l.cover_image_url?{backgroundImage:`url(${i.value.cover_image_url})`}:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}}),c=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),d=async()=>{var l,o,_;try{T.value=!0,$.value=null;const b=E.username||((l=F.user)==null?void 0:l.username);if(!b)throw new Error("Username is required");const n=await h.get(`/users/${b}`);if(n.data.success&&n.data.data.user)i.value=n.data.data.user,C.value||await U(),await Promise.all([z(),G(),H()]);else throw new Error(n.data.message||"Profile not found")}catch(b){console.error("Error loading profile:",b),$.value=((_=(o=b.response)==null?void 0:o.data)==null?void 0:_.message)||b.message||"Failed to load profile"}finally{T.value=!1}},U=async()=>{try{const l=await h.get(`/users/${i.value.user_id}/follow-status`);l.data.success&&(g.value=l.data.data.is_following||!1)}catch(l){console.error("Error loading follow status:",l)}},z=async()=>{try{M.value=!0;const l=20,o=(S.value-1)*l,_=await h.get(`/users/${i.value.user_id}/posts?limit=${l}&offset=${o}`);_.data.success&&_.data.data.posts&&(S.value===1?k.value=_.data.data.posts:k.value=[...k.value,..._.data.data.posts],B.value=_.data.data.posts.length===l)}catch(l){console.error("Error loading posts:",l)}finally{M.value=!1}},G=async()=>{try{L.value=!0;const l=await h.get(`/users/${i.value.user_id}/walls`);l.data.success&&l.data.data.walls&&(f.value=l.data.data.walls)}catch(l){console.error("Error loading walls:",l)}finally{L.value=!1}},H=async()=>{w.value={wallsCount:f.value.length,followersCount:i.value.followers_count||0,followingCount:i.value.following_count||0,postsCount:k.value.length}},J=()=>{S.value++,z()},Q=async()=>{const l=g.value,o=w.value.followersCount;try{g.value=!l,w.value.followersCount+=g.value?1:-1,l?(await h.delete(`/users/${i.value.user_id}/follow`),toast.success("Unfollowed successfully")):(await h.post(`/users/${i.value.user_id}/follow`),toast.success("Following successfully"))}catch(_){g.value=l,w.value.followersCount=o,toast.error(_.message||"Failed to update follow status")}},K=()=>{u.push(`/messages?user=${i.value.username}`)},X=()=>{followersModalType.value="followers",showFollowersModal.value=!0},Y=()=>{followersModalType.value="following",showFollowersModal.value=!0},Z=()=>{H()};return rs(()=>{d()}),(l,o)=>{var _,b;return e(),t("div",Vs,[T.value?(e(),t("div",Ds,[o[4]||(o[4]=s("div",{class:"spinner"},null,-1)),s("p",null,a(l.$t("common.labels.loading")),1)])):$.value?(e(),t("div",Ns,[s("h2",null,a(l.$t("common.labels.error")),1),s("p",null,a($.value),1),s("button",{onClick:o[0]||(o[0]=n=>l.$router.push("/")),class:"btn-primary"},"Go Home")])):i.value?(e(),t("div",Os,[s("div",{class:"profile-cover",style:q(r.value)},null,4),s("div",Rs,[s("div",Ws,[s("div",zs,[s("img",{src:i.value.avatar_url||"/assets/images/default-avatar.svg",alt:i.value.username,class:"profile-avatar"},null,8,Hs)]),s("div",qs,[s("div",js,[s("h1",As,"@"+a(i.value.username),1),i.value.display_name?(e(),t("p",Gs,a(i.value.display_name),1)):p("",!0)]),i.value.bio?(e(),t("p",Js,a(i.value.bio),1)):p("",!0),s("div",Qs,[i.value.location?(e(),t("span",Ks,[o[5]||(o[5]=s("span",{class:"icon"},"ðŸ“",-1)),s("span",null,a(i.value.location),1)])):p("",!0),s("span",Xs,[o[6]||(o[6]=s("span",{class:"icon"},"ðŸ“…",-1)),s("span",null,"Joined "+a(c(i.value.created_at)),1)])]),i.value.social_links&&i.value.social_links.length>0?(e(),t("div",Ys,[(e(!0),t(x,null,P(i.value.social_links,n=>(e(),t("a",{key:n.link_id,href:n.url,target:"_blank",rel:"noopener noreferrer",class:"social-link",title:n.platform},[o[7]||(o[7]=s("span",{class:"icon"},"ðŸ”—",-1)),s("span",null,a(n.platform),1)],8,Zs))),128))])):p("",!0)]),s("div",se,[C.value?(e(),t("button",{key:0,onClick:o[1]||(o[1]=n=>l.$router.push("/settings")),class:"btn-secondary"},[...o[8]||(o[8]=[s("span",{class:"icon"},"âš™ï¸",-1),s("span",null,"Edit Profile",-1)])])):(e(),t(x,{key:1},[s("button",{onClick:Q,class:O(["btn-primary",{following:g.value}])},[s("span",ee,a(g.value?"âœ“":"+"),1),s("span",null,a(g.value?l.$t("common.actions.unfollow"):l.$t("common.actions.follow")),1)],2),s("button",{onClick:K,class:"btn-secondary"},[...o[9]||(o[9]=[s("span",{class:"icon"},"ðŸ’¬",-1),s("span",null,"Message",-1)])])],64))])]),s("div",te,[C.value?(e(),t("div",le,[s("span",oe,"ðŸ§± "+a(((_=i.value.bricks_balance)==null?void 0:_.toLocaleString())||0),1),o[10]||(o[10]=s("span",{class:"stat-label"},"Bricks",-1))])):p("",!0),s("div",{class:"stat-item",onClick:o[2]||(o[2]=n=>y.value="walls")},[s("span",ae,a(w.value.wallsCount||0),1),s("span",ne,a(l.$t("walls.stats.posts")),1)]),s("div",{class:"stat-item",onClick:X},[s("span",ie,a(w.value.followersCount||0),1),s("span",de,a(l.$t("walls.stats.followers")),1)]),s("div",{class:"stat-item",onClick:Y},[s("span",re,a(w.value.followingCount||0),1),o[11]||(o[11]=s("span",{class:"stat-label"},"Following",-1))]),s("div",ce,[s("span",ue,a(w.value.postsCount||0),1),s("span",ve,a(l.$t("walls.stats.posts")),1)])])]),s("div",pe,[s("div",_e,[(e(),t(x,null,P(I,n=>s("button",{key:n.id,class:O(["tab-button",{active:y.value===n.id}]),onClick:ss=>y.value=n.id},[s("span",me,a(n.icon),1),s("span",fe,a(n.label),1)],10,ke)),64))]),y.value==="posts"?(e(),t("div",we,[M.value?(e(),t("div",ye,[o[12]||(o[12]=s("div",{class:"spinner"},null,-1)),s("p",null,a(l.$t("common.labels.loading")),1)])):k.value.length===0?(e(),t("div",ge,[s("p",null,a(l.$t("common.labels.noResults")),1)])):(e(),t("div",be,[(e(!0),t(x,null,P(k.value,n=>(e(),t("div",{key:n.post_id,class:"post-card"},[s("div",he,[s("img",{src:n.author_avatar||"/assets/images/default-avatar.svg",alt:n.author_username,class:"post-avatar"},null,8,$e),s("div",Ce,[s("span",xe,"@"+a(n.author_username),1),s("span",Fe,a(c(n.created_at)),1)])]),s("div",Me,[n.content_html?(e(),t("div",{key:0,innerHTML:n.content_html},null,8,Le)):(e(),t("p",Se,a(n.content_text),1))]),s("div",Pe,[s("button",Te,[o[13]||(o[13]=s("span",{class:"icon"},"ðŸ‘",-1)),s("span",null,a(n.reaction_count||0),1)]),s("button",Ee,[o[14]||(o[14]=s("span",{class:"icon"},"ðŸ’¬",-1)),s("span",null,a(n.comment_count||0),1)])])]))),128))])),B.value&&!M.value?(e(),t("div",Be,[s("button",{onClick:J,class:"btn-secondary"},a(l.$t("common.buttons.loadMore")),1)])):p("",!0)])):p("",!0),y.value==="walls"?(e(),t("div",Ie,[L.value?(e(),t("div",Ue,[o[15]||(o[15]=s("div",{class:"spinner"},null,-1)),s("p",null,a(l.$t("common.labels.loading")),1)])):f.value.length===0?(e(),t("div",Ve,[...o[16]||(o[16]=[s("p",null,"No walls yet",-1)])])):(e(),t("div",De,[(e(!0),t(x,null,P(f.value,n=>(e(),t("div",{key:n.wall_id,class:"wall-card",onClick:ss=>l.$router.push(`/wall/${n.wall_id}`)},[s("div",{class:"wall-banner",style:q({background:n.theme||"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"})},null,4),s("div",Oe,[s("h3",Re,a(n.display_name),1),n.description?(e(),t("p",We,a(n.description),1)):p("",!0),s("div",ze,[s("span",null,a(n.post_count||0)+" posts",1),s("span",null,a(n.follower_count||0)+" followers",1)])])],8,Ne))),128))]))])):p("",!0),y.value==="media"?(e(),t("div",He,[...o[17]||(o[17]=[s("div",{class:"empty-state"},[s("p",null,"Media gallery coming soon")],-1)])])):p("",!0),y.value==="likes"?(e(),t("div",qe,[...o[18]||(o[18]=[s("div",{class:"empty-state"},[s("p",null,"Liked posts coming soon")],-1)])])):p("",!0)])])):p("",!0),N(Us,{"is-open":l.showFollowersModal,"user-id":((b=i.value)==null?void 0:b.user_id)||0,type:l.followersModalType,onClose:o[3]||(o[3]=n=>l.showFollowersModal=!1),onFollowChanged:Z},null,8,["is-open","user-id","type"])])}}}),Qe=W(je,[["__scopeId","data-v-1098b155"]]);export{Qe as default};
//# sourceMappingURL=ProfileView-BYrR4aFq.js.map
