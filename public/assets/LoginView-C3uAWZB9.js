import{b as v,e as F,r as I,f as c,n as A,h as $,k as r,M as B,v as U,t as n,N as L,O as T,o as g,P as k,Q as C,l as f,R as M,m as N,S as D}from"./vendor-Cy2yCxOA.js";import{u as G,g as W,_ as z,M as _,U as Z,A as R,a as j}from"./index-CHJcSM3j.js";import"./utils-i9HKr1_Q.js";const H=()=>{const s=G(),h=v(()=>s.user),i=v(()=>s.isAuthenticated),d=v(()=>!s.initialized);return{user:h,isAuthenticated:i,isLoading:d,login:async a=>s.login(a),register:async a=>s.register(a),logout:async()=>s.logout(),updateProfile:a=>s.updateUser(a)}},Q=["for"],Y={key:0,class:"required"},J={class:"input-container"},K=["id","type","placeholder","disabled","required","autocomplete"],X={key:1,class:"input-error"},x={key:2,class:"input-help"},ee=F({__name:"AppInput",props:{modelValue:{},type:{default:"text"},label:{},placeholder:{},error:{},help:{},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},autocomplete:{}},emits:["update:modelValue","blur","focus"],setup(s,{emit:h}){const i=s,d=h,m=W(),u=I(!1),p=v({get:()=>i.modelValue,set:w=>d("update:modelValue",w)}),o=v(()=>["input",{"input-error":i.error,"input-focused":u.value,"input-disabled":i.disabled}]),a=w=>{const y=w.target;d("update:modelValue",y.value)},V=()=>{u.value=!1,d("blur")},S=()=>{u.value=!0,d("focus")};return(w,y)=>(g(),c("div",{class:A(["input-wrapper",{"has-error":s.error}])},[s.label?(g(),c("label",{key:0,for:B(m),class:"input-label"},[U(n(s.label)+" ",1),s.required?(g(),c("span",Y,"*")):$("",!0)],8,Q)):$("",!0),r("div",J,[L(r("input",{id:B(m),"onUpdate:modelValue":y[0]||(y[0]=q=>p.value=q),type:s.type,placeholder:s.placeholder,disabled:s.disabled,required:s.required,autocomplete:s.autocomplete,class:A(o.value),onInput:a,onBlur:V,onFocus:S},null,42,K),[[T,p.value]])]),s.error?(g(),c("p",X,n(s.error),1)):s.help?(g(),c("p",x,n(s.help),1)):$("",!0)],2))}}),b=z(ee,[["__scopeId","data-v-6944d8b7"]]),te=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),se=s=>Z.test(s),E=s=>{const h=s.length>=_;let i=0;return s.length>=8&&i++,s.length>=12&&i++,/[a-z]/.test(s)&&i++,/[A-Z]/.test(s)&&i++,/[0-9]/.test(s)&&i++,/[^a-zA-Z0-9]/.test(s)&&i++,{valid:h,strength:Math.min(i,5)}},re={class:"auth-form-container"},ae={class:"auth-tabs"},oe={class:"form-title"},le={class:"form-checkbox"},ne={for:"remember-me"},ie={class:"form-footer"},ue={href:"#/forgot-password",class:"link-secondary"},de={class:"form-title"},me={key:0,class:"password-strength"},pe={class:"strength-bar"},ce=["data-strength"],ge={class:"strength-text"},fe={class:"form-checkbox"},he={for:"terms-accept"},be={href:"/terms",target:"_blank"},ve={key:0,class:"form-error"},we={class:"oauth-section"},ye={class:"oauth-buttons"},Ve=F({__name:"LoginView",setup(s){const{login:h,register:i}=H(),d=I("login"),m=I(!1),u=k({identifier:"",password:"",remember:!1}),p=k({identifier:"",password:""}),o=k({username:"",email:"",password:"",password_confirm:"",display_name:"",terms:!1}),a=k({username:"",email:"",password:"",password_confirm:"",display_name:"",terms:""}),V=v(()=>E(o.password).strength),S=v(()=>{const t=V.value;return t===0?"Very Weak":t===1?"Weak":t===2?"Fair":t===3?"Good":t>=4?"Strong":""}),w=()=>(p.identifier="",p.password="",u.identifier?u.password?!0:(p.password="Password is required",!1):(p.identifier="Username or email is required",!1)),y=()=>(a.username="",a.email="",a.password="",a.password_confirm="",a.terms="",!o.username||!se(o.username)?(a.username="Invalid username format",!1):!o.email||!te(o.email)?(a.email="Invalid email address",!1):E(o.password).valid?o.password!==o.password_confirm?(a.password_confirm="Passwords do not match",!1):o.terms?!0:(a.terms="You must agree to the terms",!1):(a.password="Password must be at least 8 characters",!1)),q=async()=>{if(w()){m.value=!0;try{await h(u)}catch(t){p.password=t.message||"Login failed"}finally{m.value=!1}}},O=async()=>{if(y()){m.value=!0;try{await i(o)}catch(t){t.errors?Object.assign(a,t.errors):a.username=t.message||"Registration failed"}finally{m.value=!1}}},P=t=>{const e=j.getOAuthURL(t);window.location.href=e};return(t,e)=>(g(),c("div",re,[r("div",ae,[r("button",{class:A(["auth-tab",{active:d.value==="login"}]),onClick:e[0]||(e[0]=l=>d.value="login")},n(t.$t("auth.login.loginButton")),3),r("button",{class:A(["auth-tab",{active:d.value==="register"}]),onClick:e[1]||(e[1]=l=>d.value="register")},n(t.$t("common.actions.register")),3)]),d.value==="login"?(g(),c("form",{key:0,class:"auth-form",onSubmit:C(q,["prevent"])},[r("h2",oe,n(t.$t("auth.login.subtitle")),1),f(b,{modelValue:u.identifier,"onUpdate:modelValue":e[2]||(e[2]=l=>u.identifier=l),label:t.$t("auth.login.username"),type:"text",autocomplete:"username",required:"",error:p.identifier},null,8,["modelValue","label","error"]),f(b,{modelValue:u.password,"onUpdate:modelValue":e[3]||(e[3]=l=>u.password=l),label:t.$t("auth.login.password"),type:"password",autocomplete:"current-password",required:"",error:p.password},null,8,["modelValue","label","error"]),r("div",le,[L(r("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>u.remember=l),type:"checkbox",id:"remember-me"},null,512),[[M,u.remember]]),r("label",ne,n(t.$t("auth.login.rememberMe")),1)]),f(R,{type:"submit",variant:"primary",size:"lg",block:"",loading:m.value},{default:N(()=>[U(n(m.value?t.$t("auth.login.loggingIn"):t.$t("auth.login.loginButton")),1)]),_:1},8,["loading"]),r("div",ie,[r("a",ue,n(t.$t("auth.login.forgotPassword")),1)])],32)):(g(),c("form",{key:1,class:"auth-form",onSubmit:C(O,["prevent"])},[r("h2",de,n(t.$t("auth.register.title")),1),f(b,{modelValue:o.username,"onUpdate:modelValue":e[5]||(e[5]=l=>o.username=l),label:t.$t("auth.register.username"),type:"text",autocomplete:"username",required:"",error:a.username,help:"3-50 characters, letters, numbers, underscore only"},null,8,["modelValue","label","error"]),f(b,{modelValue:o.email,"onUpdate:modelValue":e[6]||(e[6]=l=>o.email=l),label:t.$t("auth.register.email"),type:"email",autocomplete:"email",required:"",error:a.email},null,8,["modelValue","label","error"]),f(b,{modelValue:o.password,"onUpdate:modelValue":e[7]||(e[7]=l=>o.password=l),label:t.$t("auth.register.password"),type:"password",autocomplete:"new-password",required:"",error:a.password,help:"Minimum 8 characters"},null,8,["modelValue","label","error"]),o.password?(g(),c("div",me,[r("div",pe,[r("div",{class:"strength-fill",style:D({width:`${V.value*20}%`}),"data-strength":V.value},null,12,ce)]),r("span",ge,n(S.value),1)])):$("",!0),f(b,{modelValue:o.password_confirm,"onUpdate:modelValue":e[8]||(e[8]=l=>o.password_confirm=l),label:t.$t("auth.register.confirmPassword"),type:"password",autocomplete:"new-password",required:"",error:a.password_confirm},null,8,["modelValue","label","error"]),f(b,{modelValue:o.display_name,"onUpdate:modelValue":e[9]||(e[9]=l=>o.display_name=l),label:"Display Name (Optional)",type:"text",autocomplete:"name",error:a.display_name},null,8,["modelValue","error"]),r("div",fe,[L(r("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>o.terms=l),type:"checkbox",id:"terms-accept",required:""},null,512),[[M,o.terms]]),r("label",he,[U(n(t.$t("auth.register.terms"))+" ",1),r("a",be,n(t.$t("auth.register.termsLink")),1)]),a.terms?(g(),c("span",ve,n(a.terms),1)):$("",!0)]),f(R,{type:"submit",variant:"primary",size:"lg",block:"",loading:m.value},{default:N(()=>[U(n(m.value?t.$t("auth.register.registering"):t.$t("auth.register.registerButton")),1)]),_:1},8,["loading"])],32)),r("div",we,[e[17]||(e[17]=r("div",{class:"divider"},[r("span",null,"Or continue with")],-1)),r("div",ye,[r("button",{class:"btn-oauth btn-google",type:"button",onClick:e[11]||(e[11]=l=>P("google"))},[e[14]||(e[14]=r("span",{class:"icon"},"G",-1)),r("span",null,n(t.$t("auth.oauth.googleLogin").replace("Sign in with ","")),1)]),r("button",{class:"btn-oauth btn-yandex",type:"button",onClick:e[12]||(e[12]=l=>P("yandex"))},[e[15]||(e[15]=r("span",{class:"icon"},"Я",-1)),r("span",null,n(t.$t("auth.oauth.yandexLogin").replace("Sign in with ","").replace("Войти через ","")),1)]),r("button",{class:"btn-oauth btn-telegram",type:"button",onClick:e[13]||(e[13]=l=>P("telegram"))},[e[16]||(e[16]=r("span",{class:"icon"},"✈️",-1)),r("span",null,n(t.$t("auth.oauth.telegramLogin").replace("Sign in with ","").replace("Войти через ","")),1)])])])]))}}),Ae=z(Ve,[["__scopeId","data-v-b6af7f9d"]]);export{Ae as default};
//# sourceMappingURL=LoginView-C3uAWZB9.js.map
