import{c as r,_ as U}from"./index-Dngprrna.js";import{r as b,b as O,f as j,g as v,k as i,l as V,W as A,n as T,u as p,j as F,t as h,T as x,m as z,F as B,z as N,D as H,s as W,i as d,Z as J}from"./vendor-Bfvy7Eak.js";const ce={async getFeed(e){return r.get("/posts/feed",e)},async getWallPosts(e,s){return r.get(`/walls/${e}/posts`,s)},async getPost(e){return r.get(`/posts/${e}`)},async createPost(e){const s=new FormData;return s.append("wall_id",e.wall_id.toString()),s.append("content",e.content),e.post_type&&s.append("post_type",e.post_type),e.visibility&&s.append("visibility",e.visibility),e.ai_application_id&&s.append("ai_application_id",e.ai_application_id.toString()),e.media_files&&e.media_files.forEach((y,a)=>{s.append(`media_files[${a}]`,y)}),r.upload("/posts",s)},async updatePost(e,s){return r.patch(`/posts/${e}`,s)},async deletePost(e){return r.delete(`/posts/${e}`)},async reactToPost(e,s){return r.post(`/posts/${e}/reactions`,{reaction_type:s})},async removeReaction(e){return r.delete(`/posts/${e}/reactions`)},async sharePost(e,s,y){return r.post(`/posts/${e}/share`,{wall_id:s,content:y})},async incrementViewCount(e){return r.post(`/posts/${e}/view`)},async batchIncrementViewCounts(e){return r.post("/posts/batch-view",{post_ids:e})},async incrementOpenCount(e){return r.post(`/posts/${e}/open`)}};function L(e,s){const y=b([]),a=b({total:0,by_type:{}}),o=b(null),k=b(!1),w=b(null),R=()=>typeof e=="string"?e:e.value,$=()=>typeof s=="number"?s:s.value,P={like:"ðŸ‘",love:"â¤ï¸",haha:"ðŸ˜‚",wow:"ðŸ˜®",sad:"ðŸ˜¢",angry:"ðŸ˜ "},_={like:"#3b82f6",love:"#ef4444",haha:"#eab308",wow:"#f97316",sad:"#64748b",angry:"#dc2626"},C=async()=>{try{k.value=!0,w.value=null;const t=await r.get(`/reactions/${R()}/${$()}`);if(t.data.success){y.value=t.data.data.reactions||[],a.value=t.data.data.stats||{total:0,by_type:{}};const m=y.value.find(c=>c.user_id===D());o.value=m?m.reaction_type:null}}catch(t){w.value=t.message||"Failed to load reactions",console.error("Error loading reactions:",t)}finally{k.value=!1}},f=async t=>{const m=o.value,c=a.value.total,n={...a.value.by_type};try{o.value=t,a.value.total++,a.value.by_type[t]=(a.value.by_type[t]||0)+1,await r.post("/reactions",{reactable_type:R(),reactable_id:$(),reaction_type:t}),await C()}catch(l){throw o.value=m,a.value.total=c,a.value.by_type=n,w.value=l.message||"Failed to add reaction",l}},u=async()=>{const t=o.value,m=a.value.total,c={...a.value.by_type};if(t)try{o.value=null,a.value.total--,a.value.by_type[t]&&a.value.by_type[t]--,await r.delete(`/reactions/${R()}/${$()}`),await C()}catch(n){throw o.value=t,a.value.total=m,a.value.by_type=c,w.value=n.message||"Failed to remove reaction",n}},S=async t=>{o.value===t?await u():o.value?(await u(),await f(t)):await f(t)},D=()=>{const t=localStorage.getItem("user");return t?JSON.parse(t).user_id:0},I=O(()=>o.value?P[o.value]:"ðŸ¤"),M=O(()=>o.value?_[o.value]:"#94a3b8");return{reactions:y,stats:a,currentUserReaction:o,loading:k,error:w,reactionIcons:P,reactionColors:_,displayIcon:I,displayColor:M,loadReactions:C,addReaction:f,removeReaction:u,toggleReaction:S}}const Z={class:"reaction-picker-container"},q={class:"reaction-icon"},G={key:0,class:"reaction-count"},K=["onClick","title"],Q={class:"modal-header"},X={class:"modal-body"},Y={class:"reaction-tabs"},ee=["onClick"],te={class:"reaction-users-list"},ae=["src","alt"],se={class:"username"},oe={class:"reaction-emoji"},ne={key:0,class:"empty-state"},le=j({__name:"ReactionPicker",props:{reactableType:{},reactableId:{}},setup(e){const s=e,{reactions:y,stats:a,currentUserReaction:o,reactionIcons:k,displayIcon:w,displayColor:R,loadReactions:$,toggleReaction:P}=L(b(s.reactableType),b(s.reactableId)),_=b(!1),C=b(!1),f=b("all");let u=null;const S=c=>{c.stopPropagation(),_.value=!_.value},D=()=>{u=setTimeout(()=>{_.value=!0},300)},I=()=>{u&&(clearTimeout(u),u=null),setTimeout(()=>{_.value&&(_.value=!1)},200)},M=()=>{u&&(clearTimeout(u),u=null)},t=async c=>{_.value=!1;try{await P(c)}catch(n){console.error("Failed to toggle reaction:",n)}},m=O(()=>f.value==="all"?y.value:y.value.filter(c=>c.reaction_type===f.value));return $(),(c,n)=>(d(),v("div",Z,[i("button",{onClick:S,onMouseenter:D,onMouseleave:I,class:T(["reaction-button",{active:p(o)}]),style:A({color:p(R)})},[i("span",q,h(p(w)),1),p(a).total>0?(d(),v("span",G,h(p(a).total),1)):F("",!0)],38),V(x,{name:"picker-fade"},{default:z(()=>[_.value?(d(),v("div",{key:0,class:"reaction-picker",onMouseenter:M,onMouseleave:I},[(d(!0),v(B,null,N(p(k),(l,g)=>(d(),v("button",{key:g,onClick:E=>t(g),class:T(["reaction-option",{selected:p(o)===g}]),title:g},h(l),11,K))),128))],32)):F("",!0)]),_:1}),V(x,{name:"modal-fade"},{default:z(()=>[C.value?(d(),v("div",{key:0,class:"modal-overlay",onClick:n[3]||(n[3]=l=>C.value=!1)},[i("div",{class:"modal-content",onClick:n[2]||(n[2]=H(()=>{},["stop"]))},[i("div",Q,[n[4]||(n[4]=i("h3",null,"Reactions",-1)),i("button",{onClick:n[0]||(n[0]=l=>C.value=!1),class:"btn-close"},"Ã—")]),i("div",X,[i("div",Y,[i("button",{onClick:n[1]||(n[1]=l=>f.value="all"),class:T(["tab-button",{active:f.value==="all"}])}," All "+h(p(a).total),3),(d(!0),v(B,null,N(p(a).by_type,(l,g)=>W((d(),v("button",{key:g,onClick:E=>f.value=g,class:T(["tab-button",{active:f.value===g}])},h(p(k)[g])+" "+h(l),11,ee)),[[J,l>0]])),128))]),i("div",te,[(d(!0),v(B,null,N(m.value,l=>(d(),v("div",{key:l.reaction_id,class:"reaction-user-item"},[i("img",{src:l.avatar_url||"/assets/images/default-avatar.svg",alt:l.username,class:"user-avatar"},null,8,ae),i("span",se,h(l.username),1),i("span",oe,h(p(k)[l.reaction_type]),1)]))),128)),m.value.length===0?(d(),v("div",ne," No reactions yet ")):F("",!0)])])])])):F("",!0)]),_:1})]))}}),ue=U(le,[["__scopeId","data-v-a24b23af"]]);export{ue as R,ce as p};
//# sourceMappingURL=ReactionPicker-DE7VVgVc.js.map
import{c as r,_ as U}from"./index-Dngprrna.js";import{r as b,b as O,f as j,g as v,k as i,l as V,W as A,n as T,u as p,j as F,t as h,T as x,m as z,F as B,z as N,D as H,s as W,i as d,Z as J}from"./vendor-Bfvy7Eak.js";const ce={async getFeed(e){return r.get("/posts/feed",e)},async getWallPosts(e,s){return r.get(`/walls/${e}/posts`,s)},async getPost(e){return r.get(`/posts/${e}`)},async createPost(e){const s=new FormData;return s.append("wall_id",e.wall_id.toString()),s.append("content",e.content),e.post_type&&s.append("post_type",e.post_type),e.visibility&&s.append("visibility",e.visibility),e.ai_application_id&&s.append("ai_application_id",e.ai_application_id.toString()),e.media_files&&e.media_files.forEach((y,a)=>{s.append(`media_files[${a}]`,y)}),r.upload("/posts",s)},async updatePost(e,s){return r.patch(`/posts/${e}`,s)},async deletePost(e){return r.delete(`/posts/${e}`)},async reactToPost(e,s){return r.post(`/posts/${e}/reactions`,{reaction_type:s})},async removeReaction(e){return r.delete(`/posts/${e}/reactions`)},async sharePost(e,s,y){return r.post(`/posts/${e}/share`,{wall_id:s,content:y})},async incrementViewCount(e){return r.post(`/posts/${e}/view`)},async batchIncrementViewCounts(e){return r.post("/posts/batch-view",{post_ids:e})},async incrementOpenCount(e){return r.post(`/posts/${e}/open`)}};function L(e,s){const y=b([]),a=b({total:0,by_type:{}}),o=b(null),k=b(!1),w=b(null),R=()=>typeof e=="string"?e:e.value,$=()=>typeof s=="number"?s:s.value,P={like:"ðŸ‘",love:"â¤ï¸",haha:"ðŸ˜‚",wow:"ðŸ˜®",sad:"ðŸ˜¢",angry:"ðŸ˜ "},_={like:"#3b82f6",love:"#ef4444",haha:"#eab308",wow:"#f97316",sad:"#64748b",angry:"#dc2626"},C=async()=>{try{k.value=!0,w.value=null;const t=await r.get(`/reactions/${R()}/${$()}`);if(t.data.success){y.value=t.data.data.reactions||[],a.value=t.data.data.stats||{total:0,by_type:{}};const m=y.value.find(c=>c.user_id===D());o.value=m?m.reaction_type:null}}catch(t){w.value=t.message||"Failed to load reactions",console.error("Error loading reactions:",t)}finally{k.value=!1}},f=async t=>{const m=o.value,c=a.value.total,n={...a.value.by_type};try{o.value=t,a.value.total++,a.value.by_type[t]=(a.value.by_type[t]||0)+1,await r.post("/reactions",{reactable_type:R(),reactable_id:$(),reaction_type:t}),await C()}catch(l){throw o.value=m,a.value.total=c,a.value.by_type=n,w.value=l.message||"Failed to add reaction",l}},u=async()=>{const t=o.value,m=a.value.total,c={...a.value.by_type};if(t)try{o.value=null,a.value.total--,a.value.by_type[t]&&a.value.by_type[t]--,await r.delete(`/reactions/${R()}/${$()}`),await C()}catch(n){throw o.value=t,a.value.total=m,a.value.by_type=c,w.value=n.message||"Failed to remove reaction",n}},S=async t=>{o.value===t?await u():o.value?(await u(),await f(t)):await f(t)},D=()=>{const t=localStorage.getItem("user");return t?JSON.parse(t).user_id:0},I=O(()=>o.value?P[o.value]:"ðŸ¤"),M=O(()=>o.value?_[o.value]:"#94a3b8");return{reactions:y,stats:a,currentUserReaction:o,loading:k,error:w,reactionIcons:P,reactionColors:_,displayIcon:I,displayColor:M,loadReactions:C,addReaction:f,removeReaction:u,toggleReaction:S}}const Z={class:"reaction-picker-container"},q={class:"reaction-icon"},G={key:0,class:"reaction-count"},K=["onClick","title"],Q={class:"modal-header"},X={class:"modal-body"},Y={class:"reaction-tabs"},ee=["onClick"],te={class:"reaction-users-list"},ae=["src","alt"],se={class:"username"},oe={class:"reaction-emoji"},ne={key:0,class:"empty-state"},le=j({__name:"ReactionPicker",props:{reactableType:{},reactableId:{}},setup(e){const s=e,{reactions:y,stats:a,currentUserReaction:o,reactionIcons:k,displayIcon:w,displayColor:R,loadReactions:$,toggleReaction:P}=L(b(s.reactableType),b(s.reactableId)),_=b(!1),C=b(!1),f=b("all");let u=null;const S=c=>{c.stopPropagation(),_.value=!_.value},D=()=>{u=setTimeout(()=>{_.value=!0},300)},I=()=>{u&&(clearTimeout(u),u=null),setTimeout(()=>{_.value&&(_.value=!1)},200)},M=()=>{u&&(clearTimeout(u),u=null)},t=async c=>{_.value=!1;try{await P(c)}catch(n){console.error("Failed to toggle reaction:",n)}},m=O(()=>f.value==="all"?y.value:y.value.filter(c=>c.reaction_type===f.value));return $(),(c,n)=>(d(),v("div",Z,[i("button",{onClick:S,onMouseenter:D,onMouseleave:I,class:T(["reaction-button",{active:p(o)}]),style:A({color:p(R)})},[i("span",q,h(p(w)),1),p(a).total>0?(d(),v("span",G,h(p(a).total),1)):F("",!0)],38),V(x,{name:"picker-fade"},{default:z(()=>[_.value?(d(),v("div",{key:0,class:"reaction-picker",onMouseenter:M,onMouseleave:I},[(d(!0),v(B,null,N(p(k),(l,g)=>(d(),v("button",{key:g,onClick:E=>t(g),class:T(["reaction-option",{selected:p(o)===g}]),title:g},h(l),11,K))),128))],32)):F("",!0)]),_:1}),V(x,{name:"modal-fade"},{default:z(()=>[C.value?(d(),v("div",{key:0,class:"modal-overlay",onClick:n[3]||(n[3]=l=>C.value=!1)},[i("div",{class:"modal-content",onClick:n[2]||(n[2]=H(()=>{},["stop"]))},[i("div",Q,[n[4]||(n[4]=i("h3",null,"Reactions",-1)),i("button",{onClick:n[0]||(n[0]=l=>C.value=!1),class:"btn-close"},"Ã—")]),i("div",X,[i("div",Y,[i("button",{onClick:n[1]||(n[1]=l=>f.value="all"),class:T(["tab-button",{active:f.value==="all"}])}," All "+h(p(a).total),3),(d(!0),v(B,null,N(p(a).by_type,(l,g)=>W((d(),v("button",{key:g,onClick:E=>f.value=g,class:T(["tab-button",{active:f.value===g}])},h(p(k)[g])+" "+h(l),11,ee)),[[J,l>0]])),128))]),i("div",te,[(d(!0),v(B,null,N(m.value,l=>(d(),v("div",{key:l.reaction_id,class:"reaction-user-item"},[i("img",{src:l.avatar_url||"/assets/images/default-avatar.svg",alt:l.username,class:"user-avatar"},null,8,ae),i("span",se,h(l.username),1),i("span",oe,h(p(k)[l.reaction_type]),1)]))),128)),m.value.length===0?(d(),v("div",ne," No reactions yet ")):F("",!0)])])])])):F("",!0)]),_:1})]))}}),ue=U(le,[["__scopeId","data-v-a24b23af"]]);export{ue as R,ce as p};
//# sourceMappingURL=ReactionPicker-DE7VVgVc.js.map
import{c as r,_ as U}from"./index-Dngprrna.js";import{r as b,b as O,f as j,g as v,k as i,l as V,W as A,n as T,u as p,j as F,t as h,T as x,m as z,F as B,z as N,D as H,s as W,i as d,Z as J}from"./vendor-Bfvy7Eak.js";const ce={async getFeed(e){return r.get("/posts/feed",e)},async getWallPosts(e,s){return r.get(`/walls/${e}/posts`,s)},async getPost(e){return r.get(`/posts/${e}`)},async createPost(e){const s=new FormData;return s.append("wall_id",e.wall_id.toString()),s.append("content",e.content),e.post_type&&s.append("post_type",e.post_type),e.visibility&&s.append("visibility",e.visibility),e.ai_application_id&&s.append("ai_application_id",e.ai_application_id.toString()),e.media_files&&e.media_files.forEach((y,a)=>{s.append(`media_files[${a}]`,y)}),r.upload("/posts",s)},async updatePost(e,s){return r.patch(`/posts/${e}`,s)},async deletePost(e){return r.delete(`/posts/${e}`)},async reactToPost(e,s){return r.post(`/posts/${e}/reactions`,{reaction_type:s})},async removeReaction(e){return r.delete(`/posts/${e}/reactions`)},async sharePost(e,s,y){return r.post(`/posts/${e}/share`,{wall_id:s,content:y})},async incrementViewCount(e){return r.post(`/posts/${e}/view`)},async batchIncrementViewCounts(e){return r.post("/posts/batch-view",{post_ids:e})},async incrementOpenCount(e){return r.post(`/posts/${e}/open`)}};function L(e,s){const y=b([]),a=b({total:0,by_type:{}}),o=b(null),k=b(!1),w=b(null),R=()=>typeof e=="string"?e:e.value,$=()=>typeof s=="number"?s:s.value,P={like:"ðŸ‘",love:"â¤ï¸",haha:"ðŸ˜‚",wow:"ðŸ˜®",sad:"ðŸ˜¢",angry:"ðŸ˜ "},_={like:"#3b82f6",love:"#ef4444",haha:"#eab308",wow:"#f97316",sad:"#64748b",angry:"#dc2626"},C=async()=>{try{k.value=!0,w.value=null;const t=await r.get(`/reactions/${R()}/${$()}`);if(t.data.success){y.value=t.data.data.reactions||[],a.value=t.data.data.stats||{total:0,by_type:{}};const m=y.value.find(c=>c.user_id===D());o.value=m?m.reaction_type:null}}catch(t){w.value=t.message||"Failed to load reactions",console.error("Error loading reactions:",t)}finally{k.value=!1}},f=async t=>{const m=o.value,c=a.value.total,n={...a.value.by_type};try{o.value=t,a.value.total++,a.value.by_type[t]=(a.value.by_type[t]||0)+1,await r.post("/reactions",{reactable_type:R(),reactable_id:$(),reaction_type:t}),await C()}catch(l){throw o.value=m,a.value.total=c,a.value.by_type=n,w.value=l.message||"Failed to add reaction",l}},u=async()=>{const t=o.value,m=a.value.total,c={...a.value.by_type};if(t)try{o.value=null,a.value.total--,a.value.by_type[t]&&a.value.by_type[t]--,await r.delete(`/reactions/${R()}/${$()}`),await C()}catch(n){throw o.value=t,a.value.total=m,a.value.by_type=c,w.value=n.message||"Failed to remove reaction",n}},S=async t=>{o.value===t?await u():o.value?(await u(),await f(t)):await f(t)},D=()=>{const t=localStorage.getItem("user");return t?JSON.parse(t).user_id:0},I=O(()=>o.value?P[o.value]:"ðŸ¤"),M=O(()=>o.value?_[o.value]:"#94a3b8");return{reactions:y,stats:a,currentUserReaction:o,loading:k,error:w,reactionIcons:P,reactionColors:_,displayIcon:I,displayColor:M,loadReactions:C,addReaction:f,removeReaction:u,toggleReaction:S}}const Z={class:"reaction-picker-container"},q={class:"reaction-icon"},G={key:0,class:"reaction-count"},K=["onClick","title"],Q={class:"modal-header"},X={class:"modal-body"},Y={class:"reaction-tabs"},ee=["onClick"],te={class:"reaction-users-list"},ae=["src","alt"],se={class:"username"},oe={class:"reaction-emoji"},ne={key:0,class:"empty-state"},le=j({__name:"ReactionPicker",props:{reactableType:{},reactableId:{}},setup(e){const s=e,{reactions:y,stats:a,currentUserReaction:o,reactionIcons:k,displayIcon:w,displayColor:R,loadReactions:$,toggleReaction:P}=L(b(s.reactableType),b(s.reactableId)),_=b(!1),C=b(!1),f=b("all");let u=null;const S=c=>{c.stopPropagation(),_.value=!_.value},D=()=>{u=setTimeout(()=>{_.value=!0},300)},I=()=>{u&&(clearTimeout(u),u=null),setTimeout(()=>{_.value&&(_.value=!1)},200)},M=()=>{u&&(clearTimeout(u),u=null)},t=async c=>{_.value=!1;try{await P(c)}catch(n){console.error("Failed to toggle reaction:",n)}},m=O(()=>f.value==="all"?y.value:y.value.filter(c=>c.reaction_type===f.value));return $(),(c,n)=>(d(),v("div",Z,[i("button",{onClick:S,onMouseenter:D,onMouseleave:I,class:T(["reaction-button",{active:p(o)}]),style:A({color:p(R)})},[i("span",q,h(p(w)),1),p(a).total>0?(d(),v("span",G,h(p(a).total),1)):F("",!0)],38),V(x,{name:"picker-fade"},{default:z(()=>[_.value?(d(),v("div",{key:0,class:"reaction-picker",onMouseenter:M,onMouseleave:I},[(d(!0),v(B,null,N(p(k),(l,g)=>(d(),v("button",{key:g,onClick:E=>t(g),class:T(["reaction-option",{selected:p(o)===g}]),title:g},h(l),11,K))),128))],32)):F("",!0)]),_:1}),V(x,{name:"modal-fade"},{default:z(()=>[C.value?(d(),v("div",{key:0,class:"modal-overlay",onClick:n[3]||(n[3]=l=>C.value=!1)},[i("div",{class:"modal-content",onClick:n[2]||(n[2]=H(()=>{},["stop"]))},[i("div",Q,[n[4]||(n[4]=i("h3",null,"Reactions",-1)),i("button",{onClick:n[0]||(n[0]=l=>C.value=!1),class:"btn-close"},"Ã—")]),i("div",X,[i("div",Y,[i("button",{onClick:n[1]||(n[1]=l=>f.value="all"),class:T(["tab-button",{active:f.value==="all"}])}," All "+h(p(a).total),3),(d(!0),v(B,null,N(p(a).by_type,(l,g)=>W((d(),v("button",{key:g,onClick:E=>f.value=g,class:T(["tab-button",{active:f.value===g}])},h(p(k)[g])+" "+h(l),11,ee)),[[J,l>0]])),128))]),i("div",te,[(d(!0),v(B,null,N(m.value,l=>(d(),v("div",{key:l.reaction_id,class:"reaction-user-item"},[i("img",{src:l.avatar_url||"/assets/images/default-avatar.svg",alt:l.username,class:"user-avatar"},null,8,ae),i("span",se,h(l.username),1),i("span",oe,h(p(k)[l.reaction_type]),1)]))),128)),m.value.length===0?(d(),v("div",ne," No reactions yet ")):F("",!0)])])])])):F("",!0)]),_:1})]))}}),ue=U(le,[["__scopeId","data-v-a24b23af"]]);export{ue as R,ce as p};
//# sourceMappingURL=ReactionPicker-DE7VVgVc.js.map
