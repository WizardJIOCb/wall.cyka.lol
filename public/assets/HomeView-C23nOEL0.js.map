{"version":3,"file":"HomeView-C23nOEL0.js","sources":["../../frontend/src/services/api/posts.ts","../../frontend/src/stores/posts.ts","../../frontend/src/components/comments/CommentForm.vue","../../frontend/src/components/comments/CommentItem.vue","../../frontend/src/components/comments/CommentSection.vue","../../frontend/src/components/posts/PostCard.vue","../../frontend/src/components/posts/PostList.vue","../../frontend/src/components/common/AppModal.vue","../../frontend/src/components/posts/PostCreator.vue","../../frontend/src/composables/useInfiniteScroll.ts","../../frontend/src/views/HomeView.vue"],"sourcesContent":["import apiClient from './client'\nimport type { Post, PaginatedResponse } from '@/types/models'\nimport type { CreatePostRequest } from '@/types/api'\n\nexport const postsAPI = {\n  /**\n   * Get posts feed\n   */\n  async getFeed(params?: {\n    page?: number\n    per_page?: number\n    content_type?: string\n    time_range?: string\n    sort_by?: string\n  }): Promise<PaginatedResponse<Post>> {\n    return apiClient.get('/posts/feed', params)\n  },\n\n  /**\n   * Get posts from a specific wall\n   */\n  async getWallPosts(wallId: number, params?: {\n    page?: number\n    per_page?: number\n  }): Promise<PaginatedResponse<Post>> {\n    return apiClient.get(`/walls/${wallId}/posts`, params)\n  },\n\n  /**\n   * Get a single post by ID\n   */\n  async getPost(postId: number): Promise<Post> {\n    return apiClient.get(`/posts/${postId}`)\n  },\n\n  /**\n   * Create a new post\n   */\n  async createPost(data: CreatePostRequest): Promise<Post> {\n    const formData = new FormData()\n    \n    formData.append('wall_id', data.wall_id.toString())\n    formData.append('content', data.content)\n    \n    if (data.post_type) {\n      formData.append('post_type', data.post_type)\n    }\n    \n    if (data.visibility) {\n      formData.append('visibility', data.visibility)\n    }\n    \n    if (data.ai_application_id) {\n      formData.append('ai_application_id', data.ai_application_id.toString())\n    }\n    \n    if (data.media_files) {\n      data.media_files.forEach((file, index) => {\n        formData.append(`media_files[${index}]`, file)\n      })\n    }\n    \n    return apiClient.upload('/posts', formData)\n  },\n\n  /**\n   * Update a post\n   */\n  async updatePost(postId: number, data: {\n    content?: string\n    visibility?: string\n  }): Promise<Post> {\n    return apiClient.patch(`/posts/${postId}`, data)\n  },\n\n  /**\n   * Delete a post\n   */\n  async deletePost(postId: number): Promise<void> {\n    return apiClient.delete(`/posts/${postId}`)\n  },\n\n  /**\n   * React to a post\n   */\n  async reactToPost(postId: number, reactionType: string): Promise<void> {\n    return apiClient.post(`/posts/${postId}/reactions`, { reaction_type: reactionType })\n  },\n\n  /**\n   * Remove reaction from a post\n   */\n  async removeReaction(postId: number): Promise<void> {\n    return apiClient.delete(`/posts/${postId}/reactions`)\n  },\n\n  /**\n   * Share a post\n   */\n  async sharePost(postId: number, wallId: number, content?: string): Promise<Post> {\n    return apiClient.post(`/posts/${postId}/share`, { wall_id: wallId, content })\n  }\n}\n\nexport default postsAPI\n","import { defineStore } from 'pinia'\nimport { ref, computed } from 'vue'\nimport type { Post, PaginatedResponse, PostFilters } from '@/types/models'\nimport postsAPI from '@/services/api/posts'\n\nexport const usePostsStore = defineStore('posts', () => {\n  // State\n  const posts = ref<Post[]>([])\n  const feedPosts = ref<Post[]>([])\n  const currentPage = ref(1)\n  const totalPages = ref(1)\n  const hasMore = ref(true)\n  const loading = ref(false)\n  const filters = ref<PostFilters>({\n    content_type: 'all',\n    time_range: 'all',\n    sort_by: 'recent'\n  })\n\n  // Getters\n  const getPostById = computed(() => {\n    return (postId: number) => posts.value.find(p => p.id === postId)\n  })\n\n  // Actions\n  const fetchFeed = async (page = 1, reset = false) => {\n    loading.value = true\n    try {\n      const response: PaginatedResponse<Post> = await postsAPI.getFeed({\n        page,\n        per_page: 20,\n        content_type: filters.value.content_type !== 'all' ? filters.value.content_type : undefined,\n        time_range: filters.value.time_range !== 'all' ? filters.value.time_range : undefined,\n        sort_by: filters.value.sort_by\n      })\n\n      // Handle different response structures and ensure we have an array\n      const postsData = Array.isArray(response.data) ? response.data : []\n      \n      if (reset) {\n        feedPosts.value = postsData\n      } else {\n        feedPosts.value.push(...postsData)\n      }\n\n      currentPage.value = response.pagination?.current_page || page\n      totalPages.value = response.pagination?.total_pages || 1\n      hasMore.value = response.pagination?.has_more || false\n\n      // Also add to posts cache\n      postsData.forEach(post => {\n        const existingIndex = posts.value.findIndex(p => p.id === post.id)\n        if (existingIndex >= 0) {\n          posts.value[existingIndex] = post\n        } else {\n          posts.value.push(post)\n        }\n      })\n    } catch (error) {\n      console.error('Failed to fetch feed:', error)\n      // Set empty array on error to prevent issues\n      if (reset) {\n        feedPosts.value = []\n      }\n      throw error\n    } finally {\n      loading.value = false\n    }\n  }\n\n  const loadMore = async () => {\n    if (hasMore.value && !loading.value) {\n      await fetchFeed(currentPage.value + 1, false)\n    }\n  }\n\n  const refreshFeed = async () => {\n    currentPage.value = 1\n    await fetchFeed(1, true)\n  }\n\n  const createPost = async (postData: any) => {\n    try {\n      const newPost = await postsAPI.createPost(postData)\n      \n      // Add to beginning of feed\n      feedPosts.value.unshift(newPost)\n      posts.value.unshift(newPost)\n      \n      return newPost\n    } catch (error) {\n      console.error('Failed to create post:', error)\n      throw error\n    }\n  }\n\n  const updatePost = async (postId: number, updates: any) => {\n    try {\n      const updatedPost = await postsAPI.updatePost(postId, updates)\n      \n      // Update in cache\n      const feedIndex = feedPosts.value.findIndex(p => p.id === postId)\n      if (feedIndex >= 0) {\n        feedPosts.value[feedIndex] = updatedPost\n      }\n      \n      const cacheIndex = posts.value.findIndex(p => p.id === postId)\n      if (cacheIndex >= 0) {\n        posts.value[cacheIndex] = updatedPost\n      }\n      \n      return updatedPost\n    } catch (error) {\n      console.error('Failed to update post:', error)\n      throw error\n    }\n  }\n\n  const deletePost = async (postId: number) => {\n    try {\n      await postsAPI.deletePost(postId)\n      \n      // Remove from feed\n      feedPosts.value = feedPosts.value.filter(p => p.id !== postId)\n      posts.value = posts.value.filter(p => p.id !== postId)\n    } catch (error) {\n      console.error('Failed to delete post:', error)\n      throw error\n    }\n  }\n\n  const reactToPost = async (postId: number, reactionType: string) => {\n    try {\n      await postsAPI.reactToPost(postId, reactionType)\n      \n      // Update reaction count optimistically\n      const post = posts.value.find(p => p.id === postId)\n      if (post) {\n        post.reactions_count = (post.reactions_count || 0) + 1\n      }\n    } catch (error) {\n      console.error('Failed to react to post:', error)\n      throw error\n    }\n  }\n\n  const removeReaction = async (postId: number) => {\n    try {\n      await postsAPI.removeReaction(postId)\n      \n      // Update reaction count optimistically\n      const post = posts.value.find(p => p.id === postId)\n      if (post && post.reactions_count > 0) {\n        post.reactions_count--\n      }\n    } catch (error) {\n      console.error('Failed to remove reaction:', error)\n      throw error\n    }\n  }\n\n  const setFilters = (newFilters: Partial<PostFilters>) => {\n    filters.value = { ...filters.value, ...newFilters }\n    refreshFeed()\n  }\n\n  const clearFilters = () => {\n    filters.value = {\n      content_type: 'all',\n      time_range: 'all',\n      sort_by: 'recent'\n    }\n    refreshFeed()\n  }\n\n  return {\n    // State\n    posts,\n    feedPosts,\n    currentPage,\n    totalPages,\n    hasMore,\n    loading,\n    filters,\n    \n    // Getters\n    getPostById,\n    \n    // Actions\n    fetchFeed,\n    loadMore,\n    refreshFeed,\n    createPost,\n    updatePost,\n    deletePost,\n    reactToPost,\n    removeReaction,\n    setFilters,\n    clearFilters\n  }\n})\n","<template>\n  <form @submit.prevent=\"submitComment\" class=\"comment-form\">\n    <div class=\"form-group\">\n      <textarea\n        ref=\"textareaRef\"\n        v-model=\"content\"\n        :placeholder=\"placeholder || t('comments.write')\"\n        :maxlength=\"2000\"\n        :rows=\"rows\"\n        @input=\"autoResize\"\n        @keydown.meta.enter=\"submitComment\"\n        @keydown.ctrl.enter=\"submitComment\"\n        class=\"comment-textarea\"\n      ></textarea>\n      \n      <div class=\"form-footer\">\n        <span \n          class=\"char-count\" \n          :class=\"{ warning: charCount > 1800, error: charCount > 2000 }\"\n        >\n          {{ charCount }} / 2000\n        </span>\n        \n        <div class=\"form-actions\">\n          <button \n            v-if=\"showCancel\"\n            type=\"button\"\n            @click=\"cancel\"\n            class=\"btn btn-secondary\"\n            :disabled=\"isSubmitting\"\n          >\n            {{ t('comments.cancel') }}\n          </button>\n          <button \n            type=\"submit\"\n            :disabled=\"!canSubmit || isSubmitting\"\n            class=\"btn btn-primary\"\n          >\n            {{ isSubmitting ? t('comments.posting') : submitButtonText }}\n          </button>\n        </div>\n      </div>\n    </div>\n    \n    <div v-if=\"error\" class=\"error-message\">\n      {{ error }}\n    </div>\n  </form>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, watch, onMounted } from 'vue'\nimport { useI18n } from 'vue-i18n'\nimport apiClient from '@/services/api/client'\n\ninterface Props {\n  postId?: number\n  parentCommentId?: number\n  commentId?: number\n  initialContent?: string\n  placeholder?: string\n  rows?: number\n  showCancel?: boolean\n}\n\ninterface Emits {\n  (e: 'comment-created', comment: any): void\n  (e: 'comment-updated', comment: any): void\n  (e: 'cancel'): void\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  rows: 3,\n  showCancel: true\n})\n\nconst emit = defineEmits<Emits>()\nconst { t } = useI18n()\n\n// State\nconst content = ref(props.initialContent || '')\nconst isSubmitting = ref(false)\nconst error = ref<string | null>(null)\nconst textareaRef = ref<HTMLTextAreaElement | null>(null)\n\n// Computed\nconst charCount = computed(() => content.value.length)\n\nconst canSubmit = computed(() => {\n  const trimmed = content.value.trim()\n  return trimmed.length > 0 && trimmed.length <= 2000 && !isSubmitting.value\n})\n\nconst submitButtonText = computed(() => {\n  if (props.commentId) return t('comments.updateComment')\n  if (props.parentCommentId) return t('comments.reply')\n  return t('comments.comment')\n})\n\n// Methods\nconst autoResize = (event?: Event) => {\n  const textarea = textareaRef.value\n  if (!textarea) return\n  \n  textarea.style.height = 'auto'\n  textarea.style.height = textarea.scrollHeight + 'px'\n}\n\nconst submitComment = async () => {\n  if (!canSubmit.value) return\n  \n  isSubmitting.value = true\n  error.value = null\n  \n  try {\n    let response\n    \n    if (props.commentId) {\n      // Edit existing comment\n      response = await apiClient.patch(`/comments/${props.commentId}`, {\n        content: content.value.trim()\n      })\n      emit('comment-updated', response.data.data)\n    } else if (props.parentCommentId) {\n      // Create reply\n      response = await apiClient.post(\n        `/comments/${props.parentCommentId}/replies`,\n        { content: content.value.trim() }\n      )\n      emit('comment-created', response.data.data)\n    } else if (props.postId) {\n      // Create top-level comment\n      response = await apiClient.post(`/posts/${props.postId}/comments`, {\n        content: content.value.trim()\n      })\n      emit('comment-created', response.data.data)\n    }\n    \n    // Clear form\n    content.value = ''\n    if (textareaRef.value) {\n      textareaRef.value.style.height = 'auto'\n    }\n    \n  } catch (err: any) {\n    error.value = err.response?.data?.message || t('comments.errorPosting')\n  } finally {\n    isSubmitting.value = false\n  }\n}\n\nconst cancel = () => {\n  content.value = props.initialContent || ''\n  error.value = null\n  emit('cancel')\n}\n\n// Watch for initial content changes\nwatch(() => props.initialContent, (newVal) => {\n  content.value = newVal || ''\n})\n\n// Auto-resize on mount\nonMounted(() => {\n  autoResize()\n})\n</script>\n\n<style scoped>\n.comment-form {\n  width: 100%;\n}\n\n.form-group {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-xs);\n}\n\n.comment-textarea {\n  width: 100%;\n  min-height: 60px;\n  max-height: 300px;\n  padding: var(--spacing-sm);\n  border: 1px solid var(--border-color);\n  border-radius: var(--radius-sm);\n  font-family: inherit;\n  font-size: 0.95rem;\n  line-height: 1.5;\n  background: var(--bg-primary);\n  color: var(--text-primary);\n  resize: vertical;\n  transition: border-color 0.2s;\n}\n\n.comment-textarea:focus {\n  outline: none;\n  border-color: var(--primary);\n}\n\n.comment-textarea::placeholder {\n  color: var(--text-tertiary);\n}\n\n.form-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.char-count {\n  font-size: 0.85rem;\n  color: var(--text-secondary);\n}\n\n.char-count.warning {\n  color: var(--warning);\n}\n\n.char-count.error {\n  color: var(--error);\n  font-weight: 600;\n}\n\n.form-actions {\n  display: flex;\n  gap: var(--spacing-xs);\n}\n\n.btn {\n  padding: var(--spacing-xs) var(--spacing-md);\n  border: none;\n  border-radius: var(--radius-sm);\n  font-size: 0.9rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.btn-primary {\n  background: var(--primary);\n  color: white;\n}\n\n.btn-primary:hover:not(:disabled) {\n  background: var(--primary-dark);\n}\n\n.btn-secondary {\n  background: var(--bg-secondary);\n  color: var(--text-primary);\n  border: 1px solid var(--border-color);\n}\n\n.btn-secondary:hover:not(:disabled) {\n  background: var(--bg-tertiary);\n}\n\n.error-message {\n  margin-top: var(--spacing-xs);\n  padding: var(--spacing-xs) var(--spacing-sm);\n  background: var(--error-bg);\n  color: var(--error);\n  border-radius: var(--radius-sm);\n  font-size: 0.9rem;\n}\n\n@media (max-width: 768px) {\n  .comment-textarea {\n    font-size: 16px; /* Prevent zoom on iOS */\n  }\n}\n</style>\n","<template>\n  <div \n    class=\"comment-item\" \n    :class=\"`depth-${depth}`\"\n    :style=\"{ marginLeft: indentPixels }\"\n  >\n    <div class=\"comment-header\">\n      <img \n        :src=\"comment.author_avatar || '/default-avatar.png'\" \n        :alt=\"comment.author_name\"\n        class=\"avatar\" \n      />\n      <div class=\"comment-meta\">\n        <router-link \n          :to=\"`/users/${comment.author_id}`\"\n          class=\"author-name\"\n        >\n          {{ comment.author_name }}\n        </router-link>\n        <span class=\"timestamp\">{{ formatTime(comment.created_at) }}</span>\n        <span v-if=\"comment.is_edited\" class=\"edited-badge\">\n          {{ t('comments.edited') }}\n        </span>\n      </div>\n      \n      <div class=\"comment-actions\" v-if=\"isOwner\">\n        <button \n          @click=\"startEdit\"\n          :disabled=\"!canEdit\"\n          :title=\"canEdit ? t('comments.edit') : t('comments.editExpired')\"\n          class=\"action-btn\"\n        >\n          <span>‚úèÔ∏è</span>\n        </button>\n        <button \n          @click=\"deleteComment\"\n          :title=\"t('comments.delete')\"\n          class=\"action-btn\"\n        >\n          <span>üóëÔ∏è</span>\n        </button>\n      </div>\n    </div>\n    \n    <div class=\"comment-content\">\n      <p v-if=\"!isEditing\" v-html=\"comment.content_html\"></p>\n      <CommentForm\n        v-else\n        :comment-id=\"comment.comment_id\"\n        :initial-content=\"comment.content_text\"\n        :show-cancel=\"true\"\n        :rows=\"2\"\n        @comment-updated=\"onUpdated\"\n        @cancel=\"isEditing = false\"\n      />\n    </div>\n    \n    <div class=\"comment-footer\">\n      <button \n        class=\"reaction-btn\"\n        @click=\"toggleReactionPicker\"\n        :class=\"{ active: comment.user_reaction }\"\n      >\n        <span v-if=\"comment.user_reaction\" class=\"user-reaction\">\n          {{ getReactionEmoji(comment.user_reaction) }}\n        </span>\n        <span v-else>üëç</span>\n        <span v-if=\"comment.reaction_count > 0\" class=\"count\">\n          {{ formatCount(comment.reaction_count) }}\n        </span>\n      </button>\n      \n      <button \n        v-if=\"depth < maxDepth\"\n        @click=\"toggleReply\"\n        class=\"reply-btn\"\n      >\n        {{ t('comments.reply') }}\n        <span v-if=\"comment.reply_count > 0\" class=\"count\">\n          ({{ comment.reply_count }})\n        </span>\n      </button>\n      \n      <button \n        v-if=\"comment.reply_count > 0 && comment.replies\"\n        @click=\"toggleReplies\"\n        class=\"collapse-btn\"\n      >\n        {{ repliesExpanded ? t('comments.hideReplies') : t('comments.showReplies') }}\n      </button>\n    </div>\n    \n    <!-- Reaction Picker -->\n    <div \n      v-if=\"showReactionPicker\"\n      class=\"reaction-picker\"\n      @click.stop\n    >\n      <button\n        v-for=\"reaction in reactionTypes\"\n        :key=\"reaction.type\"\n        @click=\"reactToComment(reaction.type)\"\n        class=\"reaction-option\"\n        :class=\"{ selected: comment.user_reaction === reaction.type }\"\n        :title=\"reaction.label\"\n      >\n        {{ reaction.emoji }}\n      </button>\n      <button @click=\"showReactionPicker = false\" class=\"close-picker\">\n        ‚úï\n      </button>\n    </div>\n    \n    <!-- Reply Form -->\n    <div v-if=\"showReplyForm\" class=\"reply-form\">\n      <CommentForm\n        :post-id=\"postId\"\n        :parent-comment-id=\"comment.comment_id\"\n        :placeholder=\"t('comments.writeReply')\"\n        :rows=\"2\"\n        @comment-created=\"onReplyCreated\"\n        @cancel=\"showReplyForm = false\"\n      />\n    </div>\n    \n    <!-- Nested Replies -->\n    <div v-if=\"repliesExpanded && comment.replies && comment.replies.length > 0\" class=\"replies\">\n      <CommentItem\n        v-for=\"reply in comment.replies\"\n        :key=\"reply.comment_id\"\n        :comment=\"reply\"\n        :post-id=\"postId\"\n        :depth=\"depth + 1\"\n        :max-depth=\"maxDepth\"\n        @reply-created=\"$emit('reply-created', $event)\"\n        @comment-updated=\"$emit('comment-updated', $event)\"\n        @comment-deleted=\"$emit('comment-deleted', $event)\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed } from 'vue'\nimport { useI18n } from 'vue-i18n'\nimport { useAuthStore } from '@/stores/auth'\nimport apiClient from '@/services/api/client'\nimport CommentForm from './CommentForm.vue'\n\ninterface Comment {\n  comment_id: number\n  post_id: number\n  author_id: number\n  author_username: string\n  author_name: string\n  author_avatar: string | null\n  parent_comment_id: number | null\n  content_text: string\n  content_html: string\n  depth_level: number\n  reply_count: number\n  reaction_count: number\n  like_count: number\n  dislike_count: number\n  is_edited: boolean\n  is_hidden: boolean\n  replies?: Comment[]\n  created_at: string\n  updated_at: string\n  user_reaction?: string | null\n}\n\ninterface Props {\n  comment: Comment\n  postId: number\n  depth?: number\n  maxDepth?: number\n}\n\ninterface Emits {\n  (e: 'reply-created', comment: Comment): void\n  (e: 'comment-updated', comment: Comment): void\n  (e: 'comment-deleted', commentId: number): void\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  depth: 0,\n  maxDepth: 4\n})\n\nconst emit = defineEmits<Emits>()\nconst { t } = useI18n()\nconst authStore = useAuthStore()\n\n// State\nconst isEditing = ref(false)\nconst showReplyForm = ref(false)\nconst showReactionPicker = ref(false)\nconst repliesExpanded = ref(true)\n\n// Reaction types\nconst reactionTypes = [\n  { type: 'like', emoji: 'üëç', label: 'Like' },\n  { type: 'dislike', emoji: 'üëé', label: 'Dislike' },\n  { type: 'heart', emoji: '‚ù§Ô∏è', label: 'Love' },\n  { type: 'laugh', emoji: 'üòÇ', label: 'Laugh' },\n  { type: 'wow', emoji: 'üòÆ', label: 'Wow' },\n  { type: 'sad', emoji: 'üò¢', label: 'Sad' },\n  { type: 'angry', emoji: 'üò†', label: 'Angry' }\n]\n\n// Computed\nconst isOwner = computed(() => {\n  return authStore.user?.user_id === props.comment.author_id\n})\n\nconst canEdit = computed(() => {\n  const createdTime = new Date(props.comment.created_at).getTime()\n  const now = Date.now()\n  const minutesPassed = (now - createdTime) / 1000 / 60\n  return minutesPassed < 15\n})\n\nconst indentPixels = computed(() => {\n  if (props.depth === 0) return '0'\n  const baseIndent = window.innerWidth > 768 ? 24 : 12\n  return `${props.depth * baseIndent}px`\n})\n\n// Methods\nconst formatTime = (timestamp: string) => {\n  const date = new Date(timestamp)\n  const now = new Date()\n  const diffMs = now.getTime() - date.getTime()\n  const diffMins = Math.floor(diffMs / 60000)\n  \n  if (diffMins < 1) return t('comments.justNow')\n  if (diffMins < 60) return t('comments.minutesAgo', { count: diffMins })\n  \n  const diffHours = Math.floor(diffMins / 60)\n  if (diffHours < 24) return t('comments.hoursAgo', { count: diffHours })\n  \n  const diffDays = Math.floor(diffHours / 24)\n  if (diffDays < 7) return t('comments.daysAgo', { count: diffDays })\n  \n  return date.toLocaleDateString()\n}\n\nconst formatCount = (count: number) => {\n  if (count >= 1000000) return (count / 1000000).toFixed(1) + 'M'\n  if (count >= 1000) return (count / 1000).toFixed(1) + 'K'\n  return count.toString()\n}\n\nconst getReactionEmoji = (type: string) => {\n  const reaction = reactionTypes.find(r => r.type === type)\n  return reaction?.emoji || 'üëç'\n}\n\nconst startEdit = () => {\n  if (!canEdit.value) return\n  isEditing.value = true\n}\n\nconst deleteComment = async () => {\n  if (!confirm(t('comments.deleteConfirm'))) return\n  \n  try {\n    await apiClient.delete(`/comments/${props.comment.comment_id}`)\n    emit('comment-deleted', props.comment.comment_id)\n  } catch (error) {\n    console.error('Failed to delete comment:', error)\n  }\n}\n\nconst toggleReply = () => {\n  showReplyForm.value = !showReplyForm.value\n  if (showReplyForm.value) {\n    showReactionPicker.value = false\n  }\n}\n\nconst toggleReplies = () => {\n  repliesExpanded.value = !repliesExpanded.value\n}\n\nconst toggleReactionPicker = () => {\n  showReactionPicker.value = !showReactionPicker.value\n  if (showReactionPicker.value) {\n    showReplyForm.value = false\n  }\n}\n\nconst reactToComment = async (reactionType: string) => {\n  try {\n    const response = await apiClient.post(\n      `/comments/${props.comment.comment_id}/reactions`,\n      { reaction_type: reactionType }\n    )\n    \n    // Update local state\n    props.comment.reaction_count = response.data.data.reaction_count\n    props.comment.like_count = response.data.data.like_count\n    props.comment.dislike_count = response.data.data.dislike_count\n    \n    // Update user's reaction\n    if (response.data.data.action === 'removed') {\n      props.comment.user_reaction = null\n    } else {\n      props.comment.user_reaction = reactionType\n    }\n    \n    showReactionPicker.value = false\n  } catch (error) {\n    console.error('Failed to react:', error)\n  }\n}\n\nconst onUpdated = (updatedComment: Comment) => {\n  isEditing.value = false\n  emit('comment-updated', updatedComment)\n}\n\nconst onReplyCreated = (reply: Comment) => {\n  showReplyForm.value = false\n  \n  // Add reply to local state\n  if (!props.comment.replies) {\n    props.comment.replies = []\n  }\n  props.comment.replies.push(reply)\n  props.comment.reply_count++\n  \n  emit('reply-created', reply)\n}\n</script>\n\n<style scoped>\n.comment-item {\n  padding: var(--spacing-sm);\n  border-left: 2px solid transparent;\n  margin-bottom: var(--spacing-sm);\n  transition: background-color 0.2s;\n}\n\n.comment-item:hover {\n  background: var(--bg-secondary);\n  border-left-color: var(--border-color);\n}\n\n.comment-header {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n  margin-bottom: var(--spacing-xs);\n}\n\n.avatar {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  object-fit: cover;\n}\n\n.comment-meta {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n  flex: 1;\n  flex-wrap: wrap;\n}\n\n.author-name {\n  font-weight: 600;\n  color: var(--text-primary);\n  text-decoration: none;\n}\n\n.author-name:hover {\n  color: var(--primary);\n}\n\n.timestamp {\n  font-size: 0.85rem;\n  color: var(--text-secondary);\n}\n\n.edited-badge {\n  font-size: 0.8rem;\n  color: var(--text-tertiary);\n  font-style: italic;\n}\n\n.comment-actions {\n  display: flex;\n  gap: var(--spacing-xs);\n}\n\n.action-btn {\n  background: transparent;\n  border: none;\n  padding: var(--spacing-xs);\n  cursor: pointer;\n  opacity: 0.6;\n  transition: opacity 0.2s;\n}\n\n.action-btn:hover:not(:disabled) {\n  opacity: 1;\n}\n\n.action-btn:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n\n.comment-content {\n  color: var(--text-primary);\n  line-height: 1.6;\n  margin-bottom: var(--spacing-sm);\n  word-wrap: break-word;\n}\n\n.comment-content p {\n  margin: 0;\n}\n\n.comment-footer {\n  display: flex;\n  gap: var(--spacing-sm);\n  flex-wrap: wrap;\n}\n\n.reaction-btn,\n.reply-btn,\n.collapse-btn {\n  background: transparent;\n  border: 1px solid var(--border-color);\n  padding: var(--spacing-xs) var(--spacing-sm);\n  border-radius: var(--radius-sm);\n  font-size: 0.9rem;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.reaction-btn:hover,\n.reply-btn:hover,\n.collapse-btn:hover {\n  background: var(--bg-tertiary);\n  border-color: var(--primary);\n}\n\n.reaction-btn.active {\n  border-color: var(--primary);\n  background: var(--primary-light);\n}\n\n.count {\n  font-size: 0.85rem;\n  color: var(--text-secondary);\n}\n\n.reaction-picker {\n  position: absolute;\n  margin-top: var(--spacing-xs);\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  border-radius: var(--radius-md);\n  padding: var(--spacing-xs);\n  display: flex;\n  gap: var(--spacing-xs);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  z-index: 10;\n}\n\n.reaction-option {\n  background: transparent;\n  border: 2px solid transparent;\n  padding: var(--spacing-xs);\n  border-radius: var(--radius-sm);\n  font-size: 1.3rem;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.reaction-option:hover {\n  background: var(--bg-secondary);\n  transform: scale(1.2);\n}\n\n.reaction-option.selected {\n  border-color: var(--primary);\n  background: var(--primary-light);\n}\n\n.close-picker {\n  background: var(--bg-secondary);\n  border: none;\n  padding: var(--spacing-xs);\n  border-radius: var(--radius-sm);\n  cursor: pointer;\n  font-size: 0.9rem;\n}\n\n.reply-form {\n  margin-top: var(--spacing-sm);\n  margin-bottom: var(--spacing-sm);\n}\n\n.replies {\n  margin-top: var(--spacing-sm);\n}\n\n@media (max-width: 768px) {\n  .avatar {\n    width: 28px;\n    height: 28px;\n  }\n  \n  .comment-meta {\n    font-size: 0.9rem;\n  }\n  \n  .reaction-picker {\n    flex-wrap: wrap;\n    max-width: 280px;\n  }\n}\n</style>\n","<template>\n  <div class=\"comment-section\">\n    <div class=\"comment-section-header\">\n      <h3 class=\"section-title\">\n        {{ t('comments.title') }} ({{ totalCount }})\n      </h3>\n      \n      <div class=\"comment-controls\">\n        <select v-model=\"sortBy\" class=\"sort-select\" @change=\"fetchComments\">\n          <option value=\"created_asc\">{{ t('comments.sortOldest') }}</option>\n          <option value=\"created_desc\">{{ t('comments.sortNewest') }}</option>\n          <option value=\"reactions\">{{ t('comments.sortReactions') }}</option>\n        </select>\n      </div>\n    </div>\n    \n    <div v-if=\"allowComments\" class=\"comment-form-container\">\n      <CommentForm\n        :post-id=\"postId\"\n        :show-cancel=\"false\"\n        @comment-created=\"onCommentCreated\"\n      />\n    </div>\n    \n    <div v-if=\"loading && comments.length === 0\" class=\"loading-state\">\n      <div class=\"spinner\"></div>\n      <p>{{ t('comments.loading') }}</p>\n    </div>\n    \n    <div v-else-if=\"comments.length === 0\" class=\"empty-state\">\n      <p>{{ t('comments.noComments') }}</p>\n    </div>\n    \n    <div v-else class=\"comments-list\">\n      <CommentItem\n        v-for=\"comment in topLevelComments\"\n        :key=\"comment.comment_id\"\n        :comment=\"comment\"\n        :post-id=\"postId\"\n        :depth=\"0\"\n        :max-depth=\"4\"\n        @reply-created=\"onReplyCreated\"\n        @comment-updated=\"onCommentUpdated\"\n        @comment-deleted=\"onCommentDeleted\"\n      />\n    </div>\n    \n    <button \n      v-if=\"hasMore && !loading\"\n      @click=\"loadMore\"\n      class=\"load-more-btn\"\n    >\n      {{ t('comments.loadMore') }}\n    </button>\n    \n    <div v-if=\"loading && comments.length > 0\" class=\"loading-more\">\n      <div class=\"spinner-small\"></div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted, onUnmounted } from 'vue'\nimport { useI18n } from 'vue-i18n'\nimport apiClient from '@/services/api/client'\nimport CommentForm from './CommentForm.vue'\nimport CommentItem from './CommentItem.vue'\n\ninterface Comment {\n  comment_id: number\n  post_id: number\n  author_id: number\n  author_username: string\n  author_name: string\n  author_avatar: string | null\n  parent_comment_id: number | null\n  content_text: string\n  content_html: string\n  depth_level: number\n  reply_count: number\n  reaction_count: number\n  like_count: number\n  dislike_count: number\n  is_edited: boolean\n  is_hidden: boolean\n  replies?: Comment[]\n  created_at: string\n  updated_at: string\n  user_reaction?: string | null\n}\n\ninterface Props {\n  postId: number\n  initialComments?: Comment[]\n  allowComments?: boolean\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  allowComments: true,\n  initialComments: () => []\n})\n\nconst { t } = useI18n()\n\n// State\nconst comments = ref<Comment[]>(props.initialComments)\nconst loading = ref(false)\nconst hasMore = ref(false)\nconst sortBy = ref('created_asc')\nconst totalCount = ref(0)\nconst pollInterval = ref<number | null>(null)\n\n// Computed\nconst topLevelComments = computed(() => {\n  return comments.value.filter(c => !c.parent_comment_id)\n})\n\n// Methods\nconst fetchComments = async () => {\n  loading.value = true\n  \n  try {\n    const response = await apiClient.get(`/posts/${props.postId}/comments`, {\n      params: {\n        sort: sortBy.value,\n        limit: 50\n      }\n    })\n    \n    comments.value = response.data.data.comments || []\n    hasMore.value = response.data.data.has_more || false\n    totalCount.value = response.data.data.count || 0\n    \n    // Build comment tree\n    buildCommentTree()\n    \n  } catch (error) {\n    console.error('Failed to fetch comments:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst buildCommentTree = () => {\n  // Create a map for quick lookup\n  const commentMap = new Map<number, Comment>()\n  comments.value.forEach(comment => {\n    comment.replies = []\n    commentMap.set(comment.comment_id, comment)\n  })\n  \n  // Build tree structure\n  comments.value.forEach(comment => {\n    if (comment.parent_comment_id) {\n      const parent = commentMap.get(comment.parent_comment_id)\n      if (parent && parent.replies) {\n        parent.replies.push(comment)\n      }\n    }\n  })\n}\n\nconst loadMore = async () => {\n  // In a real implementation, this would use offset/cursor pagination\n  // For now, just a placeholder\n  console.log('Load more comments')\n}\n\nconst onCommentCreated = (comment: Comment) => {\n  // Add new comment to the beginning\n  comments.value.unshift(comment)\n  totalCount.value++\n  buildCommentTree()\n}\n\nconst onReplyCreated = (reply: Comment) => {\n  // Reply is already added to parent in CommentItem\n  totalCount.value++\n}\n\nconst onCommentUpdated = (updatedComment: Comment) => {\n  const index = comments.value.findIndex(c => c.comment_id === updatedComment.comment_id)\n  if (index !== -1) {\n    comments.value[index] = { ...comments.value[index], ...updatedComment }\n    buildCommentTree()\n  }\n}\n\nconst onCommentDeleted = (commentId: number) => {\n  comments.value = comments.value.filter(c => c.comment_id !== commentId)\n  totalCount.value--\n  buildCommentTree()\n}\n\nconst startPolling = () => {\n  // Poll for new comments every 10 seconds\n  pollInterval.value = window.setInterval(() => {\n    if (!loading.value) {\n      fetchComments()\n    }\n  }, 10000)\n}\n\nconst stopPolling = () => {\n  if (pollInterval.value) {\n    clearInterval(pollInterval.value)\n    pollInterval.value = null\n  }\n}\n\n// Lifecycle\nonMounted(() => {\n  if (comments.value.length === 0) {\n    fetchComments()\n  } else {\n    buildCommentTree()\n    totalCount.value = comments.value.length\n  }\n  startPolling()\n})\n\nonUnmounted(() => {\n  stopPolling()\n})\n</script>\n\n<style scoped>\n.comment-section {\n  width: 100%;\n  background: var(--bg-primary);\n  border-radius: var(--radius-md);\n  padding: var(--spacing-md);\n  margin-top: var(--spacing-md);\n}\n\n.comment-section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: var(--spacing-md);\n  flex-wrap: wrap;\n  gap: var(--spacing-sm);\n}\n\n.section-title {\n  font-size: 1.25rem;\n  font-weight: 600;\n  color: var(--text-primary);\n  margin: 0;\n}\n\n.comment-controls {\n  display: flex;\n  gap: var(--spacing-sm);\n  align-items: center;\n}\n\n.sort-select {\n  padding: var(--spacing-xs) var(--spacing-sm);\n  border: 1px solid var(--border-color);\n  border-radius: var(--radius-sm);\n  background: var(--bg-primary);\n  color: var(--text-primary);\n  font-size: 0.9rem;\n  cursor: pointer;\n}\n\n.sort-select:focus {\n  outline: none;\n  border-color: var(--primary);\n}\n\n.comment-form-container {\n  margin-bottom: var(--spacing-md);\n  padding-bottom: var(--spacing-md);\n  border-bottom: 1px solid var(--border-color);\n}\n\n.comments-list {\n  display: flex;\n  flex-direction: column;\n}\n\n.loading-state,\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: var(--spacing-xl);\n  color: var(--text-secondary);\n}\n\n.spinner {\n  width: 40px;\n  height: 40px;\n  border: 3px solid var(--border-color);\n  border-top-color: var(--primary);\n  border-radius: 50%;\n  animation: spin 0.8s linear infinite;\n}\n\n.spinner-small {\n  width: 24px;\n  height: 24px;\n  border: 2px solid var(--border-color);\n  border-top-color: var(--primary);\n  border-radius: 50%;\n  animation: spin 0.8s linear infinite;\n  margin: var(--spacing-md) auto;\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n\n.empty-state p {\n  margin-top: var(--spacing-sm);\n  font-size: 1rem;\n}\n\n.load-more-btn {\n  width: 100%;\n  padding: var(--spacing-sm) var(--spacing-md);\n  margin-top: var(--spacing-md);\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: var(--radius-sm);\n  color: var(--text-primary);\n  font-size: 0.95rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.load-more-btn:hover {\n  background: var(--bg-tertiary);\n  border-color: var(--primary);\n}\n\n.loading-more {\n  display: flex;\n  justify-content: center;\n  padding: var(--spacing-md);\n}\n\n@media (max-width: 768px) {\n  .comment-section {\n    padding: var(--spacing-sm);\n  }\n  \n  .section-title {\n    font-size: 1.1rem;\n  }\n  \n  .comment-section-header {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n  \n  .comment-controls {\n    width: 100%;\n  }\n  \n  .sort-select {\n    width: 100%;\n  }\n}\n</style>\n","<template>\n  <article class=\"post-card\">\n    <div class=\"post-header\">\n      <AppAvatar :src=\"post.user?.avatar_url\" :name=\"post.user?.display_name || post.user?.username\" size=\"md\" />\n      <div class=\"post-author\">\n        <router-link :to=\"`/profile/${post.user?.username}`\" class=\"author-name\">\n          {{ post.user?.display_name || post.user?.username }}\n        </router-link>\n        <span class=\"post-time\">{{ formatTime(post.created_at) }}</span>\n      </div>\n      <AppDropdown v-if=\"canEdit\" position=\"bottom-right\">\n        <template #trigger>\n          <button class=\"btn-icon\">‚ãÆ</button>\n        </template>\n        <button class=\"dropdown-item\" @click=\"$emit('edit')\">Edit</button>\n        <button class=\"dropdown-item danger\" @click=\"$emit('delete')\">Delete</button>\n      </AppDropdown>\n    </div>\n\n    <div class=\"post-content\" v-html=\"post.content_html || post.content\"></div>\n\n    <div v-if=\"post.media && post.media.length\" class=\"post-media\">\n      <img v-for=\"media in post.media\" :key=\"media.id\" :src=\"media.file_path\" :alt=\"'Media'\" />\n    </div>\n\n    <div class=\"post-actions\">\n      <button class=\"action-btn\" @click=\"toggleReaction\">\n        <span>{{ hasReacted ? '‚ù§Ô∏è' : 'ü§ç' }}</span>\n        <span v-if=\"post.reactions_count\">{{ post.reactions_count }}</span>\n      </button>\n      <button class=\"action-btn\" @click=\"toggleComments\">\n        <span>üí¨</span>\n        <span v-if=\"post.comments_count\">{{ post.comments_count }}</span>\n      </button>\n      <button class=\"action-btn\" @click=\"$emit('share')\">\n        <span>üîÑ</span>\n        <span v-if=\"post.shares_count\">{{ post.shares_count }}</span>\n      </button>\n    </div>\n\n    <!-- Comments Section -->\n    <CommentSection \n      v-if=\"showComments\"\n      :post-id=\"post.post_id\"\n      :allow-comments=\"true\"\n    />\n  </article>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref } from 'vue'\nimport type { Post } from '@/types/models'\nimport AppAvatar from '@/components/common/AppAvatar.vue'\nimport AppDropdown from '@/components/common/AppDropdown.vue'\nimport CommentSection from '@/components/comments/CommentSection.vue'\nimport { formatRelativeTime } from '@/utils/formatting'\nimport { useAuthStore } from '@/stores/auth'\n\nconst props = defineProps<{ post: Post }>()\nconst emit = defineEmits<{\n  edit: []\n  delete: []\n  comment: []\n  share: []\n  react: [type: string]\n}>()\n\nconst authStore = useAuthStore()\nconst showComments = ref(false)\nconst hasReacted = computed(() => false) // TODO: Track user reactions\nconst canEdit = computed(() => authStore.user?.id === props.post.user_id)\n\nconst formatTime = (date: string) => formatRelativeTime(date)\nconst toggleReaction = () => emit('react', 'like')\nconst toggleComments = () => {\n  showComments.value = !showComments.value\n}\n</script>\n\n<style scoped>\n.post-card { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-lg); padding: var(--spacing-4); margin-bottom: var(--spacing-4); }\n.post-header { display: flex; align-items: center; gap: var(--spacing-3); margin-bottom: var(--spacing-3); }\n.post-author { flex: 1; }\n.author-name { font-weight: 600; color: var(--text-primary); text-decoration: none; }\n.author-name:hover { text-decoration: underline; }\n.post-time { display: block; font-size: 0.85rem; color: var(--text-secondary); }\n.post-content { margin-bottom: var(--spacing-3); line-height: 1.6; }\n.post-media { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-2); margin-bottom: var(--spacing-3); }\n.post-media img { width: 100%; border-radius: var(--radius-md); }\n.post-actions { display: flex; gap: var(--spacing-4); padding-top: var(--spacing-3); border-top: 1px solid var(--border); }\n.action-btn { background: none; border: none; cursor: pointer; display: flex; align-items: center; gap: var(--spacing-2); color: var(--text-secondary); font-size: 0.9rem; padding: var(--spacing-2); border-radius: var(--radius-md); transition: all 0.2s; }\n.action-btn:hover { background: var(--surface-hover); color: var(--text-primary); }\n.dropdown-item.danger { color: var(--danger); }\n</style>\n","<template>\n  <div class=\"post-list\">\n    <PostCard v-for=\"post in posts\" :key=\"post.id\" :post=\"post\" @react=\"handleReact(post.id, $event)\" @comment=\"handleComment(post.id)\" @share=\"handleShare(post.id)\" @edit=\"handleEdit(post.id)\" @delete=\"handleDelete(post.id)\" />\n    <div v-if=\"loading\" class=\"loading\"><div class=\"spinner\"></div><p>Loading posts...</p></div>\n    <div v-if=\"!loading && !hasMore\" class=\"end-message\">No more posts</div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport type { Post } from '@/types/models'\nimport PostCard from './PostCard.vue'\n\ndefineProps<{ posts: Post[]; loading: boolean; hasMore: boolean }>()\nconst emit = defineEmits<{\n  react: [postId: number, type: string]\n  comment: [postId: number]\n  share: [postId: number]\n  edit: [postId: number]\n  delete: [postId: number]\n}>()\n\nconst handleReact = (id: number, type: string) => emit('react', id, type)\nconst handleComment = (id: number) => emit('comment', id)\nconst handleShare = (id: number) => emit('share', id)\nconst handleEdit = (id: number) => emit('edit', id)\nconst handleDelete = (id: number) => emit('delete', id)\n</script>\n\n<style scoped>\n.post-list { max-width: 800px; margin: 0 auto; }\n.loading, .end-message { text-align: center; padding: var(--spacing-6); color: var(--text-secondary); }\n.spinner { width: 40px; height: 40px; border: 3px solid var(--border); border-top-color: var(--primary); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto var(--spacing-3); }\n@keyframes spin { to { transform: rotate(360deg); } }\n</style>\n","<template>\n  <Teleport to=\"body\">\n    <Transition name=\"modal\">\n      <div v-if=\"modelValue\" class=\"modal-overlay\" @click=\"handleOverlayClick\">\n        <div :class=\"modalClasses\" role=\"dialog\" aria-modal=\"true\" @click.stop>\n          <!-- Header -->\n          <div v-if=\"title || closeable\" class=\"modal-header\">\n            <h3 v-if=\"title\" class=\"modal-title\">{{ title }}</h3>\n            <button\n              v-if=\"closeable\"\n              class=\"modal-close\"\n              aria-label=\"Close modal\"\n              @click=\"close\"\n            >\n              ‚úï\n            </button>\n          </div>\n\n          <!-- Body -->\n          <div class=\"modal-body\">\n            <slot />\n          </div>\n\n          <!-- Footer -->\n          <div v-if=\"$slots.footer\" class=\"modal-footer\">\n            <slot name=\"footer\" />\n          </div>\n        </div>\n      </div>\n    </Transition>\n  </Teleport>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, onMounted, onUnmounted } from 'vue'\nimport type { ModalProps } from '@/types/components'\n\nconst props = withDefaults(defineProps<ModalProps>(), {\n  size: 'md',\n  closeable: true\n})\n\nconst emit = defineEmits<{\n  'update:modelValue': [value: boolean]\n}>()\n\nconst modalClasses = computed(() => [\n  'modal',\n  `modal-${props.size}`\n])\n\nconst close = () => {\n  if (props.closeable) {\n    emit('update:modelValue', false)\n  }\n}\n\nconst handleOverlayClick = () => {\n  close()\n}\n\nconst handleEscape = (event: KeyboardEvent) => {\n  if (event.key === 'Escape' && props.modelValue) {\n    close()\n  }\n}\n\nonMounted(() => {\n  document.addEventListener('keydown', handleEscape)\n})\n\nonUnmounted(() => {\n  document.removeEventListener('keydown', handleEscape)\n})\n</script>\n\n<style scoped>\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: var(--spacing-4);\n}\n\n.modal {\n  background: var(--surface);\n  border-radius: var(--radius-lg);\n  box-shadow: var(--shadow-xl);\n  max-height: 90vh;\n  overflow-y: auto;\n  width: 100%;\n}\n\n.modal-sm {\n  max-width: 400px;\n}\n\n.modal-md {\n  max-width: 600px;\n}\n\n.modal-lg {\n  max-width: 800px;\n}\n\n.modal-xl {\n  max-width: 1200px;\n}\n\n.modal-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: var(--spacing-4);\n  border-bottom: 1px solid var(--border);\n}\n\n.modal-title {\n  margin: 0;\n  font-size: 1.25rem;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n\n.modal-close {\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  color: var(--text-secondary);\n  cursor: pointer;\n  padding: var(--spacing-2);\n  line-height: 1;\n  transition: color 0.2s ease;\n}\n\n.modal-close:hover {\n  color: var(--text-primary);\n}\n\n.modal-body {\n  padding: var(--spacing-4);\n}\n\n.modal-footer {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  gap: var(--spacing-3);\n  padding: var(--spacing-4);\n  border-top: 1px solid var(--border);\n}\n\n/* Transitions */\n.modal-enter-active,\n.modal-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.modal-enter-from,\n.modal-leave-to {\n  opacity: 0;\n}\n\n.modal-enter-active .modal,\n.modal-leave-active .modal {\n  transition: transform 0.3s ease;\n}\n\n.modal-enter-from .modal,\n.modal-leave-to .modal {\n  transform: scale(0.9);\n}\n</style>\n","<template>\n  <AppModal v-model=\"isOpen\" title=\"Create Post\" size=\"md\">\n    <form @submit.prevent=\"handleSubmit\">\n      <textarea v-model=\"content\" placeholder=\"What's on your mind?\" rows=\"6\" class=\"post-input\"></textarea>\n      <div class=\"form-actions\">\n        <input type=\"file\" ref=\"fileInput\" @change=\"handleFileSelect\" accept=\"image/*,video/*\" multiple hidden />\n        <AppButton type=\"button\" variant=\"ghost\" @click=\"fileInput?.click()\">üìé Add Media</AppButton>\n        <AppButton type=\"submit\" variant=\"primary\" :loading=\"loading\">Post</AppButton>\n      </div>\n    </form>\n  </AppModal>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue'\nimport AppModal from '@/components/common/AppModal.vue'\nimport AppButton from '@/components/common/AppButton.vue'\n\nconst props = defineProps<{ modelValue: boolean; wallId: number }>()\nconst emit = defineEmits<{ 'update:modelValue': [value: boolean]; submit: [data: any] }>()\n\nconst isOpen = ref(props.modelValue)\nconst content = ref('')\nconst files = ref<File[]>([])\nconst fileInput = ref<HTMLInputElement>()\nconst loading = ref(false)\n\nconst handleFileSelect = (e: Event) => {\n  const target = e.target as HTMLInputElement\n  if (target.files) files.value = Array.from(target.files)\n}\n\nconst handleSubmit = () => {\n  if (!content.value.trim()) return\n  emit('submit', { wall_id: props.wallId, content: content.value, media_files: files.value })\n  content.value = ''\n  files.value = []\n  emit('update:modelValue', false)\n}\n</script>\n\n<style scoped>\n.post-input { width: 100%; padding: var(--spacing-3); border: 1px solid var(--border); border-radius: var(--radius-md); font-family: inherit; font-size: 1rem; resize: vertical; }\n.form-actions { display: flex; justify-content: space-between; margin-top: var(--spacing-4); }\n</style>\n","import { ref, onMounted, onUnmounted } from 'vue'\n\nexport const useInfiniteScroll = (callback: () => void, options = { threshold: 0.8 }) => {\n  const targetRef = ref<HTMLElement>()\n  const isLoading = ref(false)\n\n  const handleScroll = () => {\n    if (!targetRef.value || isLoading.value) return\n    \n    const { scrollTop, scrollHeight, clientHeight } = targetRef.value\n    const scrollPercentage = (scrollTop + clientHeight) / scrollHeight\n    \n    if (scrollPercentage >= options.threshold) {\n      isLoading.value = true\n      callback()\n      setTimeout(() => { isLoading.value = false }, 1000)\n    }\n  }\n\n  onMounted(() => {\n    targetRef.value?.addEventListener('scroll', handleScroll)\n    window.addEventListener('scroll', handleScroll)\n  })\n\n  onUnmounted(() => {\n    targetRef.value?.removeEventListener('scroll', handleScroll)\n    window.removeEventListener('scroll', handleScroll)\n  })\n\n  return { targetRef, isLoading }\n}\n","<template>\n  <div class=\"home-view\">\n    <div class=\"feed-header\">\n      <h1>Home Feed</h1>\n      <AppButton variant=\"primary\" @click=\"showCreatePost = true\">+ Create Post</AppButton>\n    </div>\n    <PostList :posts=\"postsStore.feedPosts\" :loading=\"postsStore.loading\" :has-more=\"postsStore.hasMore\" @react=\"handleReact\" @comment=\"handleComment\" @share=\"handleShare\" @edit=\"handleEdit\" @delete=\"handleDelete\" />\n    <PostCreator v-model=\"showCreatePost\" :wall-id=\"currentWallId\" @submit=\"handleCreatePost\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue'\nimport { usePostsStore } from '@/stores/posts'\nimport PostList from '@/components/posts/PostList.vue'\nimport PostCreator from '@/components/posts/PostCreator.vue'\nimport AppButton from '@/components/common/AppButton.vue'\nimport { useInfiniteScroll } from '@/composables/useInfiniteScroll'\n\nconst postsStore = usePostsStore()\nconst showCreatePost = ref(false)\nconst currentWallId = ref(1) // Default wall ID\n\nonMounted(() => {\n  postsStore.fetchFeed()\n})\n\nuseInfiniteScroll(() => {\n  if (postsStore.hasMore && !postsStore.loading) {\n    postsStore.loadMore()\n  }\n})\n\nconst handleCreatePost = async (data: any) => {\n  await postsStore.createPost(data)\n}\n\nconst handleReact = (postId: number, type: string) => {\n  postsStore.reactToPost(postId, type)\n}\n\nconst handleComment = (postId: number) => {\n  console.log('Comment on post', postId)\n}\n\nconst handleShare = (postId: number) => {\n  console.log('Share post', postId)\n}\n\nconst handleEdit = (postId: number) => {\n  console.log('Edit post', postId)\n}\n\nconst handleDelete = async (postId: number) => {\n  if (confirm('Delete this post?')) {\n    await postsStore.deletePost(postId)\n  }\n}\n</script>\n\n<style scoped>\n.home-view { max-width: 800px; margin: 0 auto; padding: var(--spacing-4); }\n.feed-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-6); }\n.feed-header h1 { margin: 0; }\n</style>\n"],"names":["postsAPI","params","apiClient","wallId","postId","data","formData","file","index","reactionType","content","usePostsStore","defineStore","posts","ref","feedPosts","currentPage","totalPages","hasMore","loading","filters","getPostById","computed","p","fetchFeed","page","reset","response","postsData","_a","_b","_c","post","existingIndex","error","loadMore","refreshFeed","postData","newPost","updates","updatedPost","feedIndex","cacheIndex","newFilters","props","__props","emit","__emit","t","useI18n","isSubmitting","textareaRef","charCount","canSubmit","trimmed","submitButtonText","autoResize","event","textarea","submitComment","err","cancel","watch","newVal","onMounted","_createElementBlock","_createElementVNode","_hoisted_1","$event","_unref","_hoisted_3","_normalizeClass","_toDisplayString","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","authStore","useAuthStore","isEditing","showReplyForm","showReactionPicker","repliesExpanded","reactionTypes","isOwner","canEdit","createdTime","indentPixels","baseIndent","formatTime","timestamp","date","diffMs","diffMins","diffHours","diffDays","formatCount","count","getReactionEmoji","type","reaction","r","startEdit","deleteComment","toggleReply","toggleReplies","toggleReactionPicker","reactToComment","onUpdated","updatedComment","onReplyCreated","reply","_createVNode","_component_router_link","_createTextVNode","_openBlock","_hoisted_9","_createBlock","CommentForm","_hoisted_11","_hoisted_12","_hoisted_14","_hoisted_15","_Fragment","_renderList","_hoisted_16","_hoisted_17","_hoisted_18","_component_CommentItem","_cache","$emit","comments","sortBy","totalCount","pollInterval","topLevelComments","c","fetchComments","buildCommentTree","commentMap","comment","parent","onCommentCreated","onCommentUpdated","onCommentDeleted","commentId","startPolling","stopPolling","onUnmounted","_hoisted_2","_hoisted_8","_hoisted_10","CommentItem","showComments","hasReacted","formatRelativeTime","toggleReaction","toggleComments","AppAvatar","_d","AppDropdown","media","CommentSection","handleReact","id","handleComment","handleShare","handleEdit","handleDelete","PostCard","modalClasses","close","handleOverlayClick","handleEscape","_Teleport","_Transition","_renderSlot","_ctx","$slots","isOpen","files","fileInput","handleFileSelect","e","target","handleSubmit","AppModal","AppButton","useInfiniteScroll","callback","options","targetRef","isLoading","handleScroll","scrollTop","scrollHeight","clientHeight","postsStore","showCreatePost","currentWallId","handleCreatePost","PostList","PostCreator"],"mappings":"yXAIO,MAAMA,EAAW,CAItB,MAAM,QAAQC,EAMuB,CACnC,OAAOC,EAAU,IAAI,cAAeD,CAAM,CAC5C,EAKA,MAAM,aAAaE,EAAgBF,EAGE,CACnC,OAAOC,EAAU,IAAI,UAAUC,CAAM,SAAUF,CAAM,CACvD,EAKA,MAAM,QAAQG,EAA+B,CAC3C,OAAOF,EAAU,IAAI,UAAUE,CAAM,EAAE,CACzC,EAKA,MAAM,WAAWC,EAAwC,CACvD,MAAMC,EAAW,IAAI,SAErB,OAAAA,EAAS,OAAO,UAAWD,EAAK,QAAQ,UAAU,EAClDC,EAAS,OAAO,UAAWD,EAAK,OAAO,EAEnCA,EAAK,WACPC,EAAS,OAAO,YAAaD,EAAK,SAAS,EAGzCA,EAAK,YACPC,EAAS,OAAO,aAAcD,EAAK,UAAU,EAG3CA,EAAK,mBACPC,EAAS,OAAO,oBAAqBD,EAAK,kBAAkB,UAAU,EAGpEA,EAAK,aACPA,EAAK,YAAY,QAAQ,CAACE,EAAMC,IAAU,CACxCF,EAAS,OAAO,eAAeE,CAAK,IAAKD,CAAI,CAC/C,CAAC,EAGIL,EAAU,OAAO,SAAUI,CAAQ,CAC5C,EAKA,MAAM,WAAWF,EAAgBC,EAGf,CAChB,OAAOH,EAAU,MAAM,UAAUE,CAAM,GAAIC,CAAI,CACjD,EAKA,MAAM,WAAWD,EAA+B,CAC9C,OAAOF,EAAU,OAAO,UAAUE,CAAM,EAAE,CAC5C,EAKA,MAAM,YAAYA,EAAgBK,EAAqC,CACrE,OAAOP,EAAU,KAAK,UAAUE,CAAM,aAAc,CAAE,cAAeK,EAAc,CACrF,EAKA,MAAM,eAAeL,EAA+B,CAClD,OAAOF,EAAU,OAAO,UAAUE,CAAM,YAAY,CACtD,EAKA,MAAM,UAAUA,EAAgBD,EAAgBO,EAAiC,CAC/E,OAAOR,EAAU,KAAK,UAAUE,CAAM,SAAU,CAAE,QAASD,EAAQ,QAAAO,EAAS,CAC9E,CACF,ECjGaC,GAAgBC,GAAY,QAAS,IAAM,CAEtD,MAAMC,EAAQC,EAAY,EAAE,EACtBC,EAAYD,EAAY,EAAE,EAC1BE,EAAcF,EAAI,CAAC,EACnBG,EAAaH,EAAI,CAAC,EAClBI,EAAUJ,EAAI,EAAI,EAClBK,EAAUL,EAAI,EAAK,EACnBM,EAAUN,EAAiB,CAC/B,aAAc,MACd,WAAY,MACZ,QAAS,QAAA,CACV,EAGKO,EAAcC,EAAS,IACnBlB,GAAmBS,EAAM,MAAM,KAAKU,GAAKA,EAAE,KAAOnB,CAAM,CACjE,EAGKoB,EAAY,MAAOC,EAAO,EAAGC,EAAQ,KAAU,WACnDP,EAAQ,MAAQ,GAChB,GAAI,CACF,MAAMQ,EAAoC,MAAM3B,EAAS,QAAQ,CAC/D,KAAAyB,EACA,SAAU,GACV,aAAcL,EAAQ,MAAM,eAAiB,MAAQA,EAAQ,MAAM,aAAe,OAClF,WAAYA,EAAQ,MAAM,aAAe,MAAQA,EAAQ,MAAM,WAAa,OAC5E,QAASA,EAAQ,MAAM,OAAA,CACxB,EAGKQ,EAAY,MAAM,QAAQD,EAAS,IAAI,EAAIA,EAAS,KAAO,CAAA,EAE7DD,EACFX,EAAU,MAAQa,EAElBb,EAAU,MAAM,KAAK,GAAGa,CAAS,EAGnCZ,EAAY,QAAQa,EAAAF,EAAS,aAAT,YAAAE,EAAqB,eAAgBJ,EACzDR,EAAW,QAAQa,EAAAH,EAAS,aAAT,YAAAG,EAAqB,cAAe,EACvDZ,EAAQ,QAAQa,EAAAJ,EAAS,aAAT,YAAAI,EAAqB,WAAY,GAGjDH,EAAU,QAAQI,GAAQ,CACxB,MAAMC,EAAgBpB,EAAM,MAAM,aAAeU,EAAE,KAAOS,EAAK,EAAE,EAC7DC,GAAiB,EACnBpB,EAAM,MAAMoB,CAAa,EAAID,EAE7BnB,EAAM,MAAM,KAAKmB,CAAI,CAEzB,CAAC,CACH,OAASE,EAAO,CACd,cAAQ,MAAM,wBAAyBA,CAAK,EAExCR,IACFX,EAAU,MAAQ,CAAA,GAEdmB,CACR,QAAA,CACEf,EAAQ,MAAQ,EAClB,CACF,EAEMgB,EAAW,SAAY,CACvBjB,EAAQ,OAAS,CAACC,EAAQ,OAC5B,MAAMK,EAAUR,EAAY,MAAQ,EAAG,EAAK,CAEhD,EAEMoB,EAAc,SAAY,CAC9BpB,EAAY,MAAQ,EACpB,MAAMQ,EAAU,EAAG,EAAI,CACzB,EAgGA,MAAO,CAEL,MAAAX,EACA,UAAAE,EACA,YAAAC,EACA,WAAAC,EACA,QAAAC,EACA,QAAAC,EACA,QAAAC,EAGA,YAAAC,EAGA,UAAAG,EACA,SAAAW,EACA,YAAAC,EACA,WA/GiB,MAAOC,GAAkB,CAC1C,GAAI,CACF,MAAMC,EAAU,MAAMtC,EAAS,WAAWqC,CAAQ,EAGlD,OAAAtB,EAAU,MAAM,QAAQuB,CAAO,EAC/BzB,EAAM,MAAM,QAAQyB,CAAO,EAEpBA,CACT,OAASJ,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACR,CACF,EAmGE,WAjGiB,MAAO9B,EAAgBmC,IAAiB,CACzD,GAAI,CACF,MAAMC,EAAc,MAAMxC,EAAS,WAAWI,EAAQmC,CAAO,EAGvDE,EAAY1B,EAAU,MAAM,UAAUQ,GAAKA,EAAE,KAAOnB,CAAM,EAC5DqC,GAAa,IACf1B,EAAU,MAAM0B,CAAS,EAAID,GAG/B,MAAME,EAAa7B,EAAM,MAAM,UAAUU,GAAKA,EAAE,KAAOnB,CAAM,EAC7D,OAAIsC,GAAc,IAChB7B,EAAM,MAAM6B,CAAU,EAAIF,GAGrBA,CACT,OAASN,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACR,CACF,EA8EE,WA5EiB,MAAO9B,GAAmB,CAC3C,GAAI,CACF,MAAMJ,EAAS,WAAWI,CAAM,EAGhCW,EAAU,MAAQA,EAAU,MAAM,OAAOQ,GAAKA,EAAE,KAAOnB,CAAM,EAC7DS,EAAM,MAAQA,EAAM,MAAM,OAAOU,GAAKA,EAAE,KAAOnB,CAAM,CACvD,OAAS8B,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACR,CACF,EAkEE,YAhEkB,MAAO9B,EAAgBK,IAAyB,CAClE,GAAI,CACF,MAAMT,EAAS,YAAYI,EAAQK,CAAY,EAG/C,MAAMuB,EAAOnB,EAAM,MAAM,KAAKU,GAAKA,EAAE,KAAOnB,CAAM,EAC9C4B,IACFA,EAAK,iBAAmBA,EAAK,iBAAmB,GAAK,EAEzD,OAASE,EAAO,CACd,cAAQ,MAAM,2BAA4BA,CAAK,EACzCA,CACR,CACF,EAoDE,eAlDqB,MAAO9B,GAAmB,CAC/C,GAAI,CACF,MAAMJ,EAAS,eAAeI,CAAM,EAGpC,MAAM4B,EAAOnB,EAAM,MAAM,KAAKU,GAAKA,EAAE,KAAOnB,CAAM,EAC9C4B,GAAQA,EAAK,gBAAkB,GACjCA,EAAK,iBAET,OAASE,EAAO,CACd,cAAQ,MAAM,6BAA8BA,CAAK,EAC3CA,CACR,CACF,EAsCE,WApCkBS,GAAqC,CACvDvB,EAAQ,MAAQ,CAAE,GAAGA,EAAQ,MAAO,GAAGuB,CAAA,EACvCP,EAAA,CACF,EAkCE,aAhCmB,IAAM,CACzBhB,EAAQ,MAAQ,CACd,aAAc,MACd,WAAY,MACZ,QAAS,QAAA,EAEXgB,EAAA,CACF,CAyBE,CAEJ,CAAC,+ZCjID,MAAMQ,EAAQC,EAKRC,EAAOC,EACP,CAAE,EAAAC,CAAA,EAAMC,GAAA,EAGRvC,EAAUI,EAAI8B,EAAM,gBAAkB,EAAE,EACxCM,EAAepC,EAAI,EAAK,EACxBoB,EAAQpB,EAAmB,IAAI,EAC/BqC,EAAcrC,EAAgC,IAAI,EAGlDsC,EAAY9B,EAAS,IAAMZ,EAAQ,MAAM,MAAM,EAE/C2C,EAAY/B,EAAS,IAAM,CAC/B,MAAMgC,EAAU5C,EAAQ,MAAM,KAAA,EAC9B,OAAO4C,EAAQ,OAAS,GAAKA,EAAQ,QAAU,KAAQ,CAACJ,EAAa,KACvE,CAAC,EAEKK,EAAmBjC,EAAS,IAC5BsB,EAAM,UAAkBI,EAAE,wBAAwB,EAClDJ,EAAM,gBAAwBI,EAAE,gBAAgB,EAC7CA,EAAE,kBAAkB,CAC5B,EAGKQ,EAAcC,GAAkB,CACpC,MAAMC,EAAWP,EAAY,MACxBO,IAELA,EAAS,MAAM,OAAS,OACxBA,EAAS,MAAM,OAASA,EAAS,aAAe,KAClD,EAEMC,EAAgB,SAAY,SAChC,GAAKN,EAAU,MAEf,CAAAH,EAAa,MAAQ,GACrBhB,EAAM,MAAQ,KAEd,GAAI,CACF,IAAIP,EAEAiB,EAAM,WAERjB,EAAW,MAAMzB,EAAU,MAAM,aAAa0C,EAAM,SAAS,GAAI,CAC/D,QAASlC,EAAQ,MAAM,KAAA,CAAK,CAC7B,EACDoC,EAAK,kBAAmBnB,EAAS,KAAK,IAAI,GACjCiB,EAAM,iBAEfjB,EAAW,MAAMzB,EAAU,KACzB,aAAa0C,EAAM,eAAe,WAClC,CAAE,QAASlC,EAAQ,MAAM,MAAK,CAAE,EAElCoC,EAAK,kBAAmBnB,EAAS,KAAK,IAAI,GACjCiB,EAAM,SAEfjB,EAAW,MAAMzB,EAAU,KAAK,UAAU0C,EAAM,MAAM,YAAa,CACjE,QAASlC,EAAQ,MAAM,KAAA,CAAK,CAC7B,EACDoC,EAAK,kBAAmBnB,EAAS,KAAK,IAAI,GAI5CjB,EAAQ,MAAQ,GACZyC,EAAY,QACdA,EAAY,MAAM,MAAM,OAAS,OAGrC,OAASS,EAAU,CACjB1B,EAAM,QAAQJ,GAAAD,EAAA+B,EAAI,WAAJ,YAAA/B,EAAc,OAAd,YAAAC,EAAoB,UAAWkB,EAAE,uBAAuB,CACxE,QAAA,CACEE,EAAa,MAAQ,EACvB,EACF,EAEMW,EAAS,IAAM,CACnBnD,EAAQ,MAAQkC,EAAM,gBAAkB,GACxCV,EAAM,MAAQ,KACdY,EAAK,QAAQ,CACf,EAGA,OAAAgB,GAAM,IAAMlB,EAAM,eAAiBmB,GAAW,CAC5CrD,EAAQ,MAAQqD,GAAU,EAC5B,CAAC,EAGDC,EAAU,IAAM,CACdR,EAAA,CACF,CAAC,cApKCS,EA8CO,OAAA,CA9CA,WAAgBN,EAAa,CAAA,SAAA,CAAA,EAAE,MAAM,cAAA,GAC1CO,EAwCM,MAxCNC,GAwCM,IAvCJD,EAUY,WAAA,SATN,cAAJ,IAAIf,uCACKzC,EAAO,MAAA0D,GACf,YAAavB,EAAA,aAAewB,EAAArB,CAAA,EAAC,gBAAA,EAC7B,UAAW,IACX,KAAMH,EAAA,KACN,QAAOW,EACP,UAAO,MAAaG,EAAa,CAAA,MAAA,CAAA,EAAA,CAAA,OAAA,CAAA,OACbA,EAAa,CAAA,MAAA,CAAA,EAAA,CAAA,OAAA,CAAA,CAAA,EAClC,MAAM,kBAAA,mBAPGjD,EAAA,KAAO,CAAA,GAUlBwD,EA0BM,MA1BNI,GA0BM,CAzBJJ,EAKO,OAAA,CAJL,MAAKK,EAAA,CAAC,aAAY,CAAA,QACCnB,EAAA,iBAAyBA,EAAA,MAAS,GAAA,CAAA,CAAA,CAAA,EAElDoB,EAAApB,EAAA,KAAS,EAAG,WACjB,CAAA,EAEAc,EAiBM,MAjBNO,GAiBM,CAfI5B,EAAA,gBADRoB,EAQS,SAAA,OANP,KAAK,SACJ,QAAOJ,EACR,MAAM,oBACL,SAAUX,EAAA,KAAA,IAERmB,EAAArB,CAAA,EAAC,iBAAA,CAAA,EAAA,EAAA0B,EAAA,YAENR,EAMS,SAAA,CALP,KAAK,SACJ,SAAQ,CAAGb,EAAA,OAAaH,EAAA,MACzB,MAAM,iBAAA,IAEHA,EAAA,MAAemB,EAAArB,CAAA,EAAC,kBAAA,EAAuBO,EAAA,KAAgB,EAAA,EAAAoB,EAAA,CAAA,OAMvDzC,EAAA,WAAX+B,EAEM,MAFNW,GAEMJ,EADDtC,EAAA,KAAK,EAAA,CAAA,2qBC4Id,MAAMU,EAAQC,EAKRC,EAAOC,EACP,CAAE,EAAAC,CAAA,EAAMC,GAAA,EACR4B,EAAYC,GAAA,EAGZC,EAAYjE,EAAI,EAAK,EACrBkE,EAAgBlE,EAAI,EAAK,EACzBmE,EAAqBnE,EAAI,EAAK,EAC9BoE,EAAkBpE,EAAI,EAAI,EAG1BqE,EAAgB,CACpB,CAAE,KAAM,OAAQ,MAAO,KAAM,MAAO,MAAA,EACpC,CAAE,KAAM,UAAW,MAAO,KAAM,MAAO,SAAA,EACvC,CAAE,KAAM,QAAS,MAAO,KAAM,MAAO,MAAA,EACrC,CAAE,KAAM,QAAS,MAAO,KAAM,MAAO,OAAA,EACrC,CAAE,KAAM,MAAO,MAAO,KAAM,MAAO,KAAA,EACnC,CAAE,KAAM,MAAO,MAAO,KAAM,MAAO,KAAA,EACnC,CAAE,KAAM,QAAS,MAAO,KAAM,MAAO,OAAA,CAAQ,EAIzCC,EAAU9D,EAAS,IAAM,OAC7B,QAAOO,EAAAgD,EAAU,OAAV,YAAAhD,EAAgB,WAAYe,EAAM,QAAQ,SACnD,CAAC,EAEKyC,EAAU/D,EAAS,IAAM,CAC7B,MAAMgE,EAAc,IAAI,KAAK1C,EAAM,QAAQ,UAAU,EAAE,QAAA,EAGvD,OAFY,KAAK,IAAA,EACY0C,GAAe,IAAO,GAC5B,EACzB,CAAC,EAEKC,EAAejE,EAAS,IAAM,CAClC,GAAIsB,EAAM,QAAU,EAAG,MAAO,IAC9B,MAAM4C,EAAa,OAAO,WAAa,IAAM,GAAK,GAClD,MAAO,GAAG5C,EAAM,MAAQ4C,CAAU,IACpC,CAAC,EAGKC,EAAcC,GAAsB,CACxC,MAAMC,EAAO,IAAI,KAAKD,CAAS,EAEzBE,MADU,KAAA,EACG,QAAA,EAAYD,EAAK,QAAA,EAC9BE,EAAW,KAAK,MAAMD,EAAS,GAAK,EAE1C,GAAIC,EAAW,EAAG,OAAO7C,EAAE,kBAAkB,EAC7C,GAAI6C,EAAW,GAAI,OAAO7C,EAAE,sBAAuB,CAAE,MAAO6C,EAAU,EAEtE,MAAMC,EAAY,KAAK,MAAMD,EAAW,EAAE,EAC1C,GAAIC,EAAY,GAAI,OAAO9C,EAAE,oBAAqB,CAAE,MAAO8C,EAAW,EAEtE,MAAMC,GAAW,KAAK,MAAMD,EAAY,EAAE,EAC1C,OAAIC,GAAW,EAAU/C,EAAE,mBAAoB,CAAE,MAAO+C,GAAU,EAE3DJ,EAAK,mBAAA,CACd,EAEMK,EAAeC,GACfA,GAAS,KAAiBA,EAAQ,KAAS,QAAQ,CAAC,EAAI,IACxDA,GAAS,KAAcA,EAAQ,KAAM,QAAQ,CAAC,EAAI,IAC/CA,EAAM,SAAA,EAGTC,EAAoBC,GAAiB,CACzC,MAAMC,EAAWjB,EAAc,KAAKkB,GAAKA,EAAE,OAASF,CAAI,EACxD,OAAOC,GAAA,YAAAA,EAAU,QAAS,IAC5B,EAEME,EAAY,IAAM,CACjBjB,EAAQ,QACbN,EAAU,MAAQ,GACpB,EAEMwB,EAAgB,SAAY,CAChC,GAAK,QAAQvD,EAAE,wBAAwB,CAAC,EAExC,GAAI,CACF,MAAM9C,EAAU,OAAO,aAAa0C,EAAM,QAAQ,UAAU,EAAE,EAC9DE,EAAK,kBAAmBF,EAAM,QAAQ,UAAU,CAClD,OAASV,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,CAClD,CACF,EAEMsE,EAAc,IAAM,CACxBxB,EAAc,MAAQ,CAACA,EAAc,MACjCA,EAAc,QAChBC,EAAmB,MAAQ,GAE/B,EAEMwB,EAAgB,IAAM,CAC1BvB,EAAgB,MAAQ,CAACA,EAAgB,KAC3C,EAEMwB,EAAuB,IAAM,CACjCzB,EAAmB,MAAQ,CAACA,EAAmB,MAC3CA,EAAmB,QACrBD,EAAc,MAAQ,GAE1B,EAEM2B,EAAiB,MAAOlG,GAAyB,CACrD,GAAI,CACF,MAAMkB,EAAW,MAAMzB,EAAU,KAC/B,aAAa0C,EAAM,QAAQ,UAAU,aACrC,CAAE,cAAenC,CAAA,CAAa,EAIhCmC,EAAM,QAAQ,eAAiBjB,EAAS,KAAK,KAAK,eAClDiB,EAAM,QAAQ,WAAajB,EAAS,KAAK,KAAK,WAC9CiB,EAAM,QAAQ,cAAgBjB,EAAS,KAAK,KAAK,cAG7CA,EAAS,KAAK,KAAK,SAAW,UAChCiB,EAAM,QAAQ,cAAgB,KAE9BA,EAAM,QAAQ,cAAgBnC,EAGhCwE,EAAmB,MAAQ,EAC7B,OAAS/C,EAAO,CACd,QAAQ,MAAM,mBAAoBA,CAAK,CACzC,CACF,EAEM0E,EAAaC,GAA4B,CAC7C9B,EAAU,MAAQ,GAClBjC,EAAK,kBAAmB+D,CAAc,CACxC,EAEMC,EAAkBC,GAAmB,CACzC/B,EAAc,MAAQ,GAGjBpC,EAAM,QAAQ,UACjBA,EAAM,QAAQ,QAAU,CAAA,GAE1BA,EAAM,QAAQ,QAAQ,KAAKmE,CAAK,EAChCnE,EAAM,QAAQ,cAEdE,EAAK,gBAAiBiE,CAAK,CAC7B,0EA7UE9C,EA0IM,MAAA,CAzIJ,MAAKM,EAAA,CAAC,eAAc,SACH1B,EAAA,KAAK,EAAA,CAAA,EACrB,qBAAqB0C,EAAA,MAAY,CAAA,GAElCrB,EAoCM,MApCNC,GAoCM,CAnCJD,EAIE,MAAA,CAHC,IAAKrB,EAAA,QAAQ,eAAa,sBAC1B,IAAKA,EAAA,QAAQ,YACd,MAAM,QAAA,aAERqB,EAWM,MAXNI,GAWM,CAVJ0C,EAKcC,EAAA,CAJX,GAAE,UAAYpE,EAAA,QAAQ,SAAS,GAChC,MAAM,aAAA,aAEN,IAAyB,CAAtBqE,EAAA1C,EAAA3B,EAAA,QAAQ,WAAW,EAAA,CAAA,CAAA,kBAExBqB,EAAmE,OAAnEO,GAAmED,EAAxCiB,EAAW5C,EAAA,QAAQ,UAAU,CAAA,EAAA,CAAA,EAC5CA,EAAA,QAAQ,eAApBoB,EAEO,OAFPS,GAEOF,EADFH,EAAArB,CAAA,EAAC,iBAAA,CAAA,EAAA,CAAA,cAI2BoC,EAAA,OAAnC+B,EAAA,EAAAlD,EAgBM,MAhBNU,GAgBM,CAfJT,EAOS,SAAA,CANN,QAAOoC,EACP,UAAWjB,EAAA,MACX,MAAOA,EAAA,MAAUhB,EAAArB,CAAA,mBAAqBqB,EAAArB,CAAA,EAAC,sBAAA,EACxC,MAAM,YAAA,mBAENkB,EAAe,YAAT,KAAE,EAAA,CAAA,UAEVA,EAMS,SAAA,CALN,QAAOqC,EACP,MAAOlC,EAAArB,CAAA,EAAC,iBAAA,EACT,MAAM,YAAA,mBAENkB,EAAgB,YAAV,MAAG,EAAA,CAAA,wBAKfA,EAWM,MAXNkD,GAWM,CAVMrC,EAAA,WACVsC,EAQEC,GAAA,OANC,aAAYzE,EAAA,QAAQ,WACpB,kBAAiBA,EAAA,QAAQ,aACzB,cAAa,GACb,KAAM,EACN,iBAAiB+D,EACjB,wBAAQ7B,EAAA,MAAS,GAAA,iDARpBd,EAAuD,IAAA,OAAlC,UAAQpB,EAAA,QAAQ,YAAA,gBAYvCqB,EAiCM,MAjCNqD,GAiCM,CAhCJrD,EAYS,SAAA,CAXP,MAAKK,EAAA,CAAC,eAAc,CAAA,OAEF1B,EAAA,QAAQ,aAAA,CAAa,CAAA,EADtC,QAAO6D,CAAA,GAGI7D,EAAA,QAAQ,eAApBsE,EAAA,EAAAlD,EAEO,OAFPuD,GAEOhD,EADF0B,EAAiBrD,EAAA,QAAQ,aAAa,CAAA,EAAA,CAAA,IAE3CsE,IAAAlD,EAAsB,UAAT,IAAE,GACHpB,EAAA,QAAQ,eAAc,GAAlCsE,IAAAlD,EAEO,OAFPwD,GAEOjD,EADFwB,EAAYnD,EAAA,QAAQ,cAAc,CAAA,EAAA,CAAA,gBAKjCA,EAAA,MAAQA,EAAA,cADhBoB,EASS,SAAA,OAPN,QAAOuC,EACR,MAAM,WAAA,GAEHU,EAAA1C,EAAAH,EAAArB,CAAA,qBAAsB,IACzB,CAAA,EAAYH,EAAA,QAAQ,YAAW,OAA/BoB,EAEO,OAFPyD,GAAmD,OAC7C7E,EAAA,QAAQ,WAAW,EAAG,KAC5B,CAAA,wBAIMA,EAAA,QAAQ,YAAW,GAAQA,EAAA,QAAQ,aAD3CoB,EAMS,SAAA,OAJN,QAAOwC,EACR,MAAM,cAAA,IAEHvB,EAAA,MAAkBb,EAAArB,CAAA,EAAC,sBAAA,EAA2BqB,EAAArB,CAAA,EAAC,sBAAA,CAAA,EAAA,CAAA,cAM9CiC,EAAA,WADRhB,EAkBM,MAAA,OAhBJ,MAAM,kBACL,sBAAD,IAAA,CAAA,EAAW,CAAA,MAAA,CAAA,EAAA,QAEXA,EASS0D,EAAA,KAAAC,EARYzC,EAAZiB,GADTlC,EASS,SAAA,CAPN,IAAKkC,EAAS,KACd,QAAKhC,GAAEuC,EAAeP,EAAS,IAAI,EACpC,MAAK7B,EAAA,CAAC,kBAAiB,CAAA,SACH1B,EAAA,QAAQ,gBAAkBuD,EAAS,IAAA,CAAI,CAAA,EAC1D,MAAOA,EAAS,KAAA,EAEd5B,EAAA4B,EAAS,KAAK,EAAA,GAAAyB,EAAA,QAEnB3D,EAES,SAAA,CAFA,uBAAOe,EAAA,MAAkB,IAAU,MAAM,cAAA,EAAe,KAEjE,CAAA,aAISD,EAAA,OAAXmC,EAAA,EAAAlD,EASM,MATN6D,GASM,CARJd,EAOEM,GAAA,CANC,UAASzE,EAAA,OACT,oBAAmBA,EAAA,QAAQ,WAC3B,YAAawB,EAAArB,CAAA,EAAC,qBAAA,EACd,KAAM,EACN,iBAAiB8D,EACjB,wBAAQ9B,EAAA,MAAa,GAAA,oEAKfE,EAAA,OAAmBrC,UAAQ,SAAWA,EAAA,QAAQ,QAAQ,OAAM,GAAvEsE,EAAA,EAAAlD,EAYM,MAZN8D,GAYM,EAXJZ,EAAA,EAAA,EAAAlD,EAUE0D,EAAA,KAAAC,EATgB/E,EAAA,QAAQ,QAAjBkE,QADTM,EAUEW,EAAA,CARC,IAAKjB,EAAM,WACX,QAASA,EACT,UAASlE,EAAA,OACT,MAAOA,EAAA,MAAK,EACZ,YAAWA,EAAA,SACX,eAAaoF,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA7D,GAAE8D,EAAAA,MAAK,gBAAkB9D,CAAM,GAC5C,iBAAe6D,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA7D,GAAE8D,EAAAA,MAAK,kBAAoB9D,CAAM,GAChD,iBAAe6D,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA7D,GAAE8D,EAAAA,MAAK,kBAAoB9D,CAAM,EAAA,4mBCvCzD,MAAMxB,EAAQC,EAKR,CAAE,CAAA,EAAMI,GAAA,EAGRkF,EAAWrH,EAAe8B,EAAM,eAAe,EAC/CzB,EAAUL,EAAI,EAAK,EACnBI,EAAUJ,EAAI,EAAK,EACnBsH,EAAStH,EAAI,aAAa,EAC1BuH,EAAavH,EAAI,CAAC,EAClBwH,EAAexH,EAAmB,IAAI,EAGtCyH,EAAmBjH,EAAS,IACzB6G,EAAS,MAAM,OAAOK,GAAK,CAACA,EAAE,iBAAiB,CACvD,EAGKC,EAAgB,SAAY,CAChCtH,EAAQ,MAAQ,GAEhB,GAAI,CACF,MAAMQ,EAAW,MAAMzB,EAAU,IAAI,UAAU0C,EAAM,MAAM,YAAa,CACtE,OAAQ,CACN,KAAMwF,EAAO,MACb,MAAO,EAAA,CACT,CACD,EAEDD,EAAS,MAAQxG,EAAS,KAAK,KAAK,UAAY,CAAA,EAChDT,EAAQ,MAAQS,EAAS,KAAK,KAAK,UAAY,GAC/C0G,EAAW,MAAQ1G,EAAS,KAAK,KAAK,OAAS,EAG/C+G,EAAA,CAEF,OAASxG,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,CAClD,QAAA,CACEf,EAAQ,MAAQ,EAClB,CACF,EAEMuH,EAAmB,IAAM,CAE7B,MAAMC,MAAiB,IACvBR,EAAS,MAAM,QAAQS,GAAW,CAChCA,EAAQ,QAAU,CAAA,EAClBD,EAAW,IAAIC,EAAQ,WAAYA,CAAO,CAC5C,CAAC,EAGDT,EAAS,MAAM,QAAQS,GAAW,CAChC,GAAIA,EAAQ,kBAAmB,CAC7B,MAAMC,EAASF,EAAW,IAAIC,EAAQ,iBAAiB,EACnDC,GAAUA,EAAO,SACnBA,EAAO,QAAQ,KAAKD,CAAO,CAE/B,CACF,CAAC,CACH,EAEMzG,EAAW,SAAY,CAG3B,QAAQ,IAAI,oBAAoB,CAClC,EAEM2G,EAAoBF,GAAqB,CAE7CT,EAAS,MAAM,QAAQS,CAAO,EAC9BP,EAAW,QACXK,EAAA,CACF,EAEM5B,EAAkBC,GAAmB,CAEzCsB,EAAW,OACb,EAEMU,EAAoBlC,GAA4B,CACpD,MAAMrG,EAAQ2H,EAAS,MAAM,aAAeK,EAAE,aAAe3B,EAAe,UAAU,EAClFrG,IAAU,KACZ2H,EAAS,MAAM3H,CAAK,EAAI,CAAE,GAAG2H,EAAS,MAAM3H,CAAK,EAAG,GAAGqG,CAAA,EACvD6B,EAAA,EAEJ,EAEMM,EAAoBC,GAAsB,CAC9Cd,EAAS,MAAQA,EAAS,MAAM,OAAOK,GAAKA,EAAE,aAAeS,CAAS,EACtEZ,EAAW,QACXK,EAAA,CACF,EAEMQ,EAAe,IAAM,CAEzBZ,EAAa,MAAQ,OAAO,YAAY,IAAM,CACvCnH,EAAQ,OACXsH,EAAA,CAEJ,EAAG,GAAK,CACV,EAEMU,EAAc,IAAM,CACpBb,EAAa,QACf,cAAcA,EAAa,KAAK,EAChCA,EAAa,MAAQ,KAEzB,EAGA,OAAAtE,EAAU,IAAM,CACVmE,EAAS,MAAM,SAAW,EAC5BM,EAAA,GAEAC,EAAA,EACAL,EAAW,MAAQF,EAAS,MAAM,QAEpCe,EAAA,CACF,CAAC,EAEDE,GAAY,IAAM,CAChBD,EAAA,CACF,CAAC,UA9NChC,EAAA,EAAAlD,EAyDM,MAzDNE,GAyDM,CAxDJD,EAYM,MAZNmF,GAYM,CAXJnF,EAEK,KAFLI,GAEKE,EADAH,EAAA,CAAA,qBAAsB,KAAEG,EAAG6D,EAAA,KAAU,EAAG,KAC7C,CAAA,EAEAnE,EAMM,MANNO,GAMM,IALJP,EAIS,SAAA,sCAJQkE,EAAM,MAAAhE,GAAE,MAAM,cAAe,SAAQqE,CAAA,GACpDvE,EAAmE,SAAnEQ,GAAmEF,EAApCH,EAAA,CAAA,EAAC,qBAAA,CAAA,EAAA,CAAA,EAChCH,EAAoE,SAApES,GAAoEH,EAApCH,EAAA,CAAA,EAAC,qBAAA,CAAA,EAAA,CAAA,EACjCH,EAAoE,SAApEU,GAAoEJ,EAAvCH,EAAA,CAAA,EAAC,wBAAA,CAAA,EAAA,CAAA,CAAA,YAHf+D,EAAA,KAAM,CAAA,OAQhBvF,EAAA,eAAXsE,EAAA,EAAAlD,EAMM,MANNqF,GAMM,CALJtC,EAIEM,GAAA,CAHC,UAASzE,EAAA,OACT,cAAa,GACb,iBAAAiG,CAAA,kCAIM3H,EAAA,OAAWgH,EAAA,MAAS,SAAM,GAArChB,IAAAlD,EAGM,MAHNmD,GAGM,aAFJlD,EAA2B,MAAA,CAAtB,MAAM,SAAA,EAAS,KAAA,EAAA,GACpBA,EAAkC,WAA5BG,EAAA,CAAA,EAAC,kBAAA,CAAA,EAAA,CAAA,CAAA,IAGO8D,EAAA,MAAS,SAAM,GAA/BhB,IAAAlD,EAEM,MAFNsF,GAEM,CADJrF,EAAqC,WAA/BG,EAAA,CAAA,EAAC,qBAAA,CAAA,EAAA,CAAA,CAAA,KAGT8C,EAAA,EAAAlD,EAYM,MAZNsD,GAYM,QAXJtD,EAUE0D,EAAA,KAAAC,EATkBW,EAAA,MAAXK,QADTvB,EAUEmC,GAAA,CARC,IAAKZ,EAAQ,WACb,QAAAA,EACA,UAAS/F,EAAA,OACT,MAAO,EACP,YAAW,EACX,eAAAiE,EACA,iBAAAiC,EACA,iBAAAC,CAAA,2CAKG9H,EAAA,QAAYC,EAAA,WADpB8C,EAMS,SAAA,OAJN,QAAO9B,EACR,MAAM,eAAA,IAEHkC,EAAA,CAAA,EAAC,mBAAA,CAAA,EAAA,CAAA,YAGKlD,EAAA,OAAWgH,EAAA,MAAS,OAAM,GAArChB,IAAAlD,EAEM,MAFNuD,GAEM,CAAA,GAAAS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CADJ/D,EAAiC,MAAA,CAA5B,MAAM,eAAA,EAAe,KAAA,EAAA,CAAA,iYCEhC,MAAMtB,EAAQC,EACRC,EAAOC,EAQP8B,EAAYC,GAAA,EACZ2E,EAAe3I,EAAI,EAAK,EACxB4I,EAAapI,EAAS,IAAM,EAAK,EACjC+D,EAAU/D,EAAS,WAAM,QAAAO,EAAAgD,EAAU,OAAV,YAAAhD,EAAgB,MAAOe,EAAM,KAAK,QAAO,EAElE6C,EAAcE,GAAiBgE,GAAmBhE,CAAI,EACtDiE,EAAiB,IAAM9G,EAAK,QAAS,MAAM,EAC3C+G,EAAiB,IAAM,CAC3BJ,EAAa,MAAQ,CAACA,EAAa,KACrC,qDA3EE,OAAAtC,EAAA,EAAAlD,EA6CU,UA7CVE,GA6CU,CA5CRD,EAeM,MAfNmF,GAeM,CAdJrC,EAA2G8C,GAAA,CAA/F,KAAKjI,EAAAgB,EAAA,KAAK,OAAL,YAAAhB,EAAW,WAAa,OAAMC,EAAAe,EAAA,KAAK,OAAL,YAAAf,EAAW,iBAAgBC,EAAAc,EAAA,KAAK,OAAL,YAAAd,EAAW,UAAU,KAAK,IAAA,yBACpGmC,EAKM,MALNI,GAKM,CAJJ0C,EAEcC,EAAA,CAFA,GAAE,aAAc8C,EAAAlH,EAAA,KAAK,OAAL,YAAAkH,EAAW,QAAQ,GAAI,MAAM,aAAA,aACzD,IAAA,SAAoD,aAAjDlI,EAAAgB,EAAA,KAAK,OAAL,YAAAhB,EAAW,iBAAgBC,EAAAe,EAAA,KAAK,OAAL,YAAAf,EAAW,SAAQ,EAAA,CAAA,CAAA,mBAEnDoC,EAAgE,OAAhEO,GAAgED,EAArCiB,EAAW5C,EAAA,KAAK,UAAU,CAAA,EAAA,CAAA,CAAA,GAEpCwC,EAAA,WAAnBgC,EAMc2C,GAAA,OANc,SAAS,cAAA,GACxB,UACT,IAAmC,CAAA,GAAA/B,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAAnC/D,EAAmC,SAAA,CAA3B,MAAM,UAAA,EAAW,IAAC,EAAA,CAAA,eAE5B,IAAkE,CAAlEA,EAAkE,SAAA,CAA1D,MAAM,gBAAiB,uBAAOgE,EAAAA,MAAK,MAAA,EAAA,EAAU,MAAI,EACzDhE,EAA6E,SAAA,CAArE,MAAM,uBAAwB,uBAAOgE,EAAAA,MAAK,QAAA,EAAA,EAAY,QAAM,CAAA,qBAIxEhE,EAA2E,MAAA,CAAtE,MAAM,eAAe,UAAQrB,EAAA,KAAK,cAAgBA,EAAA,KAAK,OAAA,aAEjDA,EAAA,KAAK,OAASA,OAAK,MAAM,QAApCsE,EAAA,EAAAlD,EAEM,MAFNU,GAEM,EADJwC,EAAA,EAAA,EAAAlD,EAAyF0D,EAAA,KAAAC,EAApE/E,EAAA,KAAK,MAAdoH,QAAZhG,EAAyF,MAAA,CAAvD,IAAKgG,EAAM,GAAK,IAAKA,EAAM,UAAY,IAAK,OAAA,iCAGhF/F,EAaM,MAbNoF,GAaM,CAZJpF,EAGS,SAAA,CAHD,MAAM,aAAc,QAAO0F,CAAA,GACjC1F,EAA2C,cAAlCwF,EAAA,MAAU,KAAA,IAAA,EAAA,CAAA,EACP7G,EAAA,KAAK,qBAAjBoB,EAAmE,OAAAmD,GAAA5C,EAA9B3B,EAAA,KAAK,eAAe,EAAA,CAAA,cAE3DqB,EAGS,SAAA,CAHD,MAAM,aAAc,QAAO2F,CAAA,GACjC5B,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA/D,EAAe,YAAT,KAAE,EAAA,GACIrB,EAAA,KAAK,oBAAjBoB,EAAiE,OAAAsF,GAAA/E,EAA7B3B,EAAA,KAAK,cAAc,EAAA,CAAA,cAEzDqB,EAGS,SAAA,CAHD,MAAM,aAAc,uBAAOgE,EAAAA,MAAK,OAAA,EAAA,GACtCD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA/D,EAAe,YAAT,KAAE,EAAA,GACIrB,EAAA,KAAK,kBAAjBoB,EAA6D,OAAAsD,GAAA/C,EAA3B3B,EAAA,KAAK,YAAY,EAAA,CAAA,gBAM/C4G,EAAA,WADRpC,EAIE6C,GAAA,OAFC,UAASrH,EAAA,KAAK,QACd,iBAAgB,EAAA,6TC/BvB,MAAMC,EAAOC,EAQPoH,EAAc,CAACC,EAAYjE,IAAiBrD,EAAK,QAASsH,EAAIjE,CAAI,EAClEkE,EAAiBD,GAAetH,EAAK,UAAWsH,CAAE,EAClDE,EAAeF,GAAetH,EAAK,QAASsH,CAAE,EAC9CG,EAAcH,GAAetH,EAAK,OAAQsH,CAAE,EAC5CI,EAAgBJ,GAAetH,EAAK,SAAUsH,CAAE,gBAxBpDjD,EAAA,EAAAlD,EAIM,MAJNE,GAIM,QAHJF,EAAgO0D,EAAA,KAAAC,EAAvM/E,EAAA,MAARb,QAAjBqF,EAAgOoD,GAAA,CAA/L,IAAKzI,EAAK,GAAK,KAAAA,EAAa,WAAOmI,EAAYnI,EAAK,GAAIoC,CAAM,EAAI,UAAOA,GAAEiG,EAAcrI,EAAK,EAAE,EAAI,QAAKoC,GAAEkG,EAAYtI,EAAK,EAAE,EAAI,OAAIoC,GAAEmG,EAAWvI,EAAK,EAAE,EAAI,SAAMoC,GAAEoG,EAAaxI,EAAK,EAAE,CAAA,+EAChNa,EAAA,SAAXsE,IAAAlD,EAA4F,MAA5FoF,GAA4F,CAAA,GAAApB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAAxD/D,EAA2B,MAAA,CAAtB,MAAM,SAAA,EAAS,KAAA,EAAA,EAAOA,EAAuB,SAApB,mBAAgB,EAAA,CAAA,eACtE,CAAArB,EAAA,UAAYA,EAAA,aAAxBoB,EAAwE,MAAxEK,GAAqD,eAAa,6VCiCtE,MAAM1B,EAAQC,EAKRC,EAAOC,EAIP2H,EAAepJ,EAAS,IAAM,CAClC,QACA,SAASsB,EAAM,IAAI,EAAA,CACpB,EAEK+H,EAAQ,IAAM,CACd/H,EAAM,WACRE,EAAK,oBAAqB,EAAK,CAEnC,EAEM8H,EAAqB,IAAM,CAC/BD,EAAA,CACF,EAEME,EAAgBpH,GAAyB,CACzCA,EAAM,MAAQ,UAAYb,EAAM,YAClC+H,EAAA,CAEJ,EAEA,OAAA3G,EAAU,IAAM,CACd,SAAS,iBAAiB,UAAW6G,CAAY,CACnD,CAAC,EAEDzB,GAAY,IAAM,CAChB,SAAS,oBAAoB,UAAWyB,CAAY,CACtD,CAAC,cAxECxD,EA6BWyD,GAAA,CA7BD,GAAG,QAAM,CACjB9D,EA2Ba+D,GAAA,CA3BD,KAAK,SAAO,WACtB,IAyBM,CAzBKlI,EAAA,gBAAXoB,EAyBM,MAAA,OAzBiB,MAAM,gBAAiB,QAAO2G,CAAA,GACnD1G,EAuBM,MAAA,CAvBA,QAAOwG,EAAA,KAAY,EAAE,KAAK,SAAS,aAAW,OAAQ,sBAAD,IAAA,CAAA,EAAW,CAAA,MAAA,CAAA,EAAA,GAEzD7H,EAAA,OAASA,EAAA,WAApBsE,IAAAlD,EAUM,MAVNE,GAUM,CATMtB,EAAA,WAAVoB,EAAqD,KAArDoF,GAAqD7E,EAAb3B,EAAA,KAAK,EAAA,CAAA,YAErCA,EAAA,eADRoB,EAOS,SAAA,OALP,MAAM,cACN,aAAW,cACV,QAAO0G,CAAA,EACT,KAED,wBAIFzG,EAEM,MAFNI,GAEM,CADJ0G,GAAQC,EAAA,OAAA,UAAA,CAAA,EAAA,OAAA,EAAA,CAAA,GAICC,EAAAA,OAAO,QAAlB/D,IAAAlD,EAEM,MAFNQ,GAEM,CADJuG,GAAsBC,EAAA,OAAA,SAAA,CAAA,EAAA,OAAA,EAAA,CAAA,8OCPlC,MAAMrI,EAAQC,EACRC,EAAOC,EAEPoI,EAASrK,EAAI8B,EAAM,UAAU,EAC7BlC,EAAUI,EAAI,EAAE,EAChBsK,EAAQtK,EAAY,EAAE,EACtBuK,EAAYvK,EAAA,EACZK,EAAUL,EAAI,EAAK,EAEnBwK,EAAoBC,GAAa,CACrC,MAAMC,EAASD,EAAE,OACbC,EAAO,QAAOJ,EAAM,MAAQ,MAAM,KAAKI,EAAO,KAAK,EACzD,EAEMC,EAAe,IAAM,CACpB/K,EAAQ,MAAM,SACnBoC,EAAK,SAAU,CAAE,QAASF,EAAM,OAAQ,QAASlC,EAAQ,MAAO,YAAa0K,EAAM,KAAA,CAAO,EAC1F1K,EAAQ,MAAQ,GAChB0K,EAAM,MAAQ,CAAA,EACdtI,EAAK,oBAAqB,EAAK,EACjC,oBArCEuE,EASWqE,GAAA,YATQP,EAAA,2CAAAA,EAAM,MAAA/G,GAAE,MAAM,cAAc,KAAK,IAAA,aAClD,IAOO,CAPPF,EAOO,OAAA,CAPA,WAAgBuH,EAAY,CAAA,SAAA,CAAA,CAAA,MACjCvH,EAAsG,WAAA,sCAAnFxD,EAAO,MAAA0D,GAAE,YAAY,uBAAuB,KAAK,IAAI,MAAM,YAAA,iBAA3D1D,EAAA,KAAO,CAAA,GAC1BwD,EAIM,MAJNC,GAIM,CAHJD,EAAyG,QAAA,CAAlG,KAAK,eAAW,YAAJ,IAAImH,EAAa,SAAQC,EAAkB,OAAO,kBAAkB,SAAA,GAAS,OAAA,EAAA,YAChGtE,EAA6F2E,EAAA,CAAlF,KAAK,SAAS,QAAQ,QAAS,QAAK1D,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA7D,GAAA,OAAE,OAAAvC,EAAAwJ,EAAA,QAAA,YAAAxJ,EAAW,SAAK,aAAI,IAAY,CAAA,GAAAoG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAZ,eAAY,EAAA,CAAA,WACjFjB,EAA8E2E,EAAA,CAAnE,KAAK,SAAS,QAAQ,UAAW,QAASxK,EAAA,KAAA,aAAS,IAAI,CAAA,GAAA8G,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAJ,OAAI,EAAA,CAAA,wGCL7D2D,GAAoB,CAACC,EAAsBC,EAAU,CAAE,UAAW,MAAU,CACvF,MAAMC,EAAYjL,EAAA,EACZkL,EAAYlL,EAAI,EAAK,EAErBmL,EAAe,IAAM,CACzB,GAAI,CAACF,EAAU,OAASC,EAAU,MAAO,OAEzC,KAAM,CAAE,UAAAE,EAAW,aAAAC,EAAc,aAAAC,CAAA,EAAiBL,EAAU,OAClCG,EAAYE,GAAgBD,GAE9BL,EAAQ,YAC9BE,EAAU,MAAQ,GAClBH,EAAA,EACA,WAAW,IAAM,CAAEG,EAAU,MAAQ,EAAM,EAAG,GAAI,EAEtD,EAEA,OAAAhI,EAAU,IAAM,QACdnC,EAAAkK,EAAU,QAAV,MAAAlK,EAAiB,iBAAiB,SAAUoK,GAC5C,OAAO,iBAAiB,SAAUA,CAAY,CAChD,CAAC,EAED7C,GAAY,IAAM,QAChBvH,EAAAkK,EAAU,QAAV,MAAAlK,EAAiB,oBAAoB,SAAUoK,GAC/C,OAAO,oBAAoB,SAAUA,CAAY,CACnD,CAAC,EAEM,CAAE,UAAAF,EAAW,UAAAC,CAAA,CACtB,mFCXA,MAAMK,EAAa1L,GAAA,EACb2L,EAAiBxL,EAAI,EAAK,EAC1ByL,EAAgBzL,EAAI,CAAC,EAE3BkD,EAAU,IAAM,CACdqI,EAAW,UAAA,CACb,CAAC,EAEDT,GAAkB,IAAM,CAClBS,EAAW,SAAW,CAACA,EAAW,SACpCA,EAAW,SAAA,CAEf,CAAC,EAED,MAAMG,EAAmB,MAAOnM,GAAc,CAC5C,MAAMgM,EAAW,WAAWhM,CAAI,CAClC,EAEM8J,EAAc,CAAC/J,EAAgB+F,IAAiB,CACpDkG,EAAW,YAAYjM,EAAQ+F,CAAI,CACrC,EAEMkE,EAAiBjK,GAAmB,CACxC,QAAQ,IAAI,kBAAmBA,CAAM,CACvC,EAEMkK,EAAelK,GAAmB,CACtC,QAAQ,IAAI,aAAcA,CAAM,CAClC,EAEMmK,EAAcnK,GAAmB,CACrC,QAAQ,IAAI,YAAaA,CAAM,CACjC,EAEMoK,EAAe,MAAOpK,GAAmB,CACzC,QAAQ,mBAAmB,GAC7B,MAAMiM,EAAW,WAAWjM,CAAM,CAEtC,gBAxDE+G,EAAA,EAAAlD,EAOM,MAPNE,GAOM,CANJD,EAGM,MAHNmF,GAGM,CAFJpB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA/D,EAAkB,UAAd,YAAS,EAAA,GACb8C,EAAqF2E,EAAA,CAA1E,QAAQ,UAAW,uBAAOW,EAAA,MAAc,GAAA,aAAS,IAAa,CAAA,GAAArE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAb,gBAAa,EAAA,CAAA,aAE3EjB,EAAoNyF,GAAA,CAAzM,MAAOpI,EAAAgI,CAAA,EAAW,UAAY,QAAShI,EAAAgI,CAAA,EAAW,QAAU,WAAUhI,EAAAgI,CAAA,EAAW,QAAU,QAAOlC,EAAc,UAASE,EAAgB,QAAOC,EAAc,OAAMC,EAAa,SAAQC,CAAA,yCACpMxD,EAA4F0F,GAAA,YAAtEJ,EAAA,2CAAAA,EAAc,MAAAlI,GAAG,UAASmI,EAAA,MAAgB,SAAQC,CAAA"}