{"version":3,"file":"ReactionPicker-DE7VVgVc.js","sources":["../../frontend/src/services/api/posts.ts","../../frontend/src/composables/useReactions.ts","../../frontend/src/components/social/ReactionPicker.vue"],"sourcesContent":["import apiClient from './client'\r\nimport type { Post, PaginatedResponse } from '@/types/models'\r\nimport type { CreatePostRequest } from '@/types/api'\r\n\r\nexport const postsAPI = {\r\n  /**\r\n   * Get posts feed\r\n   */\r\n  async getFeed(params?: {\r\n    page?: number\r\n    per_page?: number\r\n    content_type?: string\r\n    time_range?: string\r\n    sort_by?: string\r\n  }): Promise<PaginatedResponse<Post>> {\r\n    return apiClient.get('/posts/feed', params)\r\n  },\r\n\r\n  /**\r\n   * Get posts from a specific wall\r\n   */\r\n  async getWallPosts(wallId: number, params?: {\r\n    page?: number\r\n    per_page?: number\r\n  }): Promise<PaginatedResponse<Post>> {\r\n    return apiClient.get(`/walls/${wallId}/posts`, params)\r\n  },\r\n\r\n  /**\r\n   * Get a single post by ID\r\n   */\r\n  async getPost(postId: number): Promise<Post> {\r\n    return apiClient.get(`/posts/${postId}`)\r\n  },\r\n\r\n  /**\r\n   * Create a new post\r\n   */\r\n  async createPost(data: CreatePostRequest): Promise<Post> {\r\n    const formData = new FormData()\r\n    \r\n    formData.append('wall_id', data.wall_id.toString())\r\n    formData.append('content', data.content)\r\n    \r\n    if (data.post_type) {\r\n      formData.append('post_type', data.post_type)\r\n    }\r\n    \r\n    if (data.visibility) {\r\n      formData.append('visibility', data.visibility)\r\n    }\r\n    \r\n    if (data.ai_application_id) {\r\n      formData.append('ai_application_id', data.ai_application_id.toString())\r\n    }\r\n    \r\n    if (data.media_files) {\r\n      data.media_files.forEach((file, index) => {\r\n        formData.append(`media_files[${index}]`, file)\r\n      })\r\n    }\r\n    \r\n    return apiClient.upload('/posts', formData)\r\n  },\r\n\r\n  /**\r\n   * Update a post\r\n   */\r\n  async updatePost(postId: number, data: {\r\n    content?: string\r\n    visibility?: string\r\n  }): Promise<Post> {\r\n    return apiClient.patch(`/posts/${postId}`, data)\r\n  },\r\n\r\n  /**\r\n   * Delete a post\r\n   */\r\n  async deletePost(postId: number): Promise<void> {\r\n    return apiClient.delete(`/posts/${postId}`)\r\n  },\r\n\r\n  /**\r\n   * React to a post\r\n   */\r\n  async reactToPost(postId: number, reactionType: string): Promise<void> {\r\n    return apiClient.post(`/posts/${postId}/reactions`, { reaction_type: reactionType })\r\n  },\r\n\r\n  /**\r\n   * Remove reaction from a post\r\n   */\r\n  async removeReaction(postId: number): Promise<void> {\r\n    return apiClient.delete(`/posts/${postId}/reactions`)\r\n  },\r\n\r\n  /**\r\n   * Share a post\r\n   */\r\n  async sharePost(postId: number, wallId: number, content?: string): Promise<Post> {\r\n    return apiClient.post(`/posts/${postId}/share`, { wall_id: wallId, content })\r\n  },\r\n\r\n  /**\r\n   * Increment post view count\r\n   */\r\n  async incrementViewCount(postId: number): Promise<void> {\r\n    return apiClient.post(`/posts/${postId}/view`)\r\n  },\r\n\r\n  /**\r\n   * Batch increment post view counts\r\n   */\r\n  async batchIncrementViewCounts(postIds: number[]): Promise<void> {\r\n    return apiClient.post('/posts/batch-view', { post_ids: postIds })\r\n  },\r\n\r\n  /**\r\n   * Increment post open count\r\n   */\r\n  async incrementOpenCount(postId: number): Promise<void> {\r\n    return apiClient.post(`/posts/${postId}/open`)\r\n  }\r\n}\r\n\r\nexport default postsAPI","import { ref, Ref, computed } from 'vue'\r\nimport apiClient from '@/services/api/client'\r\n\r\nexport type ReactionType = 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\r\n\r\nexport interface Reaction {\r\n  reaction_id: number\r\n  user_id: number\r\n  username: string\r\n  avatar_url: string\r\n  reactable_type: 'post' | 'comment'\r\n  reactable_id: number\r\n  reaction_type: ReactionType\r\n  created_at: string\r\n}\r\n\r\nexport interface ReactionStats {\r\n  total: number\r\n  by_type: Record<ReactionType, number>\r\n}\r\n\r\nexport function useReactions(\r\n  reactableType: Ref<'post' | 'comment'> | 'post' | 'comment',\r\n  reactableId: Ref<number> | number\r\n) {\r\n  const reactions = ref<Reaction[]>([])\r\n  const stats = ref<ReactionStats>({ total: 0, by_type: {} as Record<ReactionType, number> })\r\n  const currentUserReaction = ref<ReactionType | null>(null)\r\n  const loading = ref(false)\r\n  const error = ref<string | null>(null)\r\n\r\n  const getReactableType = () => typeof reactableType === 'string' ? reactableType : reactableType.value\r\n  const getReactableId = () => typeof reactableId === 'number' ? reactableId : reactableId.value\r\n\r\n  const reactionIcons: Record<ReactionType, string> = {\r\n    like: 'üëç',\r\n    love: '‚ù§Ô∏è',\r\n    haha: 'üòÇ',\r\n    wow: 'üòÆ',\r\n    sad: 'üò¢',\r\n    angry: 'üò†'\r\n  }\r\n\r\n  const reactionColors: Record<ReactionType, string> = {\r\n    like: '#3b82f6',\r\n    love: '#ef4444',\r\n    haha: '#eab308',\r\n    wow: '#f97316',\r\n    sad: '#64748b',\r\n    angry: '#dc2626'\r\n  }\r\n\r\n  const loadReactions = async () => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      \r\n      const response = await apiClient.get(\r\n        `/reactions/${getReactableType()}/${getReactableId()}`\r\n      )\r\n      \r\n      if (response.data.success) {\r\n        reactions.value = response.data.data.reactions || []\r\n        stats.value = response.data.data.stats || { total: 0, by_type: {} }\r\n        \r\n        // Find current user's reaction\r\n        const userReaction = reactions.value.find(r => r.user_id === getCurrentUserId())\r\n        currentUserReaction.value = userReaction ? userReaction.reaction_type : null\r\n      }\r\n    } catch (err: any) {\r\n      error.value = err.message || 'Failed to load reactions'\r\n      console.error('Error loading reactions:', err)\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  const addReaction = async (reactionType: ReactionType): Promise<void> => {\r\n    const previousReaction = currentUserReaction.value\r\n    const previousTotal = stats.value.total\r\n    const previousByType = { ...stats.value.by_type }\r\n    \r\n    try {\r\n      // Optimistic update\r\n      currentUserReaction.value = reactionType\r\n      stats.value.total++\r\n      stats.value.by_type[reactionType] = (stats.value.by_type[reactionType] || 0) + 1\r\n      \r\n      await apiClient.post('/reactions', {\r\n        reactable_type: getReactableType(),\r\n        reactable_id: getReactableId(),\r\n        reaction_type: reactionType\r\n      })\r\n      \r\n      // Reload to get accurate data\r\n      await loadReactions()\r\n    } catch (err: any) {\r\n      // Rollback on error\r\n      currentUserReaction.value = previousReaction\r\n      stats.value.total = previousTotal\r\n      stats.value.by_type = previousByType\r\n      \r\n      error.value = err.message || 'Failed to add reaction'\r\n      throw err\r\n    }\r\n  }\r\n\r\n  const removeReaction = async (): Promise<void> => {\r\n    const previousReaction = currentUserReaction.value\r\n    const previousTotal = stats.value.total\r\n    const previousByType = { ...stats.value.by_type }\r\n    \r\n    if (!previousReaction) return\r\n    \r\n    try {\r\n      // Optimistic update\r\n      currentUserReaction.value = null\r\n      stats.value.total--\r\n      if (stats.value.by_type[previousReaction]) {\r\n        stats.value.by_type[previousReaction]--\r\n      }\r\n      \r\n      await apiClient.delete(\r\n        `/reactions/${getReactableType()}/${getReactableId()}`\r\n      )\r\n      \r\n      // Reload to get accurate data\r\n      await loadReactions()\r\n    } catch (err: any) {\r\n      // Rollback on error\r\n      currentUserReaction.value = previousReaction\r\n      stats.value.total = previousTotal\r\n      stats.value.by_type = previousByType\r\n      \r\n      error.value = err.message || 'Failed to remove reaction'\r\n      throw err\r\n    }\r\n  }\r\n\r\n  const toggleReaction = async (reactionType: ReactionType): Promise<void> => {\r\n    if (currentUserReaction.value === reactionType) {\r\n      await removeReaction()\r\n    } else if (currentUserReaction.value) {\r\n      // Change reaction type\r\n      await removeReaction()\r\n      await addReaction(reactionType)\r\n    } else {\r\n      await addReaction(reactionType)\r\n    }\r\n  }\r\n\r\n  const getCurrentUserId = (): number => {\r\n    // Get from auth store\r\n    const userStr = localStorage.getItem('user')\r\n    if (userStr) {\r\n      const user = JSON.parse(userStr)\r\n      return user.user_id\r\n    }\r\n    return 0\r\n  }\r\n\r\n  const displayIcon = computed(() => {\r\n    if (currentUserReaction.value) {\r\n      return reactionIcons[currentUserReaction.value]\r\n    }\r\n    return 'ü§ç'\r\n  })\r\n\r\n  const displayColor = computed(() => {\r\n    if (currentUserReaction.value) {\r\n      return reactionColors[currentUserReaction.value]\r\n    }\r\n    return '#94a3b8'\r\n  })\r\n\r\n  return {\r\n    reactions,\r\n    stats,\r\n    currentUserReaction,\r\n    loading,\r\n    error,\r\n    reactionIcons,\r\n    reactionColors,\r\n    displayIcon,\r\n    displayColor,\r\n    loadReactions,\r\n    addReaction,\r\n    removeReaction,\r\n    toggleReaction\r\n  }\r\n}\r\n","<template>\r\n  <div class=\"reaction-picker-container\">\r\n    <!-- Reaction Button -->\r\n    <button \r\n      @click=\"togglePicker\" \r\n      @mouseenter=\"showPickerOnHover\"\r\n      @mouseleave=\"hidePickerOnHover\"\r\n      :class=\"['reaction-button', { active: currentUserReaction }]\"\r\n      :style=\"{ color: displayColor }\"\r\n    >\r\n      <span class=\"reaction-icon\">{{ displayIcon }}</span>\r\n      <span v-if=\"stats.total > 0\" class=\"reaction-count\">{{ stats.total }}</span>\r\n    </button>\r\n\r\n    <!-- Reaction Picker Popup -->\r\n    <Transition name=\"picker-fade\">\r\n      <div \r\n        v-if=\"showPicker\" \r\n        class=\"reaction-picker\"\r\n        @mouseenter=\"keepPickerOpen\"\r\n        @mouseleave=\"hidePickerOnHover\"\r\n      >\r\n        <button\r\n          v-for=\"(icon, type) in reactionIcons\"\r\n          :key=\"type\"\r\n          @click=\"handleReactionClick(type as ReactionType)\"\r\n          :class=\"['reaction-option', { selected: currentUserReaction === type }]\"\r\n          :title=\"type\"\r\n        >\r\n          {{ icon }}\r\n        </button>\r\n      </div>\r\n    </Transition>\r\n\r\n    <!-- Reaction Details Modal -->\r\n    <Transition name=\"modal-fade\">\r\n      <div v-if=\"showDetailsModal\" class=\"modal-overlay\" @click=\"showDetailsModal = false\">\r\n        <div class=\"modal-content\" @click.stop>\r\n          <div class=\"modal-header\">\r\n            <h3>Reactions</h3>\r\n            <button @click=\"showDetailsModal = false\" class=\"btn-close\">√ó</button>\r\n          </div>\r\n          \r\n          <div class=\"modal-body\">\r\n            <div class=\"reaction-tabs\">\r\n              <button\r\n                @click=\"selectedTab = 'all'\"\r\n                :class=\"['tab-button', { active: selectedTab === 'all' }]\"\r\n              >\r\n                All {{ stats.total }}\r\n              </button>\r\n              <button\r\n                v-for=\"(count, type) in stats.by_type\"\r\n                :key=\"type\"\r\n                @click=\"selectedTab = type\"\r\n                :class=\"['tab-button', { active: selectedTab === type }]\"\r\n                v-show=\"count > 0\"\r\n              >\r\n                {{ reactionIcons[type as ReactionType] }} {{ count }}\r\n              </button>\r\n            </div>\r\n\r\n            <div class=\"reaction-users-list\">\r\n              <div\r\n                v-for=\"reaction in filteredReactions\"\r\n                :key=\"reaction.reaction_id\"\r\n                class=\"reaction-user-item\"\r\n              >\r\n                <img \r\n                  :src=\"reaction.avatar_url || '/assets/images/default-avatar.svg'\" \r\n                  :alt=\"reaction.username\"\r\n                  class=\"user-avatar\"\r\n                />\r\n                <span class=\"username\">{{ reaction.username }}</span>\r\n                <span class=\"reaction-emoji\">{{ reactionIcons[reaction.reaction_type] }}</span>\r\n              </div>\r\n              \r\n              <div v-if=\"filteredReactions.length === 0\" class=\"empty-state\">\r\n                No reactions yet\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Transition>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed } from 'vue'\r\nimport { useReactions, ReactionType } from '@/composables/useReactions'\r\n\r\nconst props = defineProps<{\r\n  reactableType: 'post' | 'comment'\r\n  reactableId: number\r\n}>()\r\n\r\nconst {\r\n  reactions,\r\n  stats,\r\n  currentUserReaction,\r\n  loading,\r\n  reactionIcons,\r\n  displayIcon,\r\n  displayColor,\r\n  loadReactions,\r\n  toggleReaction\r\n} = useReactions(ref(props.reactableType), ref(props.reactableId))\r\n\r\nconst showPicker = ref(false)\r\nconst showDetailsModal = ref(false)\r\nconst selectedTab = ref<string>('all')\r\nlet hoverTimeout: NodeJS.Timeout | null = null\r\n\r\nconst togglePicker = (event: Event) => {\r\n  event.stopPropagation()\r\n  showPicker.value = !showPicker.value\r\n}\r\n\r\nconst showPickerOnHover = () => {\r\n  hoverTimeout = setTimeout(() => {\r\n    showPicker.value = true\r\n  }, 300)\r\n}\r\n\r\nconst hidePickerOnHover = () => {\r\n  if (hoverTimeout) {\r\n    clearTimeout(hoverTimeout)\r\n    hoverTimeout = null\r\n  }\r\n  setTimeout(() => {\r\n    if (!showPicker.value) return\r\n    showPicker.value = false\r\n  }, 200)\r\n}\r\n\r\nconst keepPickerOpen = () => {\r\n  if (hoverTimeout) {\r\n    clearTimeout(hoverTimeout)\r\n    hoverTimeout = null\r\n  }\r\n}\r\n\r\nconst handleReactionClick = async (type: ReactionType) => {\r\n  showPicker.value = false\r\n  try {\r\n    await toggleReaction(type)\r\n  } catch (error) {\r\n    console.error('Failed to toggle reaction:', error)\r\n  }\r\n}\r\n\r\nconst showReactionDetails = () => {\r\n  loadReactions()\r\n  showDetailsModal.value = true\r\n}\r\n\r\nconst filteredReactions = computed(() => {\r\n  if (selectedTab.value === 'all') {\r\n    return reactions.value\r\n  }\r\n  return reactions.value.filter(r => r.reaction_type === selectedTab.value)\r\n})\r\n\r\n// Load reactions on mount\r\nloadReactions()\r\n</script>\r\n\r\n<style scoped>\r\n.reaction-picker-container {\r\n  position: relative;\r\n  display: inline-block;\r\n}\r\n\r\n.reaction-button {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: var(--spacing-2);\r\n  padding: var(--spacing-2) var(--spacing-3);\r\n  background: transparent;\r\n  border: none;\r\n  border-radius: var(--radius-md);\r\n  cursor: pointer;\r\n  color: var(--color-text-secondary);\r\n  transition: all 0.2s;\r\n  font-size: 1rem;\r\n}\r\n\r\n.reaction-button:hover {\r\n  background: var(--color-bg-secondary);\r\n  transform: scale(1.05);\r\n}\r\n\r\n.reaction-button.active {\r\n  color: var(--color-primary);\r\n}\r\n\r\n.reaction-icon {\r\n  font-size: 1.25rem;\r\n}\r\n\r\n.reaction-count {\r\n  font-size: 0.875rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.reaction-picker {\r\n  position: absolute;\r\n  bottom: 100%;\r\n  left: 50%;\r\n  transform: translateX(-50%) translateY(-8px);\r\n  display: flex;\r\n  gap: var(--spacing-2);\r\n  padding: var(--spacing-3);\r\n  background: var(--color-bg-elevated);\r\n  border-radius: var(--radius-lg);\r\n  box-shadow: var(--shadow-lg);\r\n  z-index: 100;\r\n}\r\n\r\n.reaction-option {\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: transparent;\r\n  border: 2px solid transparent;\r\n  border-radius: var(--radius-md);\r\n  cursor: pointer;\r\n  font-size: 1.5rem;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.reaction-option:hover {\r\n  transform: scale(1.2);\r\n  background: var(--color-bg-secondary);\r\n}\r\n\r\n.reaction-option.selected {\r\n  border-color: var(--color-primary);\r\n  background: rgba(99, 102, 241, 0.1);\r\n}\r\n\r\n.picker-fade-enter-active,\r\n.picker-fade-leave-active {\r\n  transition: opacity 0.2s, transform 0.2s;\r\n}\r\n\r\n.picker-fade-enter-from,\r\n.picker-fade-leave-to {\r\n  opacity: 0;\r\n  transform: translateX(-50%) translateY(-4px);\r\n}\r\n\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.modal-content {\r\n  background: var(--color-bg-elevated);\r\n  border-radius: var(--radius-lg);\r\n  max-width: 500px;\r\n  width: 90%;\r\n  max-height: 80vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: var(--spacing-4);\r\n  border-bottom: 2px solid var(--color-border);\r\n}\r\n\r\n.modal-header h3 {\r\n  font-size: 1.25rem;\r\n  font-weight: 700;\r\n  color: var(--color-text-primary);\r\n}\r\n\r\n.btn-close {\r\n  width: 32px;\r\n  height: 32px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: transparent;\r\n  border: none;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  font-size: 1.5rem;\r\n  color: var(--color-text-secondary);\r\n  transition: all 0.2s;\r\n}\r\n\r\n.btn-close:hover {\r\n  background: var(--color-bg-secondary);\r\n  color: var(--color-text-primary);\r\n}\r\n\r\n.modal-body {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: var(--spacing-4);\r\n}\r\n\r\n.reaction-tabs {\r\n  display: flex;\r\n  gap: var(--spacing-2);\r\n  margin-bottom: var(--spacing-4);\r\n  overflow-x: auto;\r\n}\r\n\r\n.tab-button {\r\n  padding: var(--spacing-2) var(--spacing-4);\r\n  background: var(--color-bg-secondary);\r\n  border: 2px solid transparent;\r\n  border-radius: var(--radius-full);\r\n  cursor: pointer;\r\n  font-weight: 600;\r\n  color: var(--color-text-secondary);\r\n  transition: all 0.2s;\r\n  white-space: nowrap;\r\n}\r\n\r\n.tab-button:hover {\r\n  background: var(--color-bg-primary);\r\n}\r\n\r\n.tab-button.active {\r\n  background: var(--color-primary);\r\n  color: white;\r\n}\r\n\r\n.reaction-users-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: var(--spacing-3);\r\n}\r\n\r\n.reaction-user-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: var(--spacing-3);\r\n  padding: var(--spacing-2);\r\n  border-radius: var(--radius-md);\r\n  transition: background 0.2s;\r\n}\r\n\r\n.reaction-user-item:hover {\r\n  background: var(--color-bg-secondary);\r\n}\r\n\r\n.user-avatar {\r\n  width: 36px;\r\n  height: 36px;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n}\r\n\r\n.username {\r\n  flex: 1;\r\n  font-weight: 600;\r\n  color: var(--color-text-primary);\r\n}\r\n\r\n.reaction-emoji {\r\n  font-size: 1.25rem;\r\n}\r\n\r\n.empty-state {\r\n  text-align: center;\r\n  padding: var(--spacing-8);\r\n  color: var(--color-text-secondary);\r\n}\r\n\r\n.modal-fade-enter-active,\r\n.modal-fade-leave-active {\r\n  transition: opacity 0.3s;\r\n}\r\n\r\n.modal-fade-enter-from,\r\n.modal-fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n.modal-fade-enter-active .modal-content,\r\n.modal-fade-leave-active .modal-content {\r\n  transition: transform 0.3s;\r\n}\r\n\r\n.modal-fade-enter-from .modal-content,\r\n.modal-fade-leave-to .modal-content {\r\n  transform: scale(0.9);\r\n}\r\n</style>\r\n"],"names":["postsAPI","params","apiClient","wallId","postId","data","formData","file","index","reactionType","content","postIds","useReactions","reactableType","reactableId","reactions","ref","stats","currentUserReaction","loading","error","getReactableType","getReactableId","reactionIcons","reactionColors","loadReactions","response","userReaction","r","getCurrentUserId","err","addReaction","previousReaction","previousTotal","previousByType","removeReaction","toggleReaction","userStr","displayIcon","computed","displayColor","props","__props","showPicker","showDetailsModal","selectedTab","hoverTimeout","togglePicker","event","showPickerOnHover","hidePickerOnHover","keepPickerOpen","handleReactionClick","type","filteredReactions","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_unref","_hoisted_2","_toDisplayString","_hoisted_3","_createVNode","_Transition","_Fragment","_renderList","icon","$event","_normalizeClass","_hoisted_4","_hoisted_5","_cache","_hoisted_6","_hoisted_7","count","_hoisted_8","_hoisted_9","reaction","_hoisted_11","_hoisted_12","_hoisted_13"],"mappings":"sNAIO,MAAMA,GAAW,CAItB,MAAM,QAAQC,EAMuB,CACnC,OAAOC,EAAU,IAAI,cAAeD,CAAM,CAC5C,EAKA,MAAM,aAAaE,EAAgBF,EAGE,CACnC,OAAOC,EAAU,IAAI,UAAUC,CAAM,SAAUF,CAAM,CACvD,EAKA,MAAM,QAAQG,EAA+B,CAC3C,OAAOF,EAAU,IAAI,UAAUE,CAAM,EAAE,CACzC,EAKA,MAAM,WAAWC,EAAwC,CACvD,MAAMC,EAAW,IAAI,SAErB,OAAAA,EAAS,OAAO,UAAWD,EAAK,QAAQ,UAAU,EAClDC,EAAS,OAAO,UAAWD,EAAK,OAAO,EAEnCA,EAAK,WACPC,EAAS,OAAO,YAAaD,EAAK,SAAS,EAGzCA,EAAK,YACPC,EAAS,OAAO,aAAcD,EAAK,UAAU,EAG3CA,EAAK,mBACPC,EAAS,OAAO,oBAAqBD,EAAK,kBAAkB,UAAU,EAGpEA,EAAK,aACPA,EAAK,YAAY,QAAQ,CAACE,EAAMC,IAAU,CACxCF,EAAS,OAAO,eAAeE,CAAK,IAAKD,CAAI,CAC/C,CAAC,EAGIL,EAAU,OAAO,SAAUI,CAAQ,CAC5C,EAKA,MAAM,WAAWF,EAAgBC,EAGf,CAChB,OAAOH,EAAU,MAAM,UAAUE,CAAM,GAAIC,CAAI,CACjD,EAKA,MAAM,WAAWD,EAA+B,CAC9C,OAAOF,EAAU,OAAO,UAAUE,CAAM,EAAE,CAC5C,EAKA,MAAM,YAAYA,EAAgBK,EAAqC,CACrE,OAAOP,EAAU,KAAK,UAAUE,CAAM,aAAc,CAAE,cAAeK,EAAc,CACrF,EAKA,MAAM,eAAeL,EAA+B,CAClD,OAAOF,EAAU,OAAO,UAAUE,CAAM,YAAY,CACtD,EAKA,MAAM,UAAUA,EAAgBD,EAAgBO,EAAiC,CAC/E,OAAOR,EAAU,KAAK,UAAUE,CAAM,SAAU,CAAE,QAASD,EAAQ,QAAAO,EAAS,CAC9E,EAKA,MAAM,mBAAmBN,EAA+B,CACtD,OAAOF,EAAU,KAAK,UAAUE,CAAM,OAAO,CAC/C,EAKA,MAAM,yBAAyBO,EAAkC,CAC/D,OAAOT,EAAU,KAAK,oBAAqB,CAAE,SAAUS,EAAS,CAClE,EAKA,MAAM,mBAAmBP,EAA+B,CACtD,OAAOF,EAAU,KAAK,UAAUE,CAAM,OAAO,CAC/C,CACF,ECtGO,SAASQ,EACdC,EACAC,EACA,CACA,MAAMC,EAAYC,EAAgB,EAAE,EAC9BC,EAAQD,EAAmB,CAAE,MAAO,EAAG,QAAS,CAAA,EAAoC,EACpFE,EAAsBF,EAAyB,IAAI,EACnDG,EAAUH,EAAI,EAAK,EACnBI,EAAQJ,EAAmB,IAAI,EAE/BK,EAAmB,IAAM,OAAOR,GAAkB,SAAWA,EAAgBA,EAAc,MAC3FS,EAAiB,IAAM,OAAOR,GAAgB,SAAWA,EAAcA,EAAY,MAEnFS,EAA8C,CAClD,KAAM,KACN,KAAM,KACN,KAAM,KACN,IAAK,KACL,IAAK,KACL,MAAO,IAAA,EAGHC,EAA+C,CACnD,KAAM,UACN,KAAM,UACN,KAAM,UACN,IAAK,UACL,IAAK,UACL,MAAO,SAAA,EAGHC,EAAgB,SAAY,CAChC,GAAI,CACFN,EAAQ,MAAQ,GAChBC,EAAM,MAAQ,KAEd,MAAMM,EAAW,MAAMxB,EAAU,IAC/B,cAAcmB,EAAA,CAAkB,IAAIC,GAAgB,EAAA,EAGtD,GAAII,EAAS,KAAK,QAAS,CACzBX,EAAU,MAAQW,EAAS,KAAK,KAAK,WAAa,CAAA,EAClDT,EAAM,MAAQS,EAAS,KAAK,KAAK,OAAS,CAAE,MAAO,EAAG,QAAS,EAAC,EAGhE,MAAMC,EAAeZ,EAAU,MAAM,QAAUa,EAAE,UAAYC,GAAkB,EAC/EX,EAAoB,MAAQS,EAAeA,EAAa,cAAgB,IAC1E,CACF,OAASG,EAAU,CACjBV,EAAM,MAAQU,EAAI,SAAW,2BAC7B,QAAQ,MAAM,2BAA4BA,CAAG,CAC/C,QAAA,CACEX,EAAQ,MAAQ,EAClB,CACF,EAEMY,EAAc,MAAOtB,GAA8C,CACvE,MAAMuB,EAAmBd,EAAoB,MACvCe,EAAgBhB,EAAM,MAAM,MAC5BiB,EAAiB,CAAE,GAAGjB,EAAM,MAAM,OAAA,EAExC,GAAI,CAEFC,EAAoB,MAAQT,EAC5BQ,EAAM,MAAM,QACZA,EAAM,MAAM,QAAQR,CAAY,GAAKQ,EAAM,MAAM,QAAQR,CAAY,GAAK,GAAK,EAE/E,MAAMP,EAAU,KAAK,aAAc,CACjC,eAAgBmB,EAAA,EAChB,aAAcC,EAAA,EACd,cAAeb,CAAA,CAChB,EAGD,MAAMgB,EAAA,CACR,OAASK,EAAU,CAEjB,MAAAZ,EAAoB,MAAQc,EAC5Bf,EAAM,MAAM,MAAQgB,EACpBhB,EAAM,MAAM,QAAUiB,EAEtBd,EAAM,MAAQU,EAAI,SAAW,yBACvBA,CACR,CACF,EAEMK,EAAiB,SAA2B,CAChD,MAAMH,EAAmBd,EAAoB,MACvCe,EAAgBhB,EAAM,MAAM,MAC5BiB,EAAiB,CAAE,GAAGjB,EAAM,MAAM,OAAA,EAExC,GAAKe,EAEL,GAAI,CAEFd,EAAoB,MAAQ,KAC5BD,EAAM,MAAM,QACRA,EAAM,MAAM,QAAQe,CAAgB,GACtCf,EAAM,MAAM,QAAQe,CAAgB,IAGtC,MAAM9B,EAAU,OACd,cAAcmB,EAAA,CAAkB,IAAIC,GAAgB,EAAA,EAItD,MAAMG,EAAA,CACR,OAASK,EAAU,CAEjB,MAAAZ,EAAoB,MAAQc,EAC5Bf,EAAM,MAAM,MAAQgB,EACpBhB,EAAM,MAAM,QAAUiB,EAEtBd,EAAM,MAAQU,EAAI,SAAW,4BACvBA,CACR,CACF,EAEMM,EAAiB,MAAO3B,GAA8C,CACtES,EAAoB,QAAUT,EAChC,MAAM0B,EAAA,EACGjB,EAAoB,OAE7B,MAAMiB,EAAA,EACN,MAAMJ,EAAYtB,CAAY,GAE9B,MAAMsB,EAAYtB,CAAY,CAElC,EAEMoB,EAAmB,IAAc,CAErC,MAAMQ,EAAU,aAAa,QAAQ,MAAM,EAC3C,OAAIA,EACW,KAAK,MAAMA,CAAO,EACnB,QAEP,CACT,EAEMC,EAAcC,EAAS,IACvBrB,EAAoB,MACfK,EAAcL,EAAoB,KAAK,EAEzC,IACR,EAEKsB,EAAeD,EAAS,IACxBrB,EAAoB,MACfM,EAAeN,EAAoB,KAAK,EAE1C,SACR,EAED,MAAO,CACL,UAAAH,EACA,MAAAE,EACA,oBAAAC,EACA,QAAAC,EACA,MAAAC,EACA,cAAAG,EACA,eAAAC,EACA,YAAAc,EACA,aAAAE,EACA,cAAAf,EACA,YAAAM,EACA,eAAAI,EACA,eAAAC,CAAA,CAEJ,yaClGA,MAAMK,EAAQC,EAKR,CACJ,UAAA3B,EACA,MAAAE,EACA,oBAAAC,EAEA,cAAAK,EACA,YAAAe,EACA,aAAAE,EACA,cAAAf,EACA,eAAAW,CAAA,EACExB,EAAaI,EAAIyB,EAAM,aAAa,EAAGzB,EAAIyB,EAAM,WAAW,CAAC,EAE3DE,EAAa3B,EAAI,EAAK,EACtB4B,EAAmB5B,EAAI,EAAK,EAC5B6B,EAAc7B,EAAY,KAAK,EACrC,IAAI8B,EAAsC,KAE1C,MAAMC,EAAgBC,GAAiB,CACrCA,EAAM,gBAAA,EACNL,EAAW,MAAQ,CAACA,EAAW,KACjC,EAEMM,EAAoB,IAAM,CAC9BH,EAAe,WAAW,IAAM,CAC9BH,EAAW,MAAQ,EACrB,EAAG,GAAG,CACR,EAEMO,EAAoB,IAAM,CAC1BJ,IACF,aAAaA,CAAY,EACzBA,EAAe,MAEjB,WAAW,IAAM,CACVH,EAAW,QAChBA,EAAW,MAAQ,GACrB,EAAG,GAAG,CACR,EAEMQ,EAAiB,IAAM,CACvBL,IACF,aAAaA,CAAY,EACzBA,EAAe,KAEnB,EAEMM,EAAsB,MAAOC,GAAuB,CACxDV,EAAW,MAAQ,GACnB,GAAI,CACF,MAAMP,EAAeiB,CAAI,CAC3B,OAASjC,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,CACnD,CACF,EAOMkC,EAAoBf,EAAS,IAC7BM,EAAY,QAAU,MACjB9B,EAAU,MAEZA,EAAU,MAAM,UAAYa,EAAE,gBAAkBiB,EAAY,KAAK,CACzE,EAGD,OAAApB,EAAA,UApKE8B,EAAA,EAAAC,EAoFM,MApFNC,EAoFM,CAlFJC,EASS,SAAA,CARN,QAAOX,EACP,aAAYE,EACZ,aAAYC,EACZ,mCAAqCS,EAAAzC,CAAA,CAAA,CAAmB,CAAA,EACxD,eAAgByC,EAAAnB,CAAA,EAAY,CAAA,GAE7BkB,EAAoD,OAApDE,EAAoDC,EAArBF,EAAArB,CAAA,CAAW,EAAA,CAAA,EAC9BqB,EAAA1C,CAAA,EAAM,MAAK,GAAvBsC,EAAA,EAAAC,EAA4E,OAA5EM,EAA4ED,EAArBF,EAAA1C,CAAA,EAAM,KAAK,EAAA,CAAA,iBAIpE8C,EAiBaC,EAAA,CAjBD,KAAK,eAAa,WAC5B,IAeM,CAdErB,EAAA,WADRa,EAeM,MAAA,OAbJ,MAAM,kBACL,aAAYL,EACZ,aAAYD,CAAA,IAEbK,EAAA,EAAA,EAAAC,EAQSS,EAAA,KAAAC,EAPgBP,EAAApC,CAAA,EAAa,CAA5B4C,EAAMd,SADhBG,EAQS,SAAA,CANN,IAAKH,EACL,QAAKe,GAAEhB,EAAoBC,CAAI,EAC/B,MAAKgB,EAAA,CAAA,kBAAA,CAAA,SAAkCV,EAAAzC,CAAA,IAAwBmC,CAAA,CAAI,CAAA,EACnE,MAAOA,CAAA,IAELc,CAAI,EAAA,GAAAG,CAAA,iCAMbP,EAiDaC,EAAA,CAjDD,KAAK,cAAY,WAC3B,IA+CM,CA/CKpB,EAAA,WAAXY,EA+CM,MAAA,OA/CuB,MAAM,gBAAiB,uBAAOZ,EAAA,MAAgB,GAAA,GACzEc,EA6CM,MAAA,CA7CD,MAAM,gBAAiB,sBAAD,IAAA,CAAA,EAAW,CAAA,MAAA,CAAA,EAAA,GACpCA,EAGM,MAHNa,EAGM,CAFJC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAd,EAAkB,UAAd,YAAS,EAAA,GACbA,EAAsE,SAAA,CAA7D,uBAAOd,EAAA,MAAgB,IAAU,MAAM,WAAA,EAAY,GAAC,CAAA,GAG/Dc,EAsCM,MAtCNe,EAsCM,CArCJf,EAgBM,MAhBNgB,EAgBM,CAfJhB,EAKS,SAAA,CAJN,uBAAOb,EAAA,MAAW,OAClB,8BAAgCA,EAAA,QAAW,MAAA,CAAA,CAAA,EAC7C,QACKgB,EAAGF,EAAA1C,CAAA,EAAM,KAAK,EAAA,CAAA,GAEpBsC,EAAA,EAAA,EAAAC,EAQSS,SAPiBN,EAAA1C,CAAA,EAAM,QAAO,CAA7B0D,EAAOtB,WADjBG,EAQS,SAAA,CANN,IAAKH,EACL,QAAKe,GAAEvB,EAAA,MAAcQ,EACrB,MAAKgB,EAAA,CAAA,aAAA,CAAA,OAA2BxB,EAAA,QAAgBQ,EAAI,CAAA,CAAA,EAGlDQ,EAAAF,EAAApC,CAAA,EAAc8B,CAAI,CAAA,EAAoB,MAAIsB,CAAK,EAAA,GAAAC,EAAA,GAAA,IAF1CD,EAAK,CAAA,CAAA,YAMjBjB,EAkBM,MAlBNmB,GAkBM,QAjBJrB,EAYMS,EAAA,KAAAC,EAXeZ,EAAA,MAAZwB,QADTtB,EAYM,MAAA,CAVH,IAAKsB,EAAS,YACf,MAAM,oBAAA,GAENpB,EAIE,MAAA,CAHC,IAAKoB,EAAS,YAAU,oCACxB,IAAKA,EAAS,SACf,MAAM,aAAA,aAERpB,EAAqD,OAArDqB,GAAqDlB,EAA3BiB,EAAS,QAAQ,EAAA,CAAA,EAC3CpB,EAA+E,OAA/EsB,GAA+EnB,EAA/CF,KAAcmB,EAAS,aAAa,CAAA,EAAA,CAAA,CAAA,WAG3DxB,EAAA,MAAkB,SAAM,OAAnCE,EAEM,MAFNyB,GAA+D,oBAE/D"}