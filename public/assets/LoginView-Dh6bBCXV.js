import{b as v,f as F,r as I,g as c,n as S,j as $,k as s,s as B,y as U,t as n,O as L,P as D,i as g,Q as k,R as C,l as f,S as M,m as N,U as T}from"./vendor-B5QdKGWw.js";import{u as G,_ as z,M as W,U as _,A as R,a as j}from"./index-BO5Ud9Z9.js";import"./utils-i9HKr1_Q.js";const Z=()=>{const r=G(),h=v(()=>r.user),i=v(()=>r.isAuthenticated),d=v(()=>!r.initialized);return{user:h,isAuthenticated:i,isLoading:d,login:async a=>r.login(a),register:async a=>r.register(a),logout:async()=>r.logout(),updateProfile:a=>r.updateUser(a)}},H=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,Q=["for"],Y={key:0,class:"required"},J={class:"input-container"},K=["id","type","placeholder","disabled","required","autocomplete"],X={key:1,class:"input-error"},x={key:2,class:"input-help"},ee=F({__name:"AppInput",props:{modelValue:{},type:{default:"text"},label:{},placeholder:{},error:{},help:{},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},autocomplete:{}},emits:["update:modelValue","blur","focus"],setup(r,{emit:h}){const i=r,d=h,m=H(),u=I(!1),p=v({get:()=>i.modelValue,set:w=>d("update:modelValue",w)}),o=v(()=>["input",{"input-error":i.error,"input-focused":u.value,"input-disabled":i.disabled}]),a=w=>{const y=w.target;d("update:modelValue",y.value)},V=()=>{u.value=!1,d("blur")},A=()=>{u.value=!0,d("focus")};return(w,y)=>(g(),c("div",{class:S(["input-wrapper",{"has-error":r.error}])},[r.label?(g(),c("label",{key:0,for:B(m),class:"input-label"},[U(n(r.label)+" ",1),r.required?(g(),c("span",Y,"*")):$("",!0)],8,Q)):$("",!0),s("div",J,[L(s("input",{id:B(m),"onUpdate:modelValue":y[0]||(y[0]=q=>p.value=q),type:r.type,placeholder:r.placeholder,disabled:r.disabled,required:r.required,autocomplete:r.autocomplete,class:S(o.value),onInput:a,onBlur:V,onFocus:A},null,42,K),[[D,p.value]])]),r.error?(g(),c("p",X,n(r.error),1)):r.help?(g(),c("p",x,n(r.help),1)):$("",!0)],2))}}),b=z(ee,[["__scopeId","data-v-6944d8b7"]]),te=r=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r),re=r=>_.test(r),E=r=>{const h=r.length>=W;let i=0;return r.length>=8&&i++,r.length>=12&&i++,/[a-z]/.test(r)&&i++,/[A-Z]/.test(r)&&i++,/[0-9]/.test(r)&&i++,/[^a-zA-Z0-9]/.test(r)&&i++,{valid:h,strength:Math.min(i,5)}},se={class:"auth-form-container"},ae={class:"auth-tabs"},oe={class:"form-title"},le={class:"form-checkbox"},ne={for:"remember-me"},ie={class:"form-footer"},ue={href:"#/forgot-password",class:"link-secondary"},de={class:"form-title"},me={key:0,class:"password-strength"},pe={class:"strength-bar"},ce=["data-strength"],ge={class:"strength-text"},fe={class:"form-checkbox"},he={for:"terms-accept"},be={href:"/terms",target:"_blank"},ve={key:0,class:"form-error"},we={class:"oauth-section"},ye={class:"oauth-buttons"},Ve=F({__name:"LoginView",setup(r){const{login:h,register:i}=Z(),d=I("login"),m=I(!1),u=k({identifier:"",password:"",remember:!1}),p=k({identifier:"",password:""}),o=k({username:"",email:"",password:"",password_confirm:"",display_name:"",terms:!1}),a=k({username:"",email:"",password:"",password_confirm:"",display_name:"",terms:""}),V=v(()=>E(o.password).strength),A=v(()=>{const t=V.value;return t===0?"Very Weak":t===1?"Weak":t===2?"Fair":t===3?"Good":t>=4?"Strong":""}),w=()=>(p.identifier="",p.password="",u.identifier?u.password?!0:(p.password="Password is required",!1):(p.identifier="Username or email is required",!1)),y=()=>(a.username="",a.email="",a.password="",a.password_confirm="",a.terms="",!o.username||!re(o.username)?(a.username="Invalid username format",!1):!o.email||!te(o.email)?(a.email="Invalid email address",!1):E(o.password).valid?o.password!==o.password_confirm?(a.password_confirm="Passwords do not match",!1):o.terms?!0:(a.terms="You must agree to the terms",!1):(a.password="Password must be at least 8 characters",!1)),q=async()=>{if(w()){m.value=!0;try{await h(u)}catch(t){p.password=t.message||"Login failed"}finally{m.value=!1}}},O=async()=>{if(y()){m.value=!0;try{await i(o)}catch(t){t.errors?Object.assign(a,t.errors):a.username=t.message||"Registration failed"}finally{m.value=!1}}},P=t=>{const e=j.getOAuthURL(t);window.location.href=e};return(t,e)=>(g(),c("div",se,[s("div",ae,[s("button",{class:S(["auth-tab",{active:d.value==="login"}]),onClick:e[0]||(e[0]=l=>d.value="login")},n(t.$t("auth.login.loginButton")),3),s("button",{class:S(["auth-tab",{active:d.value==="register"}]),onClick:e[1]||(e[1]=l=>d.value="register")},n(t.$t("common.actions.register")),3)]),d.value==="login"?(g(),c("form",{key:0,class:"auth-form",onSubmit:C(q,["prevent"])},[s("h2",oe,n(t.$t("auth.login.subtitle")),1),f(b,{modelValue:u.identifier,"onUpdate:modelValue":e[2]||(e[2]=l=>u.identifier=l),label:t.$t("auth.login.username"),type:"text",autocomplete:"username",required:"",error:p.identifier},null,8,["modelValue","label","error"]),f(b,{modelValue:u.password,"onUpdate:modelValue":e[3]||(e[3]=l=>u.password=l),label:t.$t("auth.login.password"),type:"password",autocomplete:"current-password",required:"",error:p.password},null,8,["modelValue","label","error"]),s("div",le,[L(s("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>u.remember=l),type:"checkbox",id:"remember-me"},null,512),[[M,u.remember]]),s("label",ne,n(t.$t("auth.login.rememberMe")),1)]),f(R,{type:"submit",variant:"primary",size:"lg",block:"",loading:m.value},{default:N(()=>[U(n(m.value?t.$t("auth.login.loggingIn"):t.$t("auth.login.loginButton")),1)]),_:1},8,["loading"]),s("div",ie,[s("a",ue,n(t.$t("auth.login.forgotPassword")),1)])],32)):(g(),c("form",{key:1,class:"auth-form",onSubmit:C(O,["prevent"])},[s("h2",de,n(t.$t("auth.register.title")),1),f(b,{modelValue:o.username,"onUpdate:modelValue":e[5]||(e[5]=l=>o.username=l),label:t.$t("auth.register.username"),type:"text",autocomplete:"username",required:"",error:a.username,help:"3-50 characters, letters, numbers, underscore only"},null,8,["modelValue","label","error"]),f(b,{modelValue:o.email,"onUpdate:modelValue":e[6]||(e[6]=l=>o.email=l),label:t.$t("auth.register.email"),type:"email",autocomplete:"email",required:"",error:a.email},null,8,["modelValue","label","error"]),f(b,{modelValue:o.password,"onUpdate:modelValue":e[7]||(e[7]=l=>o.password=l),label:t.$t("auth.register.password"),type:"password",autocomplete:"new-password",required:"",error:a.password,help:"Minimum 8 characters"},null,8,["modelValue","label","error"]),o.password?(g(),c("div",me,[s("div",pe,[s("div",{class:"strength-fill",style:T({width:`${V.value*20}%`}),"data-strength":V.value},null,12,ce)]),s("span",ge,n(A.value),1)])):$("",!0),f(b,{modelValue:o.password_confirm,"onUpdate:modelValue":e[8]||(e[8]=l=>o.password_confirm=l),label:t.$t("auth.register.confirmPassword"),type:"password",autocomplete:"new-password",required:"",error:a.password_confirm},null,8,["modelValue","label","error"]),f(b,{modelValue:o.display_name,"onUpdate:modelValue":e[9]||(e[9]=l=>o.display_name=l),label:"Display Name (Optional)",type:"text",autocomplete:"name",error:a.display_name},null,8,["modelValue","error"]),s("div",fe,[L(s("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>o.terms=l),type:"checkbox",id:"terms-accept",required:""},null,512),[[M,o.terms]]),s("label",he,[U(n(t.$t("auth.register.terms"))+" ",1),s("a",be,n(t.$t("auth.register.termsLink")),1)]),a.terms?(g(),c("span",ve,n(a.terms),1)):$("",!0)]),f(R,{type:"submit",variant:"primary",size:"lg",block:"",loading:m.value},{default:N(()=>[U(n(m.value?t.$t("auth.register.registering"):t.$t("auth.register.registerButton")),1)]),_:1},8,["loading"])],32)),s("div",we,[e[17]||(e[17]=s("div",{class:"divider"},[s("span",null,"Or continue with")],-1)),s("div",ye,[s("button",{class:"btn-oauth btn-google",type:"button",onClick:e[11]||(e[11]=l=>P("google"))},[e[14]||(e[14]=s("span",{class:"icon"},"G",-1)),s("span",null,n(t.$t("auth.oauth.googleLogin").replace("Sign in with ","")),1)]),s("button",{class:"btn-oauth btn-yandex",type:"button",onClick:e[12]||(e[12]=l=>P("yandex"))},[e[15]||(e[15]=s("span",{class:"icon"},"Я",-1)),s("span",null,n(t.$t("auth.oauth.yandexLogin").replace("Sign in with ","").replace("Войти через ","")),1)]),s("button",{class:"btn-oauth btn-telegram",type:"button",onClick:e[13]||(e[13]=l=>P("telegram"))},[e[16]||(e[16]=s("span",{class:"icon"},"✈️",-1)),s("span",null,n(t.$t("auth.oauth.telegramLogin").replace("Sign in with ","").replace("Войти через ","")),1)])])])]))}}),Se=z(Ve,[["__scopeId","data-v-b6af7f9d"]]);export{Se as default};
//# sourceMappingURL=LoginView-Dh6bBCXV.js.map
