import{e as j,r,b as L,i as K,f as l,h as u,k as s,t as a,S as V,F as f,s as k,n as D,V as Q,u as X,o as n}from"./vendor-Cy2yCxOA.js";import{u as Y,b as m,_ as Z}from"./index-CKQhb95x.js";import"./utils-i9HKr1_Q.js";const x={class:"profile-view"},ss={key:0,class:"loading-container"},es={key:1,class:"error-container"},ts={key:2,class:"profile-content"},os={class:"profile-header"},as={class:"profile-header-content"},ls={class:"profile-avatar-section"},ns=["src","alt"],is={class:"profile-info"},rs={class:"profile-names"},us={class:"profile-username"},cs={key:0,class:"profile-display-name"},ds={key:0,class:"profile-bio"},vs={class:"profile-meta"},ps={key:0,class:"meta-item"},_s={class:"meta-item"},ms={key:1,class:"social-links"},fs=["href","title"],gs={class:"profile-actions"},hs={class:"icon"},ws={class:"profile-stats"},ys={class:"stat-value"},ks={class:"stat-label"},bs={class:"stat-value"},Cs={class:"stat-label"},$s={class:"stat-value"},Ps={class:"stat-item"},Ss={class:"stat-value"},Fs={class:"stat-label"},Ms={class:"content-tabs"},Es={class:"tabs-nav"},Ls=["onClick"],Vs={class:"tab-icon"},Ds={class:"tab-label"},Bs={key:0,class:"tab-content"},Hs={key:0,class:"loading-posts"},Ns={key:1,class:"empty-state"},Rs={key:2,class:"posts-grid"},Ts={class:"post-header"},Ws=["src","alt"],zs={class:"post-meta"},Is={class:"post-author"},Us={class:"post-time"},qs={class:"post-content"},As=["innerHTML"],Gs={key:1},Js={class:"post-actions"},Os={class:"action-btn"},js={class:"action-btn"},Ks={key:3,class:"load-more"},Qs={key:1,class:"tab-content"},Xs={key:0,class:"loading-posts"},Ys={key:1,class:"empty-state"},Zs={key:2,class:"walls-grid"},xs=["onClick"],se={class:"wall-info"},ee={class:"wall-title"},te={key:0,class:"wall-description"},oe={class:"wall-stats"},ae={key:2,class:"tab-content"},le={key:3,class:"tab-content"},ne=j({__name:"ProfileView",props:{username:{}},setup(B){const H=B,N=Q();X();const b=Y(),C=r(!0),g=r(!1),$=r(!1),h=r(null),i=r(null),_=r([]),w=r([]),d=r({wallsCount:0,followersCount:0,followingCount:0,postsCount:0}),v=r("posts"),p=r(!1),P=r(1),S=r(!0),R=[{id:"posts",icon:"📝",label:"Posts"},{id:"walls",icon:"🧱",label:"Walls"},{id:"media",icon:"🖼️",label:"Media"},{id:"likes",icon:"❤️",label:"Likes"}],F=L(()=>i.value&&b.user&&i.value.user_id===b.user.user_id),T=L(()=>{var o;return(o=i.value)!=null&&o.cover_image_url?{backgroundImage:`url(${i.value.cover_image_url})`}:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}}),M=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),W=async()=>{var o,t,e;try{C.value=!0,h.value=null;const c=H.username||((o=b.user)==null?void 0:o.username);if(!c)throw new Error("Username is required");const y=await m.get(`/users/${c}`);if(y.data.success&&y.data.data.user)i.value=y.data.data.user,F.value||await z(),await Promise.all([E(),I(),U()]);else throw new Error(y.data.message||"Profile not found")}catch(c){console.error("Error loading profile:",c),h.value=((e=(t=c.response)==null?void 0:t.data)==null?void 0:e.message)||c.message||"Failed to load profile"}finally{C.value=!1}},z=async()=>{try{const o=await m.get(`/users/${i.value.user_id}/follow-status`);o.data.success&&(p.value=o.data.data.is_following||!1)}catch(o){console.error("Error loading follow status:",o)}},E=async()=>{try{g.value=!0;const o=20,t=(P.value-1)*o,e=await m.get(`/users/${i.value.user_id}/posts?limit=${o}&offset=${t}`);e.data.success&&e.data.data.posts&&(P.value===1?_.value=e.data.data.posts:_.value=[..._.value,...e.data.data.posts],S.value=e.data.data.posts.length===o)}catch(o){console.error("Error loading posts:",o)}finally{g.value=!1}},I=async()=>{try{$.value=!0;const o=await m.get(`/users/${i.value.user_id}/walls`);o.data.success&&o.data.data.walls&&(w.value=o.data.data.walls)}catch(o){console.error("Error loading walls:",o)}finally{$.value=!1}},U=async()=>{d.value={wallsCount:w.value.length,followersCount:i.value.followers_count||0,followingCount:i.value.following_count||0,postsCount:_.value.length}},q=()=>{P.value++,E()},A=async()=>{var o,t;try{p.value?(await m.delete(`/users/${i.value.user_id}/follow`),p.value=!1,d.value.followersCount--):(await m.post(`/users/${i.value.user_id}/follow`),p.value=!0,d.value.followersCount++)}catch(e){alert(((t=(o=e.response)==null?void 0:o.data)==null?void 0:t.message)||"Failed to update follow status")}},G=()=>{N.push(`/messages?user=${i.value.username}`)},J=()=>{console.log("Show followers modal")},O=()=>{console.log("Show following modal")};return K(()=>{W()}),(o,t)=>(n(),l("div",x,[C.value?(n(),l("div",ss,[t[3]||(t[3]=s("div",{class:"spinner"},null,-1)),s("p",null,a(o.$t("common.labels.loading")),1)])):h.value?(n(),l("div",es,[s("h2",null,a(o.$t("common.labels.error")),1),s("p",null,a(h.value),1),s("button",{onClick:t[0]||(t[0]=e=>o.$router.push("/")),class:"btn-primary"},"Go Home")])):i.value?(n(),l("div",ts,[s("div",{class:"profile-cover",style:V(T.value)},null,4),s("div",os,[s("div",as,[s("div",ls,[s("img",{src:i.value.avatar_url||"/assets/images/default-avatar.svg",alt:i.value.username,class:"profile-avatar"},null,8,ns)]),s("div",is,[s("div",rs,[s("h1",us,"@"+a(i.value.username),1),i.value.display_name?(n(),l("p",cs,a(i.value.display_name),1)):u("",!0)]),i.value.bio?(n(),l("p",ds,a(i.value.bio),1)):u("",!0),s("div",vs,[i.value.location?(n(),l("span",ps,[t[4]||(t[4]=s("span",{class:"icon"},"📍",-1)),s("span",null,a(i.value.location),1)])):u("",!0),s("span",_s,[t[5]||(t[5]=s("span",{class:"icon"},"📅",-1)),s("span",null,"Joined "+a(M(i.value.created_at)),1)])]),i.value.social_links&&i.value.social_links.length>0?(n(),l("div",ms,[(n(!0),l(f,null,k(i.value.social_links,e=>(n(),l("a",{key:e.link_id,href:e.url,target:"_blank",rel:"noopener noreferrer",class:"social-link",title:e.platform},[t[6]||(t[6]=s("span",{class:"icon"},"🔗",-1)),s("span",null,a(e.platform),1)],8,fs))),128))])):u("",!0)]),s("div",gs,[F.value?(n(),l("button",{key:0,onClick:t[1]||(t[1]=e=>o.$router.push("/settings")),class:"btn-secondary"},[...t[7]||(t[7]=[s("span",{class:"icon"},"⚙️",-1),s("span",null,"Edit Profile",-1)])])):(n(),l(f,{key:1},[s("button",{onClick:A,class:D(["btn-primary",{following:p.value}])},[s("span",hs,a(p.value?"✓":"+"),1),s("span",null,a(p.value?o.$t("common.actions.unfollow"):o.$t("common.actions.follow")),1)],2),s("button",{onClick:G,class:"btn-secondary"},[...t[8]||(t[8]=[s("span",{class:"icon"},"💬",-1),s("span",null,"Message",-1)])])],64))])]),s("div",ws,[s("div",{class:"stat-item",onClick:t[2]||(t[2]=e=>v.value="walls")},[s("span",ys,a(d.value.wallsCount||0),1),s("span",ks,a(o.$t("walls.stats.posts")),1)]),s("div",{class:"stat-item",onClick:J},[s("span",bs,a(d.value.followersCount||0),1),s("span",Cs,a(o.$t("walls.stats.followers")),1)]),s("div",{class:"stat-item",onClick:O},[s("span",$s,a(d.value.followingCount||0),1),t[9]||(t[9]=s("span",{class:"stat-label"},"Following",-1))]),s("div",Ps,[s("span",Ss,a(d.value.postsCount||0),1),s("span",Fs,a(o.$t("walls.stats.posts")),1)])])]),s("div",Ms,[s("div",Es,[(n(),l(f,null,k(R,e=>s("button",{key:e.id,class:D(["tab-button",{active:v.value===e.id}]),onClick:c=>v.value=e.id},[s("span",Vs,a(e.icon),1),s("span",Ds,a(e.label),1)],10,Ls)),64))]),v.value==="posts"?(n(),l("div",Bs,[g.value?(n(),l("div",Hs,[t[10]||(t[10]=s("div",{class:"spinner"},null,-1)),s("p",null,a(o.$t("common.labels.loading")),1)])):_.value.length===0?(n(),l("div",Ns,[s("p",null,a(o.$t("common.labels.noResults")),1)])):(n(),l("div",Rs,[(n(!0),l(f,null,k(_.value,e=>(n(),l("div",{key:e.post_id,class:"post-card"},[s("div",Ts,[s("img",{src:e.author_avatar||"/assets/images/default-avatar.svg",alt:e.author_username,class:"post-avatar"},null,8,Ws),s("div",zs,[s("span",Is,"@"+a(e.author_username),1),s("span",Us,a(M(e.created_at)),1)])]),s("div",qs,[e.content_html?(n(),l("div",{key:0,innerHTML:e.content_html},null,8,As)):(n(),l("p",Gs,a(e.content_text),1))]),s("div",Js,[s("button",Os,[t[11]||(t[11]=s("span",{class:"icon"},"👍",-1)),s("span",null,a(e.reaction_count||0),1)]),s("button",js,[t[12]||(t[12]=s("span",{class:"icon"},"💬",-1)),s("span",null,a(e.comment_count||0),1)])])]))),128))])),S.value&&!g.value?(n(),l("div",Ks,[s("button",{onClick:q,class:"btn-secondary"},a(o.$t("common.buttons.loadMore")),1)])):u("",!0)])):u("",!0),v.value==="walls"?(n(),l("div",Qs,[$.value?(n(),l("div",Xs,[t[13]||(t[13]=s("div",{class:"spinner"},null,-1)),s("p",null,a(o.$t("common.labels.loading")),1)])):w.value.length===0?(n(),l("div",Ys,[...t[14]||(t[14]=[s("p",null,"No walls yet",-1)])])):(n(),l("div",Zs,[(n(!0),l(f,null,k(w.value,e=>(n(),l("div",{key:e.wall_id,class:"wall-card",onClick:c=>o.$router.push(`/wall/${e.wall_id}`)},[s("div",{class:"wall-banner",style:V({background:e.theme||"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"})},null,4),s("div",se,[s("h3",ee,a(e.display_name),1),e.description?(n(),l("p",te,a(e.description),1)):u("",!0),s("div",oe,[s("span",null,a(e.post_count||0)+" posts",1),s("span",null,a(e.follower_count||0)+" followers",1)])])],8,xs))),128))]))])):u("",!0),v.value==="media"?(n(),l("div",ae,[...t[15]||(t[15]=[s("div",{class:"empty-state"},[s("p",null,"Media gallery coming soon")],-1)])])):u("",!0),v.value==="likes"?(n(),l("div",le,[...t[16]||(t[16]=[s("div",{class:"empty-state"},[s("p",null,"Liked posts coming soon")],-1)])])):u("",!0)])])):u("",!0)]))}}),ce=Z(ne,[["__scopeId","data-v-47587bfc"]]);export{ce as default};
//# sourceMappingURL=ProfileView-DIBPnoQQ.js.map
