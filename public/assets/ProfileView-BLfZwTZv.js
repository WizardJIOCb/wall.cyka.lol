import{e as j,r as u,b as L,i as K,f as o,h as c,k as s,t as l,S as V,F as g,s as k,n as B,V as Q,u as X,o as n}from"./vendor-Cy2yCxOA.js";import{u as Y,b as f,_ as Z}from"./index-DHLdXu71.js";import"./utils-i9HKr1_Q.js";const x={class:"profile-view"},ss={key:0,class:"loading-container"},ts={key:1,class:"error-container"},es={key:2,class:"profile-content"},as={class:"profile-header"},ls={class:"profile-header-content"},os={class:"profile-avatar-section"},ns=["src","alt"],is={class:"profile-info"},rs={class:"profile-names"},us={class:"profile-username"},cs={key:0,class:"profile-display-name"},ds={key:0,class:"profile-bio"},vs={class:"profile-meta"},ps={key:0,class:"meta-item"},_s={class:"meta-item"},ms={key:1,class:"social-links"},fs=["href","title"],gs={class:"profile-actions"},hs={class:"icon"},ws={class:"profile-stats"},ys={key:0,class:"stat-item"},ks={class:"stat-value"},bs={class:"stat-value"},Cs={class:"stat-label"},$s={class:"stat-value"},Ps={class:"stat-label"},Ss={class:"stat-value"},Fs={class:"stat-item"},Ms={class:"stat-value"},Es={class:"stat-label"},Ls={class:"content-tabs"},Vs={class:"tabs-nav"},Bs=["onClick"],Ds={class:"tab-icon"},Hs={class:"tab-label"},Ns={key:0,class:"tab-content"},Rs={key:0,class:"loading-posts"},Ts={key:1,class:"empty-state"},Ws={key:2,class:"posts-grid"},zs={class:"post-header"},Is=["src","alt"],Us={class:"post-meta"},qs={class:"post-author"},As={class:"post-time"},Gs={class:"post-content"},Js=["innerHTML"],Os={key:1},js={class:"post-actions"},Ks={class:"action-btn"},Qs={class:"action-btn"},Xs={key:3,class:"load-more"},Ys={key:1,class:"tab-content"},Zs={key:0,class:"loading-posts"},xs={key:1,class:"empty-state"},st={key:2,class:"walls-grid"},tt=["onClick"],et={class:"wall-info"},at={class:"wall-title"},lt={key:0,class:"wall-description"},ot={class:"wall-stats"},nt={key:2,class:"tab-content"},it={key:3,class:"tab-content"},rt=j({__name:"ProfileView",props:{username:{}},setup(D){const H=D,N=Q();X();const b=Y(),C=u(!0),h=u(!1),$=u(!1),w=u(null),i=u(null),_=u([]),y=u([]),d=u({wallsCount:0,followersCount:0,followingCount:0,postsCount:0}),v=u("posts"),p=u(!1),P=u(1),F=u(!0),R=[{id:"posts",icon:"📝",label:"Posts"},{id:"walls",icon:"🧱",label:"Walls"},{id:"media",icon:"🖼️",label:"Media"},{id:"likes",icon:"❤️",label:"Likes"}],S=L(()=>i.value&&b.user&&i.value.user_id===b.user.user_id),T=L(()=>{var e;return(e=i.value)!=null&&e.cover_image_url?{backgroundImage:`url(${i.value.cover_image_url})`}:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}}),M=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),W=async()=>{var e,t,r;try{C.value=!0,w.value=null;const a=H.username||((e=b.user)==null?void 0:e.username);if(!a)throw new Error("Username is required");const m=await f.get(`/users/${a}`);if(m.data.success&&m.data.data.user)i.value=m.data.data.user,S.value||await z(),await Promise.all([E(),I(),U()]);else throw new Error(m.data.message||"Profile not found")}catch(a){console.error("Error loading profile:",a),w.value=((r=(t=a.response)==null?void 0:t.data)==null?void 0:r.message)||a.message||"Failed to load profile"}finally{C.value=!1}},z=async()=>{try{const e=await f.get(`/users/${i.value.user_id}/follow-status`);e.data.success&&(p.value=e.data.data.is_following||!1)}catch(e){console.error("Error loading follow status:",e)}},E=async()=>{try{h.value=!0;const e=20,t=(P.value-1)*e,r=await f.get(`/users/${i.value.user_id}/posts?limit=${e}&offset=${t}`);r.data.success&&r.data.data.posts&&(P.value===1?_.value=r.data.data.posts:_.value=[..._.value,...r.data.data.posts],F.value=r.data.data.posts.length===e)}catch(e){console.error("Error loading posts:",e)}finally{h.value=!1}},I=async()=>{try{$.value=!0;const e=await f.get(`/users/${i.value.user_id}/walls`);e.data.success&&e.data.data.walls&&(y.value=e.data.data.walls)}catch(e){console.error("Error loading walls:",e)}finally{$.value=!1}},U=async()=>{d.value={wallsCount:y.value.length,followersCount:i.value.followers_count||0,followingCount:i.value.following_count||0,postsCount:_.value.length}},q=()=>{P.value++,E()},A=async()=>{var e,t;try{p.value?(await f.delete(`/users/${i.value.user_id}/follow`),p.value=!1,d.value.followersCount--):(await f.post(`/users/${i.value.user_id}/follow`),p.value=!0,d.value.followersCount++)}catch(r){alert(((t=(e=r.response)==null?void 0:e.data)==null?void 0:t.message)||"Failed to update follow status")}},G=()=>{N.push(`/messages?user=${i.value.username}`)},J=()=>{console.log("Show followers modal")},O=()=>{console.log("Show following modal")};return K(()=>{W()}),(e,t)=>{var r;return n(),o("div",x,[C.value?(n(),o("div",ss,[t[3]||(t[3]=s("div",{class:"spinner"},null,-1)),s("p",null,l(e.$t("common.labels.loading")),1)])):w.value?(n(),o("div",ts,[s("h2",null,l(e.$t("common.labels.error")),1),s("p",null,l(w.value),1),s("button",{onClick:t[0]||(t[0]=a=>e.$router.push("/")),class:"btn-primary"},"Go Home")])):i.value?(n(),o("div",es,[s("div",{class:"profile-cover",style:V(T.value)},null,4),s("div",as,[s("div",ls,[s("div",os,[s("img",{src:i.value.avatar_url||"/assets/images/default-avatar.svg",alt:i.value.username,class:"profile-avatar"},null,8,ns)]),s("div",is,[s("div",rs,[s("h1",us,"@"+l(i.value.username),1),i.value.display_name?(n(),o("p",cs,l(i.value.display_name),1)):c("",!0)]),i.value.bio?(n(),o("p",ds,l(i.value.bio),1)):c("",!0),s("div",vs,[i.value.location?(n(),o("span",ps,[t[4]||(t[4]=s("span",{class:"icon"},"📍",-1)),s("span",null,l(i.value.location),1)])):c("",!0),s("span",_s,[t[5]||(t[5]=s("span",{class:"icon"},"📅",-1)),s("span",null,"Joined "+l(M(i.value.created_at)),1)])]),i.value.social_links&&i.value.social_links.length>0?(n(),o("div",ms,[(n(!0),o(g,null,k(i.value.social_links,a=>(n(),o("a",{key:a.link_id,href:a.url,target:"_blank",rel:"noopener noreferrer",class:"social-link",title:a.platform},[t[6]||(t[6]=s("span",{class:"icon"},"🔗",-1)),s("span",null,l(a.platform),1)],8,fs))),128))])):c("",!0)]),s("div",gs,[S.value?(n(),o("button",{key:0,onClick:t[1]||(t[1]=a=>e.$router.push("/settings")),class:"btn-secondary"},[...t[7]||(t[7]=[s("span",{class:"icon"},"⚙️",-1),s("span",null,"Edit Profile",-1)])])):(n(),o(g,{key:1},[s("button",{onClick:A,class:B(["btn-primary",{following:p.value}])},[s("span",hs,l(p.value?"✓":"+"),1),s("span",null,l(p.value?e.$t("common.actions.unfollow"):e.$t("common.actions.follow")),1)],2),s("button",{onClick:G,class:"btn-secondary"},[...t[8]||(t[8]=[s("span",{class:"icon"},"💬",-1),s("span",null,"Message",-1)])])],64))])]),s("div",ws,[S.value?(n(),o("div",ys,[s("span",ks,"🧱 "+l(((r=i.value.bricks_balance)==null?void 0:r.toLocaleString())||0),1),t[9]||(t[9]=s("span",{class:"stat-label"},"Bricks",-1))])):c("",!0),s("div",{class:"stat-item",onClick:t[2]||(t[2]=a=>v.value="walls")},[s("span",bs,l(d.value.wallsCount||0),1),s("span",Cs,l(e.$t("walls.stats.posts")),1)]),s("div",{class:"stat-item",onClick:J},[s("span",$s,l(d.value.followersCount||0),1),s("span",Ps,l(e.$t("walls.stats.followers")),1)]),s("div",{class:"stat-item",onClick:O},[s("span",Ss,l(d.value.followingCount||0),1),t[10]||(t[10]=s("span",{class:"stat-label"},"Following",-1))]),s("div",Fs,[s("span",Ms,l(d.value.postsCount||0),1),s("span",Es,l(e.$t("walls.stats.posts")),1)])])]),s("div",Ls,[s("div",Vs,[(n(),o(g,null,k(R,a=>s("button",{key:a.id,class:B(["tab-button",{active:v.value===a.id}]),onClick:m=>v.value=a.id},[s("span",Ds,l(a.icon),1),s("span",Hs,l(a.label),1)],10,Bs)),64))]),v.value==="posts"?(n(),o("div",Ns,[h.value?(n(),o("div",Rs,[t[11]||(t[11]=s("div",{class:"spinner"},null,-1)),s("p",null,l(e.$t("common.labels.loading")),1)])):_.value.length===0?(n(),o("div",Ts,[s("p",null,l(e.$t("common.labels.noResults")),1)])):(n(),o("div",Ws,[(n(!0),o(g,null,k(_.value,a=>(n(),o("div",{key:a.post_id,class:"post-card"},[s("div",zs,[s("img",{src:a.author_avatar||"/assets/images/default-avatar.svg",alt:a.author_username,class:"post-avatar"},null,8,Is),s("div",Us,[s("span",qs,"@"+l(a.author_username),1),s("span",As,l(M(a.created_at)),1)])]),s("div",Gs,[a.content_html?(n(),o("div",{key:0,innerHTML:a.content_html},null,8,Js)):(n(),o("p",Os,l(a.content_text),1))]),s("div",js,[s("button",Ks,[t[12]||(t[12]=s("span",{class:"icon"},"👍",-1)),s("span",null,l(a.reaction_count||0),1)]),s("button",Qs,[t[13]||(t[13]=s("span",{class:"icon"},"💬",-1)),s("span",null,l(a.comment_count||0),1)])])]))),128))])),F.value&&!h.value?(n(),o("div",Xs,[s("button",{onClick:q,class:"btn-secondary"},l(e.$t("common.buttons.loadMore")),1)])):c("",!0)])):c("",!0),v.value==="walls"?(n(),o("div",Ys,[$.value?(n(),o("div",Zs,[t[14]||(t[14]=s("div",{class:"spinner"},null,-1)),s("p",null,l(e.$t("common.labels.loading")),1)])):y.value.length===0?(n(),o("div",xs,[...t[15]||(t[15]=[s("p",null,"No walls yet",-1)])])):(n(),o("div",st,[(n(!0),o(g,null,k(y.value,a=>(n(),o("div",{key:a.wall_id,class:"wall-card",onClick:m=>e.$router.push(`/wall/${a.wall_id}`)},[s("div",{class:"wall-banner",style:V({background:a.theme||"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"})},null,4),s("div",et,[s("h3",at,l(a.display_name),1),a.description?(n(),o("p",lt,l(a.description),1)):c("",!0),s("div",ot,[s("span",null,l(a.post_count||0)+" posts",1),s("span",null,l(a.follower_count||0)+" followers",1)])])],8,tt))),128))]))])):c("",!0),v.value==="media"?(n(),o("div",nt,[...t[16]||(t[16]=[s("div",{class:"empty-state"},[s("p",null,"Media gallery coming soon")],-1)])])):c("",!0),v.value==="likes"?(n(),o("div",it,[...t[17]||(t[17]=[s("div",{class:"empty-state"},[s("p",null,"Liked posts coming soon")],-1)])])):c("",!0)])])):c("",!0)])}}}),vt=Z(rt,[["__scopeId","data-v-809f0ac0"]]);export{vt as default};
//# sourceMappingURL=ProfileView-BLfZwTZv.js.map
