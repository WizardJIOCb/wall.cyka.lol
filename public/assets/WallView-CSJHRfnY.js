import{f as H,r as d,b as C,e as N,g as l,j as v,k as s,t as u,U as V,F as $,x as L,v as B,u as j,i as o}from"./vendor-B5QdKGWw.js";import{u as R,b as f,_ as q}from"./index-CdCujijA.js";import"./utils-i9HKr1_Q.js";const z={class:"wall-view"},A={key:0,class:"loading-container"},G={key:1,class:"error-container"},O={key:2,class:"wall-content"},U={class:"wall-header"},J={class:"wall-info"},K={class:"wall-avatar"},Q=["src","alt"],X={class:"wall-details"},Y={class:"wall-title"},Z={key:0,class:"wall-owner"},ss={key:1,class:"wall-description"},ts={class:"wall-stats"},as={class:"stat"},es={class:"stat-value"},ls={class:"stat"},os={class:"stat-value"},ns={class:"posts-section"},is={key:0,class:"loading-posts"},rs={key:1,class:"empty-state"},us={key:2,class:"posts-grid"},cs={class:"post-header"},ds=["src","alt"],vs={class:"post-meta"},_s={class:"post-author"},ms={class:"post-time"},ps={class:"post-content"},ws=["innerHTML"],hs={key:1},fs={key:0,class:"post-media"},gs=["src","alt"],ys={class:"post-actions"},bs={class:"action-btn"},ks={class:"action-btn"},Ms={class:"action-btn"},Cs={key:3,class:"load-more"},g=20,$s=H({__name:"WallView",props:{wallId:{}},setup(P){const D=P;j();const E=B(),y=R(),w=d(!0),p=d(!1),_=d(null),e=d(null),m=d([]),h=d(1),b=d(!0),F=C(()=>e.value&&y.user&&e.value.user_id===y.user.id),I=C(()=>{var i;return(i=e.value)!=null&&i.theme?{backgroundColor:e.value.theme}:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}}),S=i=>{const t=new Date(i),c=new Date().getTime()-t.getTime(),r=Math.floor(c/6e4),n=Math.floor(c/36e5),M=Math.floor(c/864e5);return r<1?"just now":r<60?`${r}m ago`:n<24?`${n}h ago`:M<7?`${M}d ago`:t.toLocaleDateString()},T=async()=>{var i,t,a,c;try{w.value=!0,_.value=null;let r=D.wallId||E.params.wallId;if(!r)throw new Error("No wall identifier provided");let n;if(r==="me"?n=await f.get("/walls/me"):n=await f.get(`/walls/${r}`),n!=null&&n.success&&((i=n==null?void 0:n.data)!=null&&i.wall))e.value=n.data.wall,await k();else throw new Error((n==null?void 0:n.message)||"Wall not found")}catch(r){console.error("Error loading wall:",r),((t=r.response)==null?void 0:t.status)===404?_.value="The requested wall could not be found. It may not exist or you may not have permission to view it.":_.value=((c=(a=r.response)==null?void 0:a.data)==null?void 0:c.message)||r.message||"Failed to load wall"}finally{w.value=!1}},k=async()=>{var i;if(e.value)try{p.value=!0;const t=(h.value-1)*g,a=await f.get(`/walls/${e.value.wall_id}/posts?limit=${g}&offset=${t}`);a!=null&&a.success&&((i=a==null?void 0:a.data)!=null&&i.posts)&&(h.value===1?m.value=a.data.posts:m.value=[...m.value,...a.data.posts],b.value=a.data.posts.length===g)}catch(t){console.error("Error loading posts:",t)}finally{p.value=!1}},W=()=>{h.value++,k()},x=()=>{console.log("Create post functionality coming soon")};return N(()=>{T()}),(i,t)=>(o(),l("div",z,[w.value?(o(),l("div",A,[...t[1]||(t[1]=[s("div",{class:"spinner"},null,-1),s("p",null,"Loading wall...",-1)])])):_.value?(o(),l("div",G,[t[2]||(t[2]=s("h2",null,"Error Loading Wall",-1)),s("p",null,u(_.value),1),s("button",{onClick:t[0]||(t[0]=a=>i.$router.push("/")),class:"btn-primary"},"Go Home")])):e.value?(o(),l("div",O,[s("div",U,[s("div",{class:"wall-banner",style:V(I.value)},null,4),s("div",J,[s("div",K,[s("img",{src:e.value.owner_avatar||e.value.avatar_url||"/assets/images/default-avatar.svg",alt:e.value.owner_username||e.value.display_name},null,8,Q)]),s("div",X,[s("h1",Y,u(e.value.display_name),1),e.value.owner_username?(o(),l("p",Z,"by @"+u(e.value.owner_username),1)):v("",!0),e.value.description?(o(),l("p",ss,u(e.value.description),1)):v("",!0)]),s("div",ts,[s("div",as,[s("span",es,u(e.value.posts_count||0),1),t[3]||(t[3]=s("span",{class:"stat-label"},"Posts",-1))]),s("div",ls,[s("span",os,u(e.value.subscribers_count||0),1),t[4]||(t[4]=s("span",{class:"stat-label"},"Followers",-1))])])])]),s("div",ns,[t[10]||(t[10]=s("h2",{class:"section-title"},"Posts",-1)),p.value?(o(),l("div",is,[...t[5]||(t[5]=[s("div",{class:"spinner"},null,-1),s("p",null,"Loading posts...",-1)])])):m.value.length===0?(o(),l("div",rs,[t[6]||(t[6]=s("p",null,"No posts yet on this wall.",-1)),F.value?(o(),l("button",{key:0,onClick:x,class:"btn-primary"},"Create First Post")):v("",!0)])):(o(),l("div",us,[(o(!0),l($,null,L(m.value,a=>(o(),l("div",{key:a.post_id,class:"post-card"},[s("div",cs,[s("img",{src:a.author_avatar||"/assets/images/default-avatar.svg",alt:a.author_username,class:"post-avatar"},null,8,ds),s("div",vs,[s("span",_s,"@"+u(a.author_username),1),s("span",ms,u(S(a.created_at)),1)])]),s("div",ps,[a.content_html?(o(),l("div",{key:0,innerHTML:a.content_html},null,8,ws)):(o(),l("p",hs,u(a.content_text),1))]),a.media_attachments&&a.media_attachments.length>0?(o(),l("div",fs,[(o(!0),l($,null,L(a.media_attachments,c=>(o(),l("img",{key:c.attachment_id,src:c.file_url,alt:c.file_name},null,8,gs))),128))])):v("",!0),s("div",ys,[s("button",bs,[t[7]||(t[7]=s("span",{class:"icon"},"👍",-1)),s("span",null,u(a.reaction_count||0),1)]),s("button",ks,[t[8]||(t[8]=s("span",{class:"icon"},"💬",-1)),s("span",null,u(a.comment_count||0),1)]),s("button",Ms,[t[9]||(t[9]=s("span",{class:"icon"},"👁",-1)),s("span",null,u(a.view_count||0),1)])])]))),128))])),b.value&&!p.value?(o(),l("div",Cs,[s("button",{onClick:W,class:"btn-secondary"},"Load More")])):v("",!0)])])):v("",!0)]))}}),Es=q($s,[["__scopeId","data-v-9a888ce1"]]);export{Es as default};
//# sourceMappingURL=WallView-CSJHRfnY.js.map
