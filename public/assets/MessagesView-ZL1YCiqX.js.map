{"version":3,"file":"MessagesView-ZL1YCiqX.js","sources":["../../frontend/src/views/MessagesView.vue"],"sourcesContent":["<template>\r\n  <div class=\"messages-view\">\r\n    <div class=\"messages-container\">\r\n      <!-- Conversations List Panel -->\r\n      <div class=\"conversations-panel\">\r\n        <div class=\"conversations-header\">\r\n          <h2>{{ $t('navigation.messages') }}</h2>\r\n          <button @click=\"showNewMessageModal = true\" class=\"btn-new-message\">\r\n            <span class=\"icon\">‚úâÔ∏è</span>\r\n          </button>\r\n        </div>\r\n\r\n        <div class=\"search-bar\">\r\n          <input\r\n            v-model=\"conversationSearch\"\r\n            type=\"text\"\r\n            :placeholder=\"$t('common.actions.search') + ' conversations...'\"\r\n            class=\"search-input\"\r\n          />\r\n        </div>\r\n\r\n        <div v-if=\"loadingConversations\" class=\"loading-container\">\r\n          <div class=\"spinner\"></div>\r\n        </div>\r\n\r\n        <div v-else-if=\"filteredConversations.length === 0\" class=\"empty-conversations\">\r\n          <p>No conversations yet</p>\r\n        </div>\r\n\r\n        <div v-else class=\"conversations-list\">\r\n          <div\r\n            v-for=\"conversation in filteredConversations\"\r\n            :key=\"conversation.conversation_id\"\r\n            :class=\"['conversation-item', { active: activeConversationId === conversation.conversation_id }]\"\r\n            @click=\"selectConversation(conversation.conversation_id)\"\r\n          >\r\n            <div class=\"conversation-avatar\">\r\n              <img\r\n                :src=\"conversation.participant_avatar || '/assets/images/default-avatar.svg'\"\r\n                :alt=\"conversation.participant_name\"\r\n              />\r\n              <span v-if=\"conversation.is_online\" class=\"online-indicator\"></span>\r\n            </div>\r\n\r\n            <div class=\"conversation-info\">\r\n              <div class=\"conversation-name\">{{ conversation.participant_name }}</div>\r\n              <div class=\"conversation-preview\">{{ conversation.last_message || 'No messages' }}</div>\r\n            </div>\r\n\r\n            <div class=\"conversation-meta\">\r\n              <span class=\"conversation-time\">{{ formatTime(conversation.updated_at) }}</span>\r\n              <span v-if=\"conversation.unread_count > 0\" class=\"unread-badge\">\r\n                {{ conversation.unread_count }}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Active Conversation Panel -->\r\n      <div class=\"conversation-panel\">\r\n        <div v-if=\"!activeConversation\" class=\"no-conversation\">\r\n          <div class=\"empty-icon\">üí¨</div>\r\n          <h3>Select a conversation</h3>\r\n          <p>Choose a conversation from the list to start messaging</p>\r\n        </div>\r\n\r\n        <template v-else>\r\n          <!-- Conversation Header -->\r\n          <div class=\"conversation-header\">\r\n            <div class=\"header-info\">\r\n              <img\r\n                :src=\"activeConversation.participant_avatar || '/assets/images/default-avatar.svg'\"\r\n                :alt=\"activeConversation.participant_name\"\r\n                class=\"participant-avatar\"\r\n              />\r\n              <div class=\"participant-details\">\r\n                <div class=\"participant-name\">{{ activeConversation.participant_name }}</div>\r\n                <div class=\"participant-status\">\r\n                  {{ activeConversation.is_online ? 'Online' : 'Offline' }}\r\n                  <span v-if=\"isTyping\" class=\"typing-indicator\"> - typing...</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"header-actions\">\r\n              <button @click=\"viewProfile\" class=\"btn-icon\" title=\"View Profile\">\r\n                <span>üë§</span>\r\n              </button>\r\n              <button @click=\"deleteConversation\" class=\"btn-icon\" title=\"Delete Conversation\">\r\n                <span>üóëÔ∏è</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Messages Thread -->\r\n          <div ref=\"messagesContainer\" class=\"messages-thread\">\r\n            <div v-if=\"loadingMessages\" class=\"loading-container\">\r\n              <div class=\"spinner\"></div>\r\n            </div>\r\n\r\n            <div v-else-if=\"messages.length === 0\" class=\"empty-messages\">\r\n              <p>No messages yet. Start the conversation!</p>\r\n            </div>\r\n\r\n            <div v-else class=\"messages-list\">\r\n              <div\r\n                v-for=\"message in messages\"\r\n                :key=\"message.message_id\"\r\n                :class=\"['message-item', { own: message.is_own }]\"\r\n              >\r\n                <img\r\n                  v-if=\"!message.is_own\"\r\n                  :src=\"activeConversation.participant_avatar || '/assets/images/default-avatar.svg'\"\r\n                  :alt=\"activeConversation.participant_name\"\r\n                  class=\"message-avatar\"\r\n                />\r\n\r\n                <div class=\"message-bubble\">\r\n                  <div class=\"message-text\">{{ message.message_text }}</div>\r\n                  <div v-if=\"message.attachment_url\" class=\"message-attachment\">\r\n                    <img :src=\"message.attachment_url\" alt=\"Attachment\" class=\"attachment-image\" />\r\n                  </div>\r\n                  <div class=\"message-time\">\r\n                    {{ formatMessageTime(message.created_at) }}\r\n                    <span v-if=\"message.edited_at\" class=\"edited-label\">(edited)</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div v-if=\"isTyping\" class=\"typing-bubble\">\r\n                <div class=\"typing-dots\">\r\n                  <span></span>\r\n                  <span></span>\r\n                  <span></span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Message Input -->\r\n          <div class=\"message-input-container\">\r\n            <button @click=\"attachFile\" class=\"btn-attach\" title=\"Attach File\">\r\n              <span>üìé</span>\r\n            </button>\r\n\r\n            <textarea\r\n              v-model=\"messageText\"\r\n              @keydown.enter.exact.prevent=\"sendMessage\"\r\n              @input=\"handleTyping\"\r\n              placeholder=\"Type a message...\"\r\n              class=\"message-input\"\r\n              rows=\"1\"\r\n            ></textarea>\r\n\r\n            <button @click=\"sendMessage\" :disabled=\"!messageText.trim()\" class=\"btn-send\">\r\n              <span>üì§</span>\r\n            </button>\r\n          </div>\r\n        </template>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- New Message Modal -->\r\n    <div v-if=\"showNewMessageModal\" class=\"modal-overlay\" @click=\"showNewMessageModal = false\">\r\n      <div class=\"modal-content\" @click.stop>\r\n        <div class=\"modal-header\">\r\n          <h3>New Message</h3>\r\n          <button @click=\"showNewMessageModal = false\" class=\"btn-close\">√ó</button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <input\r\n            v-model=\"newMessageUsername\"\r\n            type=\"text\"\r\n            placeholder=\"Enter username...\"\r\n            class=\"username-input\"\r\n          />\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button @click=\"showNewMessageModal = false\" class=\"btn-secondary\">Cancel</button>\r\n          <button @click=\"startNewConversation\" class=\"btn-primary\">Start</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, onMounted, onUnmounted, nextTick, watch } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { useAuthStore } from '@/stores/auth'\r\nimport apiClient from '@/services/api/client'\r\n\r\nconst props = defineProps<{ conversationId?: string }>()\r\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\nconst authStore = useAuthStore()\r\n\r\nconst conversations = ref<any[]>([])\r\nconst messages = ref<any[]>([])\r\nconst activeConversationId = ref<number | null>(null)\r\nconst conversationSearch = ref('')\r\nconst messageText = ref('')\r\nconst loadingConversations = ref(true)\r\nconst loadingMessages = ref(false)\r\nconst isTyping = ref(false)\r\nconst showNewMessageModal = ref(false)\r\nconst newMessageUsername = ref('')\r\nconst messagesContainer = ref<HTMLElement | null>(null)\r\nlet typingTimeout: any = null\r\nlet pollInterval: any = null\r\n\r\nconst filteredConversations = computed(() => {\r\n  if (!conversationSearch.value) return conversations.value\r\n  \r\n  const search = conversationSearch.value.toLowerCase()\r\n  return conversations.value.filter(c =>\r\n    c.participant_name.toLowerCase().includes(search) ||\r\n    c.last_message?.toLowerCase().includes(search)\r\n  )\r\n})\r\n\r\nconst activeConversation = computed(() => {\r\n  if (!activeConversationId.value) return null\r\n  return conversations.value.find(c => c.conversation_id === activeConversationId.value)\r\n})\r\n\r\nconst formatTime = (dateString: string) => {\r\n  const date = new Date(dateString)\r\n  const now = new Date()\r\n  const diffMs = now.getTime() - date.getTime()\r\n  const diffMins = Math.floor(diffMs / 60000)\r\n  const diffHours = Math.floor(diffMs / 3600000)\r\n  const diffDays = Math.floor(diffMs / 86400000)\r\n\r\n  if (diffMins < 1) return 'now'\r\n  if (diffMins < 60) return `${diffMins}m`\r\n  if (diffHours < 24) return `${diffHours}h`\r\n  if (diffDays === 1) return 'yesterday'\r\n  if (diffDays < 7) return `${diffDays}d`\r\n  return date.toLocaleDateString()\r\n}\r\n\r\nconst formatMessageTime = (dateString: string) => {\r\n  const date = new Date(dateString)\r\n  return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n}\r\n\r\nconst loadConversations = async () => {\r\n  try {\r\n    loadingConversations.value = true\r\n    const response = await apiClient.get('/conversations')\r\n    \r\n    // Handle different response structures\r\n    if (response?.data?.success && response?.data?.data?.conversations) {\r\n      conversations.value = response.data.data.conversations\r\n    } else if (response?.data?.conversations) {\r\n      conversations.value = response.data.conversations\r\n    } else if (Array.isArray(response?.data)) {\r\n      conversations.value = response.data\r\n    } else {\r\n      conversations.value = []\r\n    }\r\n  } catch (err) {\r\n    console.error('Error loading conversations:', err)\r\n    conversations.value = []\r\n  } finally {\r\n    loadingConversations.value = false\r\n  }\r\n}\r\n\r\nconst loadMessages = async () => {\r\n  if (!activeConversationId.value) return\r\n\r\n  try {\r\n    loadingMessages.value = true\r\n    const response = await apiClient.get(`/conversations/${activeConversationId.value}/messages`)\r\n    \r\n    if (response.data.success && response.data.data.messages) {\r\n      messages.value = response.data.data.messages.map((msg: any) => ({\r\n        ...msg,\r\n        is_own: msg.sender_id === authStore.user?.user_id\r\n      }))\r\n      \r\n      await nextTick()\r\n      scrollToBottom()\r\n      markAsRead()\r\n    }\r\n  } catch (err) {\r\n    console.error('Error loading messages:', err)\r\n  } finally {\r\n    loadingMessages.value = false\r\n  }\r\n}\r\n\r\nconst selectConversation = (conversationId: number) => {\r\n  activeConversationId.value = conversationId\r\n  router.push(`/messages/${conversationId}`)\r\n  loadMessages()\r\n}\r\n\r\nconst sendMessage = async () => {\r\n  if (!messageText.value.trim() || !activeConversationId.value) return\r\n\r\n  const optimisticMessage = {\r\n    message_id: Date.now(),\r\n    message_text: messageText.value.trim(),\r\n    is_own: true,\r\n    created_at: new Date().toISOString(),\r\n    sending: true\r\n  }\r\n\r\n  try {\r\n    // Optimistic update\r\n    messages.value.push(optimisticMessage)\r\n    const textToSend = messageText.value.trim()\r\n    messageText.value = ''\r\n    \r\n    await nextTick()\r\n    scrollToBottom()\r\n\r\n    const response = await apiClient.post(`/conversations/${activeConversationId.value}/messages`, {\r\n      message_text: textToSend\r\n    })\r\n\r\n    if (response.data.success && response.data.data.message) {\r\n      // Replace optimistic message with real one\r\n      const index = messages.value.findIndex(m => m.message_id === optimisticMessage.message_id)\r\n      if (index !== -1) {\r\n        messages.value[index] = {\r\n          ...response.data.data.message,\r\n          is_own: true\r\n        }\r\n      }\r\n      \r\n      // Update conversation last message\r\n      const conv = conversations.value.find(c => c.conversation_id === activeConversationId.value)\r\n      if (conv) {\r\n        conv.last_message = textToSend\r\n        conv.updated_at = response.data.data.message.created_at\r\n      }\r\n    }\r\n  } catch (err: any) {\r\n    // Remove optimistic message on error\r\n    messages.value = messages.value.filter(m => m.message_id !== optimisticMessage.message_id)\r\n    messageText.value = optimisticMessage.message_text\r\n    toast.error(err.message || 'Failed to send message')\r\n  }\r\n}\r\n\r\nconst handleTyping = () => {\r\n  if (!activeConversationId.value) return\r\n\r\n  // Send typing indicator\r\n  apiClient.post(`/conversations/${activeConversationId.value}/typing`)\r\n\r\n  // Clear existing timeout\r\n  if (typingTimeout) {\r\n    clearTimeout(typingTimeout)\r\n  }\r\n\r\n  // Set new timeout\r\n  typingTimeout = setTimeout(() => {\r\n    // Typing stopped\r\n  }, 2000)\r\n}\r\n\r\nconst markAsRead = async () => {\r\n  if (!activeConversationId.value) return\r\n\r\n  try {\r\n    await apiClient.patch(`/conversations/${activeConversationId.value}/read`)\r\n    \r\n    // Update local state\r\n    const conv = conversations.value.find(c => c.conversation_id === activeConversationId.value)\r\n    if (conv) {\r\n      conv.unread_count = 0\r\n    }\r\n  } catch (err) {\r\n    console.error('Error marking as read:', err)\r\n  }\r\n}\r\n\r\nconst scrollToBottom = () => {\r\n  if (messagesContainer.value) {\r\n    messagesContainer.value.scrollTop = messagesContainer.value.scrollHeight\r\n  }\r\n}\r\n\r\nconst startNewConversation = async () => {\r\n  if (!newMessageUsername.value.trim()) return\r\n\r\n  try {\r\n    const response = await apiClient.post('/conversations', {\r\n      participant_username: newMessageUsername.value.trim()\r\n    })\r\n\r\n    if (response.data.success && response.data.data.conversation) {\r\n      const newConv = response.data.data.conversation\r\n      conversations.value.unshift(newConv)\r\n      selectConversation(newConv.conversation_id)\r\n      showNewMessageModal.value = false\r\n      newMessageUsername.value = ''\r\n    }\r\n  } catch (err: any) {\r\n    alert(err.response?.data?.message || 'Failed to start conversation')\r\n  }\r\n}\r\n\r\nconst deleteConversation = async () => {\r\n  if (!activeConversationId.value || !confirm('Delete this conversation?')) return\r\n\r\n  try {\r\n    await apiClient.delete(`/conversations/${activeConversationId.value}`)\r\n    \r\n    conversations.value = conversations.value.filter(c => c.conversation_id !== activeConversationId.value)\r\n    activeConversationId.value = null\r\n    messages.value = []\r\n  } catch (err: any) {\r\n    alert(err.response?.data?.message || 'Failed to delete conversation')\r\n  }\r\n}\r\n\r\nconst viewProfile = () => {\r\n  if (activeConversation.value) {\r\n    router.push(`/profile/${activeConversation.value.participant_username}`)\r\n  }\r\n}\r\n\r\nconst attachFile = () => {\r\n  console.log('File attachment coming soon')\r\n}\r\n\r\nconst startPolling = () => {\r\n  if (pollInterval) return\r\n\r\n  pollInterval = setInterval(async () => {\r\n    if (activeConversationId.value) {\r\n      // Poll for new messages\r\n      const lastMessageId = messages.value[messages.value.length - 1]?.message_id\r\n      try {\r\n        const response = await apiClient.get(\r\n          `/conversations/${activeConversationId.value}/messages?after=${lastMessageId || 0}`\r\n        )\r\n        \r\n        if (response.data.success && response.data.data.messages) {\r\n          const newMessages = response.data.data.messages.map((msg: any) => ({\r\n            ...msg,\r\n            is_own: msg.sender_id === authStore.user?.user_id\r\n          }))\r\n          \r\n          if (newMessages.length > 0) {\r\n            messages.value.push(...newMessages)\r\n            await nextTick()\r\n            scrollToBottom()\r\n            markAsRead()\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.error('Error polling messages:', err)\r\n      }\r\n\r\n      // Check typing status\r\n      try {\r\n        const response = await apiClient.get(`/conversations/${activeConversationId.value}/typing`)\r\n        if (response.data.success && response.data.data.typing_users) {\r\n          isTyping.value = response.data.data.typing_users.length > 0\r\n        }\r\n      } catch (err) {\r\n        console.error('Error checking typing status:', err)\r\n      }\r\n    }\r\n  }, 3000)\r\n}\r\n\r\nconst stopPolling = () => {\r\n  if (pollInterval) {\r\n    clearInterval(pollInterval)\r\n    pollInterval = null\r\n  }\r\n}\r\n\r\nwatch(() => props.conversationId, (newId) => {\r\n  if (newId) {\r\n    activeConversationId.value = parseInt(newId)\r\n    loadMessages()\r\n  }\r\n})\r\n\r\nonMounted(() => {\r\n  loadConversations()\r\n  \r\n  if (props.conversationId) {\r\n    activeConversationId.value = parseInt(props.conversationId)\r\n    loadMessages()\r\n  }\r\n  \r\n  startPolling()\r\n})\r\n\r\nonUnmounted(() => {\r\n  stopPolling()\r\n  if (typingTimeout) {\r\n    clearTimeout(typingTimeout)\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.messages-view {\r\n  height: calc(100vh - 80px);\r\n  padding: 0;\r\n}\r\n\r\n.messages-container {\r\n  display: grid;\r\n  grid-template-columns: 350px 1fr;\r\n  height: 100%;\r\n  background: var(--color-bg-primary);\r\n}\r\n\r\n.conversations-panel {\r\n  background: var(--color-bg-elevated);\r\n  border-right: 2px solid var(--color-border);\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n}\r\n\r\n.conversations-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: var(--spacing-4);\r\n  border-bottom: 2px solid var(--color-border);\r\n}\r\n\r\n.conversations-header h2 {\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  color: var(--color-text-primary);\r\n}\r\n\r\n.btn-new-message {\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: var(--color-primary);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  font-size: 1.25rem;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.btn-new-message:hover {\r\n  transform: scale(1.1);\r\n}\r\n\r\n.search-bar {\r\n  padding: var(--spacing-4);\r\n  border-bottom: 1px solid var(--color-border);\r\n}\r\n\r\n.search-input {\r\n  width: 100%;\r\n  padding: var(--spacing-3);\r\n  border: 2px solid var(--color-border);\r\n  border-radius: var(--radius-md);\r\n  background: var(--color-bg-primary);\r\n  color: var(--color-text-primary);\r\n}\r\n\r\n.conversations-list {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n}\r\n\r\n.conversation-item {\r\n  display: grid;\r\n  grid-template-columns: auto 1fr auto;\r\n  gap: var(--spacing-3);\r\n  padding: var(--spacing-4);\r\n  border-bottom: 1px solid var(--color-border);\r\n  cursor: pointer;\r\n  transition: background 0.2s;\r\n}\r\n\r\n.conversation-item:hover {\r\n  background: var(--color-bg-secondary);\r\n}\r\n\r\n.conversation-item.active {\r\n  background: var(--color-primary);\r\n  color: white;\r\n}\r\n\r\n.conversation-item.active .conversation-name,\r\n.conversation-item.active .conversation-preview,\r\n.conversation-item.active .conversation-time {\r\n  color: white;\r\n}\r\n\r\n.conversation-avatar {\r\n  position: relative;\r\n  width: 48px;\r\n  height: 48px;\r\n}\r\n\r\n.conversation-avatar img {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n}\r\n\r\n.online-indicator {\r\n  position: absolute;\r\n  bottom: 0;\r\n  right: 0;\r\n  width: 12px;\r\n  height: 12px;\r\n  background: #10b981;\r\n  border: 2px solid var(--color-bg-elevated);\r\n  border-radius: 50%;\r\n}\r\n\r\n.conversation-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: var(--spacing-1);\r\n  min-width: 0;\r\n}\r\n\r\n.conversation-name {\r\n  font-weight: 600;\r\n  color: var(--color-text-primary);\r\n}\r\n\r\n.conversation-preview {\r\n  font-size: 0.875rem;\r\n  color: var(--color-text-secondary);\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.conversation-meta {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n  gap: var(--spacing-2);\r\n}\r\n\r\n.conversation-time {\r\n  font-size: 0.75rem;\r\n  color: var(--color-text-secondary);\r\n}\r\n\r\n.unread-badge {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  min-width: 20px;\r\n  height: 20px;\r\n  padding: 0 6px;\r\n  background: var(--color-primary);\r\n  color: white;\r\n  border-radius: var(--radius-full);\r\n  font-size: 0.75rem;\r\n  font-weight: 700;\r\n}\r\n\r\n.conversation-panel {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n}\r\n\r\n.no-conversation {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  text-align: center;\r\n  padding: var(--spacing-8);\r\n}\r\n\r\n.empty-icon {\r\n  font-size: 4rem;\r\n  margin-bottom: var(--spacing-4);\r\n}\r\n\r\n.conversation-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: var(--spacing-4);\r\n  background: var(--color-bg-elevated);\r\n  border-bottom: 2px solid var(--color-border);\r\n}\r\n\r\n.header-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: var(--spacing-3);\r\n}\r\n\r\n.participant-avatar {\r\n  width: 48px;\r\n  height: 48px;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n}\r\n\r\n.participant-name {\r\n  font-weight: 700;\r\n  color: var(--color-text-primary);\r\n}\r\n\r\n.participant-status {\r\n  font-size: 0.875rem;\r\n  color: var(--color-text-secondary);\r\n}\r\n\r\n.typing-indicator {\r\n  color: var(--color-primary);\r\n  font-style: italic;\r\n}\r\n\r\n.header-actions {\r\n  display: flex;\r\n  gap: var(--spacing-2);\r\n}\r\n\r\n.btn-icon {\r\n  width: 36px;\r\n  height: 36px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: var(--color-bg-secondary);\r\n  border: none;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  font-size: 1.25rem;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.btn-icon:hover {\r\n  background: var(--color-primary);\r\n  transform: scale(1.1);\r\n}\r\n\r\n.messages-thread {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: var(--spacing-4);\r\n  background: var(--color-bg-primary);\r\n}\r\n\r\n.messages-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: var(--spacing-3);\r\n}\r\n\r\n.message-item {\r\n  display: flex;\r\n  gap: var(--spacing-3);\r\n  align-items: flex-start;\r\n}\r\n\r\n.message-item.own {\r\n  flex-direction: row-reverse;\r\n}\r\n\r\n.message-avatar {\r\n  width: 32px;\r\n  height: 32px;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.message-bubble {\r\n  max-width: 70%;\r\n  padding: var(--spacing-3) var(--spacing-4);\r\n  background: var(--color-bg-elevated);\r\n  border-radius: var(--radius-lg);\r\n}\r\n\r\n.message-item.own .message-bubble {\r\n  background: var(--color-primary);\r\n  color: white;\r\n}\r\n\r\n.message-text {\r\n  line-height: 1.5;\r\n  word-wrap: break-word;\r\n}\r\n\r\n.message-attachment {\r\n  margin-top: var(--spacing-2);\r\n}\r\n\r\n.attachment-image {\r\n  max-width: 100%;\r\n  border-radius: var(--radius-md);\r\n}\r\n\r\n.message-time {\r\n  margin-top: var(--spacing-2);\r\n  font-size: 0.75rem;\r\n  opacity: 0.7;\r\n}\r\n\r\n.edited-label {\r\n  font-style: italic;\r\n}\r\n\r\n.typing-bubble {\r\n  display: flex;\r\n  gap: var(--spacing-3);\r\n  align-items: center;\r\n}\r\n\r\n.typing-dots {\r\n  display: flex;\r\n  gap: 4px;\r\n  padding: var(--spacing-3) var(--spacing-4);\r\n  background: var(--color-bg-elevated);\r\n  border-radius: var(--radius-lg);\r\n}\r\n\r\n.typing-dots span {\r\n  width: 8px;\r\n  height: 8px;\r\n  background: var(--color-text-secondary);\r\n  border-radius: 50%;\r\n  animation: typing 1.4s infinite;\r\n}\r\n\r\n.typing-dots span:nth-child(2) {\r\n  animation-delay: 0.2s;\r\n}\r\n\r\n.typing-dots span:nth-child(3) {\r\n  animation-delay: 0.4s;\r\n}\r\n\r\n@keyframes typing {\r\n  0%, 60%, 100% {\r\n    transform: translateY(0);\r\n  }\r\n  30% {\r\n    transform: translateY(-10px);\r\n  }\r\n}\r\n\r\n.message-input-container {\r\n  display: flex;\r\n  gap: var(--spacing-3);\r\n  padding: var(--spacing-4);\r\n  background: var(--color-bg-elevated);\r\n  border-top: 2px solid var(--color-border);\r\n}\r\n\r\n.btn-attach,\r\n.btn-send {\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: var(--color-bg-secondary);\r\n  border: none;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  font-size: 1.25rem;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.btn-send {\r\n  background: var(--color-primary);\r\n}\r\n\r\n.btn-send:hover:not(:disabled) {\r\n  transform: scale(1.1);\r\n}\r\n\r\n.btn-send:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.message-input {\r\n  flex: 1;\r\n  padding: var(--spacing-3);\r\n  border: 2px solid var(--color-border);\r\n  border-radius: var(--radius-md);\r\n  font-family: inherit;\r\n  font-size: 1rem;\r\n  background: var(--color-bg-primary);\r\n  color: var(--color-text-primary);\r\n  resize: none;\r\n  max-height: 120px;\r\n}\r\n\r\n.message-input:focus {\r\n  outline: none;\r\n  border-color: var(--color-primary);\r\n}\r\n\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.modal-content {\r\n  background: var(--color-bg-elevated);\r\n  border-radius: var(--radius-lg);\r\n  width: 90%;\r\n  max-width: 500px;\r\n  box-shadow: var(--shadow-lg);\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: var(--spacing-4);\r\n  border-bottom: 2px solid var(--color-border);\r\n}\r\n\r\n.modal-header h3 {\r\n  font-size: 1.25rem;\r\n  font-weight: 700;\r\n  color: var(--color-text-primary);\r\n}\r\n\r\n.btn-close {\r\n  width: 32px;\r\n  height: 32px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: transparent;\r\n  border: none;\r\n  font-size: 2rem;\r\n  cursor: pointer;\r\n  color: var(--color-text-secondary);\r\n}\r\n\r\n.modal-body {\r\n  padding: var(--spacing-6);\r\n}\r\n\r\n.username-input {\r\n  width: 100%;\r\n  padding: var(--spacing-3);\r\n  border: 2px solid var(--color-border);\r\n  border-radius: var(--radius-md);\r\n  font-size: 1rem;\r\n  background: var(--color-bg-primary);\r\n  color: var(--color-text-primary);\r\n}\r\n\r\n.modal-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: var(--spacing-3);\r\n  padding: var(--spacing-4);\r\n  border-top: 2px solid var(--color-border);\r\n}\r\n\r\n.btn-primary,\r\n.btn-secondary {\r\n  padding: var(--spacing-3) var(--spacing-6);\r\n  border-radius: var(--radius-md);\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  border: none;\r\n}\r\n\r\n.btn-primary {\r\n  background: var(--color-primary);\r\n  color: white;\r\n}\r\n\r\n.btn-secondary {\r\n  background: transparent;\r\n  color: var(--color-primary);\r\n  border: 2px solid var(--color-primary);\r\n}\r\n\r\n.loading-container {\r\n  text-align: center;\r\n  padding: var(--spacing-8);\r\n}\r\n\r\n.spinner {\r\n  width: 40px;\r\n  height: 40px;\r\n  margin: 0 auto;\r\n  border: 4px solid rgba(0, 0, 0, 0.1);\r\n  border-left-color: var(--color-primary);\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  to { transform: rotate(360deg); }\r\n}\r\n\r\n.empty-conversations,\r\n.empty-messages {\r\n  text-align: center;\r\n  padding: var(--spacing-8);\r\n  color: var(--color-text-secondary);\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .messages-container {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .conversations-panel {\r\n    display: none;\r\n  }\r\n  \r\n  .conversations-panel.show-mobile {\r\n    display: flex;\r\n  }\r\n  \r\n  .message-bubble {\r\n    max-width: 85%;\r\n  }\r\n}\r\n</style>\r\n"],"names":["props","__props","useRoute","router","useRouter","authStore","useAuthStore","conversations","ref","messages","activeConversationId","conversationSearch","messageText","loadingConversations","loadingMessages","isTyping","showNewMessageModal","newMessageUsername","messagesContainer","typingTimeout","pollInterval","filteredConversations","computed","search","c","_a","activeConversation","formatTime","dateString","date","diffMs","diffMins","diffHours","diffDays","formatMessageTime","loadConversations","response","apiClient","_c","_b","_d","err","loadMessages","msg","nextTick","scrollToBottom","markAsRead","selectConversation","conversationId","sendMessage","optimisticMessage","textToSend","index","conv","m","handleTyping","startNewConversation","newConv","deleteConversation","viewProfile","attachFile","startPolling","lastMessageId","newMessages","stopPolling","watch","newId","onMounted","onUnmounted","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","$t","_hoisted_5","$event","_hoisted_7","_cache","_hoisted_8","_hoisted_9","_Fragment","_renderList","conversation","_normalizeClass","_hoisted_11","_hoisted_13","_hoisted_14","_hoisted_15","_toDisplayString","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_22","_hoisted_23","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","message","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_37","_createTextVNode","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_21","_hoisted_43","_hoisted_44","_hoisted_45"],"mappings":"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"}