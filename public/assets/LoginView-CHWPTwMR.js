import{b as v,e as N,r as P,f as p,n as A,h as V,k as r,D as S,v as U,t as k,E as $,G as z,o as c,H as x,I as E,l as f,J as L,m as R,K as D}from"./vendor-DTOKxEoQ.js";import{u as O,g as G,_ as M,M as W,U as H,A as B,a as Y}from"./index-CCsWTdYX.js";import"./utils-i9HKr1_Q.js";const Z=()=>{const t=O(),g=v(()=>t.user),n=v(()=>t.isAuthenticated),u=v(()=>!t.initialized);return{user:g,isAuthenticated:n,isLoading:u,login:async s=>t.login(s),register:async s=>t.register(s),logout:async()=>t.logout(),updateProfile:s=>t.updateUser(s)}},j=["for"],J={key:0,class:"required"},K={class:"input-container"},Q=["id","type","placeholder","disabled","required","autocomplete"],X={key:1,class:"input-error"},_={key:2,class:"input-help"},ee=N({__name:"AppInput",props:{modelValue:{},type:{default:"text"},label:{},placeholder:{},error:{},help:{},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},autocomplete:{}},emits:["update:modelValue","blur","focus"],setup(t,{emit:g}){const n=t,u=g,m=G(),i=P(!1),d=v({get:()=>n.modelValue,set:w=>u("update:modelValue",w)}),a=v(()=>["input",{"input-error":n.error,"input-focused":i.value,"input-disabled":n.disabled}]),s=w=>{const y=w.target;u("update:modelValue",y.value)},h=()=>{i.value=!1,u("blur")},q=()=>{i.value=!0,u("focus")};return(w,y)=>(c(),p("div",{class:A(["input-wrapper",{"has-error":t.error}])},[t.label?(c(),p("label",{key:0,for:S(m),class:"input-label"},[U(k(t.label)+" ",1),t.required?(c(),p("span",J,"*")):V("",!0)],8,j)):V("",!0),r("div",K,[$(r("input",{id:S(m),"onUpdate:modelValue":y[0]||(y[0]=C=>d.value=C),type:t.type,placeholder:t.placeholder,disabled:t.disabled,required:t.required,autocomplete:t.autocomplete,class:A(a.value),onInput:s,onBlur:h,onFocus:q},null,42,Q),[[z,d.value]])]),t.error?(c(),p("p",X,k(t.error),1)):t.help?(c(),p("p",_,k(t.help),1)):V("",!0)],2))}}),b=M(ee,[["__scopeId","data-v-6944d8b7"]]),te=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),re=t=>H.test(t),F=t=>{const g=t.length>=W;let n=0;return t.length>=8&&n++,t.length>=12&&n++,/[a-z]/.test(t)&&n++,/[A-Z]/.test(t)&&n++,/[0-9]/.test(t)&&n++,/[^a-zA-Z0-9]/.test(t)&&n++,{valid:g,strength:Math.min(n,5)}},se={class:"auth-form-container"},ae={class:"auth-tabs"},oe={class:"form-checkbox"},le={key:0,class:"password-strength"},ne={class:"strength-bar"},ie=["data-strength"],ue={class:"strength-text"},de={class:"form-checkbox"},me={key:0,class:"form-error"},pe={class:"oauth-section"},ce={class:"oauth-buttons"},fe=N({__name:"LoginView",setup(t){const{login:g,register:n}=Z(),u=P("login"),m=P(!1),i=x({identifier:"",password:"",remember:!1}),d=x({identifier:"",password:""}),a=x({username:"",email:"",password:"",password_confirm:"",display_name:"",terms:!1}),s=x({username:"",email:"",password:"",password_confirm:"",display_name:"",terms:""}),h=v(()=>F(a.password).strength),q=v(()=>{const l=h.value;return l===0?"Very Weak":l===1?"Weak":l===2?"Fair":l===3?"Good":l>=4?"Strong":""}),w=()=>(d.identifier="",d.password="",i.identifier?i.password?!0:(d.password="Password is required",!1):(d.identifier="Username or email is required",!1)),y=()=>(s.username="",s.email="",s.password="",s.password_confirm="",s.terms="",!a.username||!re(a.username)?(s.username="Invalid username format",!1):!a.email||!te(a.email)?(s.email="Invalid email address",!1):F(a.password).valid?a.password!==a.password_confirm?(s.password_confirm="Passwords do not match",!1):a.terms?!0:(s.terms="You must agree to the terms",!1):(s.password="Password must be at least 8 characters",!1)),C=async()=>{if(w()){m.value=!0;try{await g(i)}catch(l){d.password=l.message||"Login failed"}finally{m.value=!1}}},T=async()=>{if(y()){m.value=!0;try{await n(a)}catch(l){l.errors?Object.assign(s,l.errors):s.username=l.message||"Registration failed"}finally{m.value=!1}}},I=l=>{const e=Y.getOAuthURL(l);window.location.href=e};return(l,e)=>(c(),p("div",se,[r("div",ae,[r("button",{class:A(["auth-tab",{active:u.value==="login"}]),onClick:e[0]||(e[0]=o=>u.value="login")}," Login ",2),r("button",{class:A(["auth-tab",{active:u.value==="register"}]),onClick:e[1]||(e[1]=o=>u.value="register")}," Register ",2)]),u.value==="login"?(c(),p("form",{key:0,class:"auth-form",onSubmit:E(C,["prevent"])},[e[16]||(e[16]=r("h2",{class:"form-title"},"Welcome Back",-1)),f(b,{modelValue:i.identifier,"onUpdate:modelValue":e[2]||(e[2]=o=>i.identifier=o),label:"Username or Email",type:"text",autocomplete:"username",required:"",error:d.identifier},null,8,["modelValue","error"]),f(b,{modelValue:i.password,"onUpdate:modelValue":e[3]||(e[3]=o=>i.password=o),label:"Password",type:"password",autocomplete:"current-password",required:"",error:d.password},null,8,["modelValue","error"]),r("div",oe,[$(r("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>i.remember=o),type:"checkbox",id:"remember-me"},null,512),[[L,i.remember]]),e[14]||(e[14]=r("label",{for:"remember-me"},"Remember me",-1))]),f(B,{type:"submit",variant:"primary",size:"lg",block:"",loading:m.value},{default:R(()=>[...e[15]||(e[15]=[U(" Login ",-1)])]),_:1},8,["loading"]),e[17]||(e[17]=r("div",{class:"form-footer"},[r("a",{href:"#/forgot-password",class:"link-secondary"},"Forgot password?")],-1))],32)):(c(),p("form",{key:1,class:"auth-form",onSubmit:E(T,["prevent"])},[e[20]||(e[20]=r("h2",{class:"form-title"},"Create Account",-1)),f(b,{modelValue:a.username,"onUpdate:modelValue":e[5]||(e[5]=o=>a.username=o),label:"Username",type:"text",autocomplete:"username",required:"",error:s.username,help:"3-50 characters, letters, numbers, underscore only"},null,8,["modelValue","error"]),f(b,{modelValue:a.email,"onUpdate:modelValue":e[6]||(e[6]=o=>a.email=o),label:"Email",type:"email",autocomplete:"email",required:"",error:s.email},null,8,["modelValue","error"]),f(b,{modelValue:a.password,"onUpdate:modelValue":e[7]||(e[7]=o=>a.password=o),label:"Password",type:"password",autocomplete:"new-password",required:"",error:s.password,help:"Minimum 8 characters"},null,8,["modelValue","error"]),a.password?(c(),p("div",le,[r("div",ne,[r("div",{class:"strength-fill",style:D({width:`${h.value*20}%`}),"data-strength":h.value},null,12,ie)]),r("span",ue,k(q.value),1)])):V("",!0),f(b,{modelValue:a.password_confirm,"onUpdate:modelValue":e[8]||(e[8]=o=>a.password_confirm=o),label:"Confirm Password",type:"password",autocomplete:"new-password",required:"",error:s.password_confirm},null,8,["modelValue","error"]),f(b,{modelValue:a.display_name,"onUpdate:modelValue":e[9]||(e[9]=o=>a.display_name=o),label:"Display Name (Optional)",type:"text",autocomplete:"name",error:s.display_name},null,8,["modelValue","error"]),r("div",de,[$(r("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>a.terms=o),type:"checkbox",id:"terms-accept",required:""},null,512),[[L,a.terms]]),e[18]||(e[18]=r("label",{for:"terms-accept"},[U(" I agree to the "),r("a",{href:"/terms",target:"_blank"},"Terms of Service")],-1)),s.terms?(c(),p("span",me,k(s.terms),1)):V("",!0)]),f(B,{type:"submit",variant:"primary",size:"lg",block:"",loading:m.value},{default:R(()=>[...e[19]||(e[19]=[U(" Create Account ",-1)])]),_:1},8,["loading"])],32)),r("div",pe,[e[24]||(e[24]=r("div",{class:"divider"},[r("span",null,"Or continue with")],-1)),r("div",ce,[r("button",{class:"btn-oauth btn-google",type:"button",onClick:e[11]||(e[11]=o=>I("google"))},[...e[21]||(e[21]=[r("span",{class:"icon"},"G",-1),r("span",null,"Google",-1)])]),r("button",{class:"btn-oauth btn-yandex",type:"button",onClick:e[12]||(e[12]=o=>I("yandex"))},[...e[22]||(e[22]=[r("span",{class:"icon"},"Я",-1),r("span",null,"Yandex",-1)])]),r("button",{class:"btn-oauth btn-telegram",type:"button",onClick:e[13]||(e[13]=o=>I("telegram"))},[...e[23]||(e[23]=[r("span",{class:"icon"},"✈️",-1),r("span",null,"Telegram",-1)])])])])]))}}),we=M(fe,[["__scopeId","data-v-2aa0acc9"]]);export{we as default};
//# sourceMappingURL=LoginView-CHWPTwMR.js.map
