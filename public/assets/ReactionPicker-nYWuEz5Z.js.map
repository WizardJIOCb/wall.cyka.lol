{"version":3,"file":"ReactionPicker-nYWuEz5Z.js","sources":["../../frontend/src/services/api/posts.ts","../../frontend/src/composables/useReactions.ts","../../frontend/src/components/social/ReactionPicker.vue"],"sourcesContent":["import apiClient from './client'\r\nimport type { Post, PaginatedResponse } from '@/types/models'\r\nimport type { CreatePostRequest } from '@/types/api'\r\n\r\nexport const postsAPI = {\r\n  /**\r\n   * Get posts feed\r\n   */\r\n  async getFeed(params?: {\r\n    page?: number\r\n    per_page?: number\r\n    content_type?: string\r\n    time_range?: string\r\n    sort_by?: string\r\n  }): Promise<PaginatedResponse<Post>> {\r\n    return apiClient.get('/posts/feed', params)\r\n  },\r\n\r\n  /**\r\n   * Get posts from a specific wall\r\n   */\r\n  async getWallPosts(wallId: number, params?: {\r\n    page?: number\r\n    per_page?: number\r\n  }): Promise<PaginatedResponse<Post>> {\r\n    return apiClient.get(`/walls/${wallId}/posts`, params)\r\n  },\r\n\r\n  /**\r\n   * Get a single post by ID\r\n   */\r\n  async getPost(postId: number): Promise<Post> {\r\n    return apiClient.get(`/posts/${postId}`)\r\n  },\r\n\r\n  /**\r\n   * Create a new post\r\n   */\r\n  async createPost(data: CreatePostRequest): Promise<Post> {\r\n    const formData = new FormData()\r\n    \r\n    formData.append('wall_id', data.wall_id.toString())\r\n    formData.append('content', data.content)\r\n    \r\n    if (data.post_type) {\r\n      formData.append('post_type', data.post_type)\r\n    }\r\n    \r\n    if (data.visibility) {\r\n      formData.append('visibility', data.visibility)\r\n    }\r\n    \r\n    if (data.ai_application_id) {\r\n      formData.append('ai_application_id', data.ai_application_id.toString())\r\n    }\r\n    \r\n    if (data.media_files) {\r\n      data.media_files.forEach((file, index) => {\r\n        formData.append(`media_files[${index}]`, file)\r\n      })\r\n    }\r\n    \r\n    return apiClient.upload('/posts', formData)\r\n  },\r\n\r\n  /**\r\n   * Update a post\r\n   */\r\n  async updatePost(postId: number, data: {\r\n    content?: string\r\n    visibility?: string\r\n  }): Promise<Post> {\r\n    return apiClient.patch(`/posts/${postId}`, data)\r\n  },\r\n\r\n  /**\r\n   * Delete a post\r\n   */\r\n  async deletePost(postId: number): Promise<void> {\r\n    return apiClient.delete(`/posts/${postId}`)\r\n  },\r\n\r\n  /**\r\n   * React to a post\r\n   */\r\n  async reactToPost(postId: number, reactionType: string): Promise<void> {\r\n    return apiClient.post(`/posts/${postId}/reactions`, { reaction_type: reactionType })\r\n  },\r\n\r\n  /**\r\n   * Remove reaction from a post\r\n   */\r\n  async removeReaction(postId: number): Promise<void> {\r\n    return apiClient.delete(`/posts/${postId}/reactions`)\r\n  },\r\n\r\n  /**\r\n   * Share a post\r\n   */\r\n  async sharePost(postId: number, wallId: number, content?: string): Promise<Post> {\r\n    return apiClient.post(`/posts/${postId}/share`, { wall_id: wallId, content })\r\n  },\r\n\r\n  /**\r\n   * Increment post view count\r\n   */\r\n  async incrementViewCount(postId: number): Promise<void> {\r\n    return apiClient.post(`/posts/${postId}/view`)\r\n  },\r\n\r\n  /**\r\n   * Batch increment post view counts\r\n   */\r\n  async batchIncrementViewCounts(postIds: number[]): Promise<void> {\r\n    return apiClient.post('/posts/batch-view', { post_ids: postIds })\r\n  },\r\n\r\n  /**\r\n   * Increment post open count\r\n   */\r\n  async incrementOpenCount(postId: number): Promise<void> {\r\n    return apiClient.post(`/posts/${postId}/open`)\r\n  }\r\n}\r\n\r\nexport default postsAPI","import { ref, Ref, computed } from 'vue'\r\nimport apiClient from '@/services/api/client'\r\n\r\nexport type ReactionType = 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\r\n\r\nexport interface Reaction {\r\n  reaction_id: number\r\n  user_id: number\r\n  username: string\r\n  avatar_url: string\r\n  target_type: 'post' | 'comment'\r\n  target_id: number\r\n  reaction_type: ReactionType\r\n  created_at: string\r\n}\r\n\r\nexport interface ReactionStats {\r\n  total: number\r\n  by_type: Record<ReactionType, number>\r\n}\r\n\r\nexport function useReactions(\r\n  reactableType: Ref<'post' | 'comment'> | 'post' | 'comment',\r\n  reactableId: Ref<number> | number\r\n) {\r\n  // Create a helper function to initialize by_type with all reaction types\r\n  const createDefaultByType = (): Record<ReactionType, number> => ({\r\n    like: 0,\r\n    love: 0,\r\n    haha: 0,\r\n    wow: 0,\r\n    sad: 0,\r\n    angry: 0\r\n  })\r\n\r\n  const reactions = ref<Reaction[]>([])\r\n  const stats = ref<ReactionStats>({ \r\n    total: 0, \r\n    by_type: createDefaultByType()\r\n  })\r\n  const currentUserReaction = ref<ReactionType | null>(null)\r\n  const loading = ref(false)\r\n  const error = ref<string | null>(null)\r\n\r\n  const getReactableType = () => typeof reactableType === 'string' ? reactableType : reactableType.value\r\n  const getReactableId = () => typeof reactableId === 'number' ? reactableId : reactableId.value\r\n\r\n  const reactionIcons: Record<ReactionType, string> = {\r\n    like: 'üëç',\r\n    love: '‚ù§Ô∏è',\r\n    haha: 'üòÇ',\r\n    wow: 'üòÆ',\r\n    sad: 'üò¢',\r\n    angry: 'üò†'\r\n  }\r\n\r\n  const reactionColors: Record<ReactionType, string> = {\r\n    like: '#3b82f6',\r\n    love: '#ef4444',\r\n    haha: '#eab308',\r\n    wow: '#f97316',\r\n    sad: '#64748b',\r\n    angry: '#dc2626'\r\n  }\r\n\r\n  const getCurrentUserId = (): number => {\r\n    // Get from auth store\r\n    const userStr = localStorage.getItem('user')\r\n    console.log('User string from localStorage:', userStr)\r\n    if (userStr) {\r\n      try {\r\n        const user = JSON.parse(userStr)\r\n        console.log('Parsed user object:', user)\r\n        const userId = user.user_id || 0\r\n        console.log('User ID:', userId)\r\n        return userId\r\n      } catch (e) {\r\n        console.error('Error parsing user from localStorage:', e)\r\n        return 0\r\n      }\r\n    }\r\n    console.log('No user found in localStorage')\r\n    return 0\r\n  }\r\n\r\n  const loadReactions = async () => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      \r\n      const response = await apiClient.get(\r\n        `/reactions/${getReactableType()}/${getReactableId()}`\r\n      )\r\n      \r\n      // The API client already unwraps the response, so we check the unwrapped data directly\r\n      if (response && typeof response === 'object' && 'reactions' in response) {\r\n        // Standard format: { reactions: [...], stats: { total: number, by_type: {...} } }\r\n        reactions.value = Array.isArray(response.reactions) ? response.reactions : []\r\n        const defaultByType = {\r\n          like: 0,\r\n          love: 0,\r\n          haha: 0,\r\n          wow: 0,\r\n          sad: 0,\r\n          angry: 0\r\n        } as Record<ReactionType, number>\r\n\r\n        // Safely merge stats, filtering out any keys not in our ReactionType\r\n        const apiStats = response.stats?.by_type || {}\r\n        const filteredStats: Record<ReactionType, number> = { ...defaultByType }\r\n        \r\n        // Only copy over values for valid reaction types\r\n        Object.keys(defaultByType).forEach(key => {\r\n          if (key in apiStats) {\r\n            filteredStats[key as ReactionType] = Number(apiStats[key]) || 0\r\n          }\r\n        })\r\n\r\n        stats.value = {\r\n          total: response.stats?.total || 0,\r\n          by_type: filteredStats\r\n        }\r\n        \r\n        // Find current user's reaction\r\n        const currentUserId = getCurrentUserId()\r\n        console.log('Current user ID:', currentUserId)\r\n        console.log('Reactions array:', reactions.value)\r\n        const userReaction = reactions.value.find((r: Reaction) => r.user_id === currentUserId)\r\n        console.log('User reaction found:', userReaction)\r\n        currentUserReaction.value = userReaction ? userReaction.reaction_type : null\r\n        console.log('Current user reaction set to:', currentUserReaction.value)\r\n      } else if (Array.isArray(response)) {\r\n        // Direct array format\r\n        reactions.value = response\r\n        stats.value = { \r\n          total: response.length, \r\n          by_type: createDefaultByType()\r\n        }\r\n      } else {\r\n        // Unexpected format\r\n        reactions.value = []\r\n        stats.value = { \r\n          total: 0, \r\n          by_type: createDefaultByType()\r\n        }\r\n      }\r\n    } catch (err: any) {\r\n      error.value = err.message || 'Failed to load reactions'\r\n      console.error('Error loading reactions:', err)\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  const addReaction = async (reactionType: ReactionType): Promise<void> => {\r\n    const previousReaction = currentUserReaction.value\r\n    const previousTotal = stats.value.total\r\n    const previousByType = { ...stats.value.by_type }\r\n    \r\n    try {\r\n      // Optimistic update\r\n      currentUserReaction.value = reactionType\r\n      stats.value.total++\r\n      // Safe access to by_type properties\r\n      stats.value.by_type[reactionType] = (stats.value.by_type[reactionType] ?? 0) + 1\r\n    \r\n      await apiClient.post('/reactions', {\r\n        reactable_type: getReactableType(),\r\n        reactable_id: getReactableId(),\r\n        reaction_type: reactionType\r\n      })\r\n      \r\n      // Reload to get accurate data\r\n      await loadReactions()\r\n    } catch (err: any) {\r\n      // Rollback on error\r\n      currentUserReaction.value = previousReaction\r\n      stats.value.total = previousTotal\r\n      stats.value.by_type = previousByType\r\n      \r\n      error.value = err.message || 'Failed to add reaction'\r\n      throw err\r\n    }\r\n  }\r\n\r\n  const removeReaction = async (): Promise<void> => {\r\n    const previousReaction = currentUserReaction.value\r\n    const previousTotal = stats.value.total\r\n    const previousByType = { ...stats.value.by_type }\r\n    \r\n    if (!previousReaction) return\r\n    \r\n    try {\r\n      // Optimistic update\r\n      currentUserReaction.value = null\r\n      stats.value.total--\r\n      // Safe access to by_type properties\r\n      if (stats.value.by_type[previousReaction] !== undefined) {\r\n        stats.value.by_type[previousReaction] = Math.max(0, stats.value.by_type[previousReaction] - 1)\r\n      }\r\n      \r\n      await apiClient.delete(\r\n        `/reactions/${getReactableType()}/${getReactableId()}`\r\n      )\r\n      \r\n      // Reload to get accurate data\r\n      await loadReactions()\r\n    } catch (err: any) {\r\n      // Rollback on error\r\n      currentUserReaction.value = previousReaction\r\n      stats.value.total = previousTotal\r\n      stats.value.by_type = previousByType\r\n      \r\n      error.value = err.message || 'Failed to remove reaction'\r\n      throw err\r\n    }\r\n  }\r\n\r\n  const toggleReaction = async (reactionType: ReactionType): Promise<void> => {\r\n    if (currentUserReaction.value === reactionType) {\r\n      await removeReaction()\r\n    } else if (currentUserReaction.value) {\r\n      // Change reaction type\r\n      await removeReaction()\r\n      await addReaction(reactionType)\r\n    } else {\r\n      await addReaction(reactionType)\r\n    }\r\n  }\r\n\r\n  const displayIcon = computed(() => {\r\n    if (currentUserReaction.value) {\r\n      return reactionIcons[currentUserReaction.value]\r\n    }\r\n    return 'ü§ç'\r\n  })\r\n\r\n  const displayColor = computed(() => {\r\n    if (currentUserReaction.value) {\r\n      return reactionColors[currentUserReaction.value]\r\n    }\r\n    return '#94a3b8'\r\n  })\r\n\r\n  return {\r\n    reactions,\r\n    stats,\r\n    currentUserReaction,\r\n    loading,\r\n    error,\r\n    reactionIcons,\r\n    reactionColors,\r\n    displayIcon,\r\n    displayColor,\r\n    loadReactions,\r\n    addReaction,\r\n    removeReaction,\r\n    toggleReaction\r\n  }\r\n}\r\n","<template>\r\n  <div class=\"reaction-picker-container\">\r\n    <!-- Reaction Button -->\r\n    <button \r\n      @click=\"togglePicker\" \r\n      @mouseenter=\"showPickerOnHover\"\r\n      @mouseleave=\"hidePickerOnHover\"\r\n      :class=\"['reaction-button', { active: currentUserReaction }]\"\r\n      :style=\"{ color: displayColor }\"\r\n    >\r\n      <span class=\"reaction-icon\">{{ displayIcon }}</span>\r\n      <span v-if=\"stats.total > 0\" class=\"reaction-count\">{{ stats.total }}</span>\r\n    </button>\r\n\r\n    <!-- Reaction Picker Popup -->\r\n    <Transition name=\"picker-fade\">\r\n      <div \r\n        v-if=\"showPicker\" \r\n        class=\"reaction-picker\"\r\n        @mouseenter=\"keepPickerOpen\"\r\n        @mouseleave=\"hidePickerOnHover\"\r\n      >\r\n        <button\r\n          v-for=\"(icon, type) in reactionIcons\"\r\n          :key=\"type\"\r\n          @click=\"handleReactionClick(type as ReactionType)\"\r\n          :class=\"['reaction-option', { selected: currentUserReaction === type }]\"\r\n          :title=\"type\"\r\n        >\r\n          {{ icon }}\r\n        </button>\r\n      </div>\r\n    </Transition>\r\n\r\n    <!-- Reaction Details Modal -->\r\n    <Transition name=\"modal-fade\">\r\n      <div v-if=\"showDetailsModal\" class=\"modal-overlay\" @click=\"showDetailsModal = false\">\r\n        <div class=\"modal-content\" @click.stop>\r\n          <div class=\"modal-header\">\r\n            <h3>Reactions</h3>\r\n            <button @click=\"showDetailsModal = false\" class=\"btn-close\">√ó</button>\r\n          </div>\r\n          \r\n          <div class=\"modal-body\">\r\n            <div class=\"reaction-tabs\">\r\n              <button\r\n                @click=\"selectedTab = 'all'\"\r\n                :class=\"['tab-button', { active: selectedTab === 'all' }]\"\r\n              >\r\n                All {{ stats.total }}\r\n              </button>\r\n              <button\r\n                v-for=\"(count, type) in stats.by_type\"\r\n                :key=\"type\"\r\n                @click=\"selectedTab = type\"\r\n                :class=\"['tab-button', { active: selectedTab === type }]\"\r\n                v-show=\"count > 0\"\r\n              >\r\n                {{ reactionIcons[type as ReactionType] }} {{ count }}\r\n              </button>\r\n            </div>\r\n\r\n            <div class=\"reaction-users-list\">\r\n              <div\r\n                v-for=\"reaction in filteredReactions\"\r\n                :key=\"reaction.reaction_id\"\r\n                class=\"reaction-user-item\"\r\n              >\r\n                <img \r\n                  :src=\"reaction.avatar_url || '/assets/images/default-avatar.svg'\" \r\n                  :alt=\"reaction.username\"\r\n                  class=\"user-avatar\"\r\n                />\r\n                <span class=\"username\">{{ reaction.username }}</span>\r\n                <span class=\"reaction-emoji\">{{ reactionIcons[reaction.reaction_type] }}</span>\r\n              </div>\r\n              \r\n              <div v-if=\"filteredReactions.length === 0\" class=\"empty-state\">\r\n                No reactions yet\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Transition>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, watch } from 'vue'\r\nimport { useReactions, ReactionType, Reaction } from '@/composables/useReactions'\r\n\r\nconst props = defineProps<{\r\n  reactableType: 'post' | 'comment'\r\n  reactableId: number\r\n}>()\r\n\r\nconsole.log('ReactionPicker created with:', props.reactableType, props.reactableId)\r\n\r\nconst {\r\n  reactions,\r\n  stats,\r\n  currentUserReaction,\r\n  loading,\r\n  reactionIcons,\r\n  displayIcon,\r\n  displayColor,\r\n  loadReactions,\r\n  toggleReaction\r\n} = useReactions(ref(props.reactableType), ref(props.reactableId))\r\n\r\n// Watch for changes in props and reload reactions if needed\r\nwatch(() => [props.reactableType, props.reactableId], () => {\r\n  console.log('ReactionPicker props changed, reloading reactions:', props.reactableType, props.reactableId)\r\n  loadReactions()\r\n})\r\n\r\n// Watch for changes in reactions to log them\r\nwatch(reactions, (newReactions) => {\r\n  console.log('Reactions updated:', newReactions)\r\n  console.log('Current user reaction:', currentUserReaction.value)\r\n}, { deep: true })\r\n\r\n// Watch for changes in currentUserReaction to log them\r\nwatch(currentUserReaction, (newReaction) => {\r\n  console.log('Current user reaction updated:', newReaction)\r\n  console.log('Display icon:', displayIcon.value)\r\n  console.log('Display color:', displayColor.value)\r\n})\r\n\r\nconst showPicker = ref(false)\r\nconst showDetailsModal = ref(false)\r\nconst selectedTab = ref<string>('all')\r\nlet hoverTimeout: any = null\r\n\r\nconst togglePicker = (event: Event) => {\r\n  event.stopPropagation()\r\n  console.log('Toggle picker clicked')\r\n  showPicker.value = !showPicker.value\r\n}\r\n\r\nconst showPickerOnHover = () => {\r\n  console.log('Show picker on hover')\r\n  hoverTimeout = setTimeout(() => {\r\n    showPicker.value = true\r\n  }, 300)\r\n}\r\n\r\nconst hidePickerOnHover = () => {\r\n  console.log('Hide picker on hover')\r\n  if (hoverTimeout) {\r\n    clearTimeout(hoverTimeout)\r\n    hoverTimeout = null\r\n  }\r\n  setTimeout(() => {\r\n    if (!showPicker.value) return\r\n    showPicker.value = false\r\n  }, 300)\r\n}\r\n\r\nconst keepPickerOpen = () => {\r\n  console.log('Keep picker open')\r\n  if (hoverTimeout) {\r\n    clearTimeout(hoverTimeout)\r\n    hoverTimeout = null\r\n  }\r\n}\r\n\r\nconst handleReactionClick = async (type: ReactionType) => {\r\n  console.log('Handle reaction click:', type)\r\n  showPicker.value = false\r\n  try {\r\n    await toggleReaction(type)\r\n    console.log('Reaction toggled successfully')\r\n  } catch (error) {\r\n    console.error('Failed to toggle reaction:', error)\r\n  }\r\n}\r\n\r\nconst showReactionDetails = () => {\r\n  console.log('Show reaction details')\r\n  loadReactions()\r\n  showDetailsModal.value = true\r\n}\r\n\r\nconst filteredReactions = computed(() => {\r\n  if (selectedTab.value === 'all') {\r\n    return reactions.value\r\n  }\r\n  return reactions.value.filter((r: Reaction) => r.reaction_type === selectedTab.value)\r\n})\r\n\r\n// Load reactions on mount\r\nconsole.log('Loading reactions on mount')\r\nloadReactions()\r\n</script>\r\n\r\n<style scoped>\r\n.reaction-picker-container {\r\n  position: relative;\r\n  display: inline-block;\r\n}\r\n\r\n.reaction-button {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: var(--spacing-2);\r\n  padding: var(--spacing-2) var(--spacing-3);\r\n  background: transparent;\r\n  border: none;\r\n  border-radius: var(--radius-md);\r\n  cursor: pointer;\r\n  color: var(--color-text-secondary);\r\n  transition: all 0.2s;\r\n  font-size: 1rem;\r\n}\r\n\r\n.reaction-button:hover {\r\n  background: var(--color-bg-secondary);\r\n  transform: scale(1.05);\r\n}\r\n\r\n.reaction-button.active {\r\n  color: var(--color-primary);\r\n}\r\n\r\n.reaction-icon {\r\n  font-size: 1.25rem;\r\n}\r\n\r\n.reaction-count {\r\n  font-size: 0.875rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.reaction-picker {\r\n  position: absolute;\r\n  top: 100%;\r\n  left: 50%;\r\n  transform: translateX(-50%) translateY(8px);\r\n  display: flex;\r\n  gap: var(--spacing-2);\r\n  padding: var(--spacing-3);\r\n  background: var(--color-bg-elevated);\r\n  border-radius: var(--radius-lg);\r\n  box-shadow: var(--shadow-lg);\r\n  z-index: 100;\r\n}\r\n\r\n.reaction-option {\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: transparent;\r\n  border: 2px solid transparent;\r\n  border-radius: var(--radius-md);\r\n  cursor: pointer;\r\n  font-size: 1.5rem;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.reaction-option:hover {\r\n  transform: scale(1.2);\r\n  background: var(--color-bg-secondary);\r\n}\r\n\r\n.reaction-option.selected {\r\n  border-color: var(--color-primary);\r\n  background: rgba(99, 102, 241, 0.1);\r\n}\r\n\r\n.picker-fade-enter-active,\r\n.picker-fade-leave-active {\r\n  transition: opacity 0.2s, transform 0.2s;\r\n}\r\n\r\n.picker-fade-enter-from,\r\n.picker-fade-leave-to {\r\n  opacity: 0;\r\n  transform: translateX(-50%) translateY(-4px);\r\n}\r\n\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.modal-content {\r\n  background: var(--color-bg-elevated);\r\n  border-radius: var(--radius-lg);\r\n  max-width: 500px;\r\n  width: 90%;\r\n  max-height: 80vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: var(--spacing-4);\r\n  border-bottom: 2px solid var(--color-border);\r\n}\r\n\r\n.modal-header h3 {\r\n  font-size: 1.25rem;\r\n  font-weight: 700;\r\n  color: var(--color-text-primary);\r\n}\r\n\r\n.btn-close {\r\n  width: 32px;\r\n  height: 32px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: transparent;\r\n  border: none;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  font-size: 1.5rem;\r\n  color: var(--color-text-secondary);\r\n  transition: all 0.2s;\r\n}\r\n\r\n.btn-close:hover {\r\n  background: var(--color-bg-secondary);\r\n  color: var(--color-text-primary);\r\n}\r\n\r\n.modal-body {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: var(--spacing-4);\r\n}\r\n\r\n.reaction-tabs {\r\n  display: flex;\r\n  gap: var(--spacing-2);\r\n  margin-bottom: var(--spacing-4);\r\n  overflow-x: auto;\r\n}\r\n\r\n.tab-button {\r\n  padding: var(--spacing-2) var(--spacing-4);\r\n  background: var(--color-bg-secondary);\r\n  border: 2px solid transparent;\r\n  border-radius: var(--radius-full);\r\n  cursor: pointer;\r\n  font-weight: 600;\r\n  color: var(--color-text-secondary);\r\n  transition: all 0.2s;\r\n  white-space: nowrap;\r\n}\r\n\r\n.tab-button:hover {\r\n  background: var(--color-bg-primary);\r\n}\r\n\r\n.tab-button.active {\r\n  background: var(--color-primary);\r\n  color: white;\r\n}\r\n\r\n.reaction-users-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: var(--spacing-3);\r\n}\r\n\r\n.reaction-user-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: var(--spacing-3);\r\n  padding: var(--spacing-2);\r\n  border-radius: var(--radius-md);\r\n  transition: background 0.2s;\r\n}\r\n\r\n.reaction-user-item:hover {\r\n  background: var(--color-bg-secondary);\r\n}\r\n\r\n.user-avatar {\r\n  width: 36px;\r\n  height: 36px;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n}\r\n\r\n.username {\r\n  flex: 1;\r\n  font-weight: 600;\r\n  color: var(--color-text-primary);\r\n}\r\n\r\n.reaction-emoji {\r\n  font-size: 1.25rem;\r\n}\r\n\r\n.empty-state {\r\n  text-align: center;\r\n  padding: var(--spacing-8);\r\n  color: var(--color-text-secondary);\r\n}\r\n\r\n.modal-fade-enter-active,\r\n.modal-fade-leave-active {\r\n  transition: opacity 0.3s;\r\n}\r\n\r\n.modal-fade-enter-from,\r\n.modal-fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n.modal-fade-enter-active .modal-content,\r\n.modal-fade-leave-active .modal-content {\r\n  transition: transform 0.3s;\r\n}\r\n\r\n.modal-fade-enter-from .modal-content,\r\n.modal-fade-leave-to .modal-content {\r\n  transform: scale(0.9);\r\n}\r\n</style>\r\n"],"names":["postsAPI","params","apiClient","wallId","postId","data","formData","file","index","reactionType","content","postIds","useReactions","reactableType","reactableId","createDefaultByType","reactions","ref","stats","currentUserReaction","loading","error","getReactableType","getReactableId","reactionIcons","reactionColors","getCurrentUserId","userStr","user","userId","e","loadReactions","response","defaultByType","apiStats","_a","filteredStats","key","_b","currentUserId","userReaction","r","err","addReaction","previousReaction","previousTotal","previousByType","removeReaction","toggleReaction","displayIcon","computed","displayColor","props","__props","watch","newReactions","newReaction","showPicker","showDetailsModal","selectedTab","hoverTimeout","togglePicker","event","showPickerOnHover","hidePickerOnHover","keepPickerOpen","handleReactionClick","type","filteredReactions","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_unref","_hoisted_2","_toDisplayString","_hoisted_3","_createVNode","_Transition","_Fragment","_renderList","icon","$event","_normalizeClass","_hoisted_4","_hoisted_5","_cache","_hoisted_6","_hoisted_7","count","_hoisted_8","_hoisted_9","reaction","_hoisted_11","_hoisted_12","_hoisted_13"],"mappings":"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"}