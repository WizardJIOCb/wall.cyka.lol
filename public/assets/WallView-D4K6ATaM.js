import{e as H,r as c,b as $,i as x,f as e,h as _,k as s,t as i,S as B,F as L,s as P,V as N,u as R,o}from"./vendor-Cy2yCxOA.js";import{u as j,b as f,_ as z}from"./index-OxM2XMo-.js";import"./utils-i9HKr1_Q.js";const A={class:"wall-view"},G={key:0,class:"loading-container"},O={key:1,class:"error-container"},q={key:2,class:"wall-content"},J={class:"wall-header"},K={class:"wall-info"},Q={class:"wall-avatar"},U=["src","alt"],X={class:"wall-details"},Y={class:"wall-title"},Z={class:"wall-owner"},ss={key:0,class:"wall-description"},ts={class:"wall-stats"},as={class:"stat"},es={class:"stat-value"},os={class:"stat"},ls={class:"stat-value"},ns={class:"posts-section"},rs={key:0,class:"loading-posts"},is={key:1,class:"empty-state"},ds={key:2,class:"posts-grid"},cs={class:"post-header"},us=["src","alt"],_s={class:"post-meta"},vs={class:"post-author"},ps={class:"post-time"},ms={class:"post-content"},ws=["innerHTML"],hs={key:1},fs={key:0,class:"post-media"},gs=["src","alt"],ys={class:"post-actions"},bs={class:"action-btn"},ks={class:"action-btn"},Ms={class:"action-btn"},Cs={key:3,class:"load-more"},g=20,$s=H({__name:"WallView",props:{wallId:{}},setup(S){const y=S,W=N();R();const b=j(),w=c(!0),v=c(!1),p=c(null),l=c(null),u=c([]),h=c(1),k=c(!0),D=$(()=>l.value&&b.user&&l.value.user_id===b.user.user_id),E=$(()=>{var n;return(n=l.value)!=null&&n.theme?{backgroundColor:l.value.theme}:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}}),F=n=>{const t=new Date(n),r=new Date().getTime()-t.getTime(),d=Math.floor(r/6e4),m=Math.floor(r/36e5),C=Math.floor(r/864e5);return d<1?"just now":d<60?`${d}m ago`:m<24?`${m}h ago`:C<7?`${C}d ago`:t.toLocaleDateString()},I=async()=>{var n,t;try{w.value=!0,p.value=null;let a=y.wallId;if(a==="me"){const d=await f.get("/walls/me");if(d.data.success&&d.data.data.wall){const m=d.data.data.wall.wall_id;W.replace(`/wall/${m}`);return}else throw new Error("Could not find your wall")}const r=await f.get(`/walls/${a}`);if(r.data.success&&r.data.data.wall)l.value=r.data.data.wall,await M();else throw new Error(r.data.message||"Wall not found")}catch(a){console.error("Error loading wall:",a),p.value=((t=(n=a.response)==null?void 0:n.data)==null?void 0:t.message)||a.message||"Failed to load wall"}finally{w.value=!1}},M=async()=>{try{v.value=!0;const n=(h.value-1)*g,t=await f.get(`/walls/${y.wallId}/posts?limit=${g}&offset=${n}`);t.data.success&&t.data.data.posts&&(h.value===1?u.value=t.data.data.posts:u.value=[...u.value,...t.data.data.posts],k.value=t.data.data.posts.length===g)}catch(n){console.error("Error loading posts:",n)}finally{v.value=!1}},T=()=>{h.value++,M()},V=()=>{console.log("Create post functionality coming soon")};return x(()=>{I()}),(n,t)=>(o(),e("div",A,[w.value?(o(),e("div",G,[...t[1]||(t[1]=[s("div",{class:"spinner"},null,-1),s("p",null,"Loading wall...",-1)])])):p.value?(o(),e("div",O,[t[2]||(t[2]=s("h2",null,"Error Loading Wall",-1)),s("p",null,i(p.value),1),s("button",{onClick:t[0]||(t[0]=a=>n.$router.push("/")),class:"btn-primary"},"Go Home")])):l.value?(o(),e("div",q,[s("div",J,[s("div",{class:"wall-banner",style:B(E.value)},null,4),s("div",K,[s("div",Q,[s("img",{src:l.value.owner_avatar||"/assets/images/default-avatar.svg",alt:l.value.owner_username},null,8,U)]),s("div",X,[s("h1",Y,i(l.value.display_name),1),s("p",Z,"by @"+i(l.value.owner_username),1),l.value.description?(o(),e("p",ss,i(l.value.description),1)):_("",!0)]),s("div",ts,[s("div",as,[s("span",es,i(l.value.post_count||0),1),t[3]||(t[3]=s("span",{class:"stat-label"},"Posts",-1))]),s("div",os,[s("span",ls,i(l.value.follower_count||0),1),t[4]||(t[4]=s("span",{class:"stat-label"},"Followers",-1))])])])]),s("div",ns,[t[10]||(t[10]=s("h2",{class:"section-title"},"Posts",-1)),v.value?(o(),e("div",rs,[...t[5]||(t[5]=[s("div",{class:"spinner"},null,-1),s("p",null,"Loading posts...",-1)])])):u.value.length===0?(o(),e("div",is,[t[6]||(t[6]=s("p",null,"No posts yet on this wall.",-1)),D.value?(o(),e("button",{key:0,onClick:V,class:"btn-primary"},"Create First Post")):_("",!0)])):(o(),e("div",ds,[(o(!0),e(L,null,P(u.value,a=>(o(),e("div",{key:a.post_id,class:"post-card"},[s("div",cs,[s("img",{src:a.author_avatar||"/assets/images/default-avatar.svg",alt:a.author_username,class:"post-avatar"},null,8,us),s("div",_s,[s("span",vs,"@"+i(a.author_username),1),s("span",ps,i(F(a.created_at)),1)])]),s("div",ms,[a.content_html?(o(),e("div",{key:0,innerHTML:a.content_html},null,8,ws)):(o(),e("p",hs,i(a.content_text),1))]),a.media_attachments&&a.media_attachments.length>0?(o(),e("div",fs,[(o(!0),e(L,null,P(a.media_attachments,r=>(o(),e("img",{key:r.attachment_id,src:r.file_url,alt:r.file_name},null,8,gs))),128))])):_("",!0),s("div",ys,[s("button",bs,[t[7]||(t[7]=s("span",{class:"icon"},"👍",-1)),s("span",null,i(a.reaction_count||0),1)]),s("button",ks,[t[8]||(t[8]=s("span",{class:"icon"},"💬",-1)),s("span",null,i(a.comment_count||0),1)]),s("button",Ms,[t[9]||(t[9]=s("span",{class:"icon"},"👁",-1)),s("span",null,i(a.view_count||0),1)])])]))),128))])),k.value&&!v.value?(o(),e("div",Cs,[s("button",{onClick:T,class:"btn-secondary"},"Load More")])):_("",!0)])])):_("",!0)]))}}),Ws=z($s,[["__scopeId","data-v-53c3ad4b"]]);export{Ws as default};
//# sourceMappingURL=WallView-D4K6ATaM.js.map
