import{f as I,r as u,b as J,e as K,g as i,k as e,t as o,F as _,x as y,j as b,O as d,V as f,X as B,S as D,n as k,U as Q,i as c}from"./vendor-B5QdKGWw.js";import{u as Y,h as Z,i as x,b as p,s as ee,_ as se}from"./index-Bl7dfncJ.js";import"./utils-i9HKr1_Q.js";const ae={class:"settings-view"},te={class:"settings-header"},oe={class:"settings-container"},le={class:"tabs-nav"},ne=["onClick"],ie={class:"tab-icon"},ce={class:"tab-label"},re={class:"tab-content"},ue={key:0,class:"tab-panel"},de={class:"panel-title"},me={class:"form-section"},pe={class:"form-label"},ve=["placeholder"],be={class:"form-section"},fe={class:"form-label"},he=["placeholder"],ge={class:"form-section"},_e=["placeholder"],ye=["placeholder"],ke=["placeholder"],we={class:"form-section danger-zone"},$e={class:"warning-text"},Ce={key:1,class:"tab-panel"},Se={class:"panel-title"},Pe={class:"form-section"},Ne={class:"char-count"},Ve={class:"form-section"},Ae={class:"avatar-upload"},Ue=["src"],Be={key:2,class:"tab-panel"},De={class:"panel-title"},Te={class:"form-section"},ze={value:"public"},Fe={value:"private"},Le={value:"followers"},We={key:3,class:"tab-panel"},Me={class:"panel-title"},Ee={class:"form-section"},Re={class:"checkbox-label"},je={class:"form-section"},Ge={class:"checkbox-label"},He={key:4,class:"tab-panel"},Oe={class:"panel-title"},Xe={class:"form-section"},qe={class:"form-label"},Ie={class:"theme-selector"},Je=["onClick"],Ke={class:"form-section"},Qe={class:"form-label"},Ye={class:"language-selector"},Ze=["onClick"],xe={class:"language-flag"},es={class:"language-name"},ss={class:"form-section"},as={class:"form-label"},ts={key:5,class:"tab-panel"},os={class:"panel-title"},ls={class:"bricks-balance"},ns={class:"balance-display"},is={class:"balance-value"},cs=["disabled"],rs={class:"transactions-section"},us={key:0,class:"empty-state"},ds={key:1,class:"transactions-list"},ms={class:"settings-footer"},ps=["disabled"],vs=I({__name:"SettingsView",setup(bs){var V,A,U;const v=Y(),N=Z(),m=u("appearance"),h=u(!1),w=u(x()),T=[{id:"account",icon:"👤",label:"Account"},{id:"profile",icon:"📝",label:"Profile"},{id:"privacy",icon:"🔒",label:"Privacy"},{id:"notifications",icon:"🔔",label:"Notifications"},{id:"appearance",icon:"🎨",label:"Appearance"},{id:"bricks",icon:"🧱",label:"Bricks"}],z=[{code:"en",name:"English",flag:"🇬🇧"},{code:"ru",name:"Русский",flag:"🇷🇺"}],F=[{id:"light",name:"Light",color:"#ffffff"},{id:"dark",name:"Dark",color:"#1a1a1a"},{id:"green",name:"Green",color:"#10b981"},{id:"blue",name:"Blue",color:"#3b82f6"},{id:"cream",name:"Cream",color:"#fef3c7"},{id:"high-contrast",name:"High Contrast",color:"#000000"}],l=u({username:((V=v.user)==null?void 0:V.username)||"",email:((A=v.user)==null?void 0:A.email)||"",bio:((U=v.user)==null?void 0:U.bio)||"",defaultWallPrivacy:"public",emailNotifications:!0,pushNotifications:!0,fontSize:"medium"}),r=u({current:"",new:"",confirm:""}),$=u(N.currentTheme||"light"),L=J(()=>{var s;return((s=v.user)==null?void 0:s.avatar_url)||"/assets/images/default-avatar.svg"}),C=u(0),S=u(!0),W=u(""),P=u([]),M=async s=>{try{ee(s),w.value=s,await p.patch("/users/me/settings",{language:s}),console.log("Language changed to:",s)}catch(a){console.error("Failed to save language preference:",a)}},E=s=>{$.value=s,N.setTheme(s)},R=async()=>{var s,a;if(r.value.new!==r.value.confirm){alert("Passwords do not match");return}try{await p.post("/users/me/change-password",{current_password:r.value.current,new_password:r.value.new}),r.value={current:"",new:"",confirm:""},alert("Password changed successfully")}catch(n){alert(((a=(s=n.response)==null?void 0:s.data)==null?void 0:a.message)||"Failed to change password")}},j=()=>{console.log("Avatar upload coming soon")},G=()=>{confirm("Are you sure you want to delete your account? This action cannot be undone.")&&H()},H=async()=>{var s,a;try{await p.delete("/users/me/account"),v.logout()}catch(n){alert(((a=(s=n.response)==null?void 0:s.data)==null?void 0:a.message)||"Failed to delete account")}},O=async()=>{var s,a;try{const n=await p.post("/bricks/claim");n.data.success&&(C.value=n.data.data.new_balance,S.value=!1)}catch(n){alert(((a=(s=n.response)==null?void 0:s.data)==null?void 0:a.message)||"Failed to claim daily bricks")}},X=async()=>{try{const[s,a]=await Promise.all([p.get("/bricks/balance"),p.get("/bricks/transactions?limit=10")]);s.data.success&&(C.value=s.data.data.balance),a.data.success&&(P.value=a.data.data.transactions||[])}catch(s){console.error("Failed to load bricks data:",s)}},q=async()=>{var s,a,n,t;try{h.value=!0,await p.patch("/users/me/settings",{theme:$.value,language:w.value,default_wall_privacy:l.value.defaultWallPrivacy,email_notifications:l.value.emailNotifications,push_notifications:l.value.pushNotifications,font_size:l.value.fontSize}),(l.value.username!==((s=v.user)==null?void 0:s.username)||l.value.email!==((a=v.user)==null?void 0:a.email))&&await p.patch("/users/me",{username:l.value.username,email:l.value.email,bio:l.value.bio}),alert("Settings saved successfully")}catch(g){alert(((t=(n=g.response)==null?void 0:n.data)==null?void 0:t.message)||"Failed to save settings")}finally{h.value=!1}};return K(()=>{X()}),(s,a)=>{var n;return c(),i("div",ae,[e("div",te,[e("h1",null,o(s.$t("settings.title")),1)]),e("div",oe,[e("div",le,[(c(),i(_,null,y(T,t=>e("button",{key:t.id,class:k(["tab-button",{active:m.value===t.id}]),onClick:g=>m.value=t.id},[e("span",ie,o(t.icon),1),e("span",ce,o(s.$t(`settings.tabs.${t.id}`)),1)],10,ne)),64))]),e("div",re,[m.value==="account"?(c(),i("div",ue,[e("h2",de,o(s.$t("settings.tabs.account")),1),e("div",me,[e("label",pe,o(s.$t("settings.account.username")),1),d(e("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>l.value.username=t),type:"text",class:"form-input",placeholder:s.$t("settings.account.username")},null,8,ve),[[f,l.value.username]])]),e("div",be,[e("label",fe,o(s.$t("settings.account.email")),1),d(e("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>l.value.email=t),type:"email",class:"form-input",placeholder:s.$t("settings.account.email")},null,8,he),[[f,l.value.email]])]),e("div",ge,[e("h3",null,o(s.$t("settings.account.changePassword")),1),d(e("input",{"onUpdate:modelValue":a[2]||(a[2]=t=>r.value.current=t),type:"password",class:"form-input",placeholder:s.$t("settings.account.currentPassword")},null,8,_e),[[f,r.value.current]]),d(e("input",{"onUpdate:modelValue":a[3]||(a[3]=t=>r.value.new=t),type:"password",class:"form-input",placeholder:s.$t("settings.account.newPassword")},null,8,ye),[[f,r.value.new]]),d(e("input",{"onUpdate:modelValue":a[4]||(a[4]=t=>r.value.confirm=t),type:"password",class:"form-input",placeholder:s.$t("settings.account.confirmNewPassword")},null,8,ke),[[f,r.value.confirm]]),e("button",{onClick:R,class:"btn-primary"},o(s.$t("common.buttons.update")),1)]),e("div",we,[e("h3",null,o(s.$t("settings.account.deleteAccount")),1),e("p",$e,o(s.$t("settings.account.deleteAccountWarning")),1),e("button",{onClick:G,class:"btn-danger"},o(s.$t("common.buttons.delete")),1)])])):b("",!0),m.value==="profile"?(c(),i("div",Ce,[e("h2",Se,o(s.$t("settings.tabs.profile")),1),e("div",Pe,[a[10]||(a[10]=e("label",{class:"form-label"},"Bio",-1)),d(e("textarea",{"onUpdate:modelValue":a[5]||(a[5]=t=>l.value.bio=t),class:"form-textarea",placeholder:"Tell us about yourself...",rows:"4",maxlength:"500"},null,512),[[f,l.value.bio]]),e("span",Ne,o(((n=l.value.bio)==null?void 0:n.length)||0)+"/500",1)]),e("div",Ve,[a[11]||(a[11]=e("label",{class:"form-label"},"Avatar",-1)),e("div",Ae,[e("img",{src:L.value,alt:"Avatar",class:"avatar-preview"},null,8,Ue),e("button",{onClick:j,class:"btn-secondary"},o(s.$t("common.actions.upload")),1)])])])):b("",!0),m.value==="privacy"?(c(),i("div",Be,[e("h2",De,o(s.$t("settings.tabs.privacy")),1),e("div",Te,[a[12]||(a[12]=e("label",{class:"form-label"},"Default Wall Privacy",-1)),d(e("select",{"onUpdate:modelValue":a[6]||(a[6]=t=>l.value.defaultWallPrivacy=t),class:"form-select"},[e("option",ze,o(s.$t("walls.public")),1),e("option",Fe,o(s.$t("walls.private")),1),e("option",Le,o(s.$t("walls.followers")),1)],512),[[B,l.value.defaultWallPrivacy]])])])):b("",!0),m.value==="notifications"?(c(),i("div",We,[e("h2",Me,o(s.$t("settings.tabs.notifications")),1),e("div",Ee,[e("label",Re,[d(e("input",{"onUpdate:modelValue":a[7]||(a[7]=t=>l.value.emailNotifications=t),type:"checkbox"},null,512),[[D,l.value.emailNotifications]]),a[13]||(a[13]=e("span",null,"Email Notifications",-1))])]),e("div",je,[e("label",Ge,[d(e("input",{"onUpdate:modelValue":a[8]||(a[8]=t=>l.value.pushNotifications=t),type:"checkbox"},null,512),[[D,l.value.pushNotifications]]),a[14]||(a[14]=e("span",null,"Push Notifications",-1))])])])):b("",!0),m.value==="appearance"?(c(),i("div",He,[e("h2",Oe,o(s.$t("settings.tabs.appearance")),1),e("div",Xe,[e("label",qe,o(s.$t("settings.appearance.theme")),1),e("div",Ie,[(c(),i(_,null,y(F,t=>e("button",{key:t.id,class:k(["theme-option",{active:$.value===t.id}]),onClick:g=>E(t.id)},[e("span",{class:"theme-preview",style:Q({background:t.color})},null,4),e("span",null,o(t.name),1)],10,Je)),64))])]),e("div",Ke,[e("label",Qe,o(s.$t("settings.appearance.language")),1),e("div",Ye,[(c(),i(_,null,y(z,t=>e("button",{key:t.code,class:k(["language-option",{active:w.value===t.code}]),onClick:g=>M(t.code)},[e("span",xe,o(t.flag),1),e("span",es,o(t.name),1)],10,Ze)),64))])]),e("div",ss,[e("label",as,o(s.$t("settings.appearance.fontSize")),1),d(e("select",{"onUpdate:modelValue":a[9]||(a[9]=t=>l.value.fontSize=t),class:"form-select"},[...a[15]||(a[15]=[e("option",{value:"small"},"Small",-1),e("option",{value:"medium"},"Medium",-1),e("option",{value:"large"},"Large",-1)])],512),[[B,l.value.fontSize]])])])):b("",!0),m.value==="bricks"?(c(),i("div",ts,[e("h2",os,o(s.$t("settings.tabs.bricks")),1),e("div",ls,[e("div",ns,[a[16]||(a[16]=e("span",{class:"balance-label"},"Current Balance",-1)),e("span",is,o(C.value)+" 🧱",1)]),e("button",{onClick:O,disabled:!S.value,class:"btn-primary"},o(S.value?"Claim Daily Bricks":`Next claim in ${W.value}`),9,cs)]),e("div",rs,[a[17]||(a[17]=e("h3",null,"Recent Transactions",-1)),P.value.length===0?(c(),i("div",us," No transactions yet ")):(c(),i("div",ds,[(c(!0),i(_,null,y(P.value,t=>(c(),i("div",{key:t.id,class:"transaction-item"},[e("span",null,o(t.description),1),e("span",{class:k(["transaction-amount",t.amount>0?"positive":"negative"])},o(t.amount>0?"+":"")+o(t.amount)+" 🧱 ",3)]))),128))]))])])):b("",!0)])]),e("div",ms,[e("button",{onClick:q,class:"btn-primary btn-large",disabled:h.value},o(h.value?"Saving...":s.$t("common.buttons.save")),9,ps)])])}}}),_s=se(vs,[["__scopeId","data-v-7597bd7c"]]);export{_s as default};
//# sourceMappingURL=SettingsView-2FvZJFnv.js.map
